{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/z42opt-check.vue?7542","webpack:///src/components/z42opt-check.vue","webpack:///./src/components/z42opt-check.vue?8b09","webpack:///./src/components/z42opt-check.vue","webpack:///./src/components/optionsDescriptorValues.js","webpack:///./src/components/z42opt-palette.vue?d128","webpack:///src/components/z42opt-palette.vue","webpack:///./src/components/z42opt-palette.vue?de74","webpack:///./src/components/z42opt-palette.vue","webpack:///./src/components/z42opt-container.vue?15b0","webpack:///src/components/z42opt-container.vue","webpack:///./src/components/z42opt-container.vue?7357","webpack:///./src/components/z42opt-container.vue","webpack:///./src/components/optionsDescriptorPalette.js","webpack:///./src/components/z42opt-color.vue?9bac","webpack:///src/components/z42opt-color.vue","webpack:///./src/components/z42opt-color.vue?0e7c","webpack:///./src/components/z42opt-color.vue","webpack:///./src/components/optionsUtils.js","webpack:///./src/components/z42opt-dialog.vue?4c63","webpack:///src/components/z42opt-dialog.vue","webpack:///./src/components/z42opt-dialog.vue?74a7","webpack:///./src/components/z42opt-dialog.vue","webpack:///./src/components/z42opt-select.vue?5950","webpack:///src/components/z42opt-select.vue","webpack:///./src/components/z42opt-select.vue?250e","webpack:///./src/components/z42opt-select.vue","webpack:///./src/plugins/bootstrap-vue.js","webpack:///./src/registerOptComp.js","webpack:///./src/App.vue?cdc8","webpack:///./src/plasmaOptions.js","webpack:///./src/components/glUtils.js","webpack:///./src/components/glColor.js","webpack:///./src/components/glPlasmaVertex.glsl","webpack:///./src/components/glPlasmaFrag.glsl","webpack:///./src/components/glPlasma.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/z42opt-range.vue?22dc","webpack:///src/components/z42opt-range.vue","webpack:///./src/components/z42opt-range.vue?786e","webpack:///./src/components/z42opt-range.vue","webpack:///./src/components sync nonrecursive z42opt.*\\.vue$","webpack:///./src/components/noiseGen.js","webpack:///./src/components/fractalNoise.js","webpack:///./src/components/color.js","webpack:///./src/components/optionsDescriptor.js","webpack:///./src/components/easing.js","webpack:///./src/components/z42opt-tabs.vue?3f70","webpack:///src/components/z42opt-tabs.vue","webpack:///./src/components/z42opt-tabs.vue?a04a","webpack:///./src/components/z42opt-tabs.vue"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","disabled","on","$event","$emit","_v","_s","optDesc","$attrs","title","staticRenderFns","component","IntOpt","Math","trunc","toString","parseInt","isNaN","$parseError","defaultVal","clampOptional","ceil","min","max","displayFactor","displayUnit","z42opt","FloatOpt","floatToStringCompact","maxDecimals","parseFloat","Number","toFixed","DurationOpt","indexOf","isSeconds","BoolOpt","valueLCase","toLowerCase","EnumOpt","String","entries","values","enumVal","enumInfo","shortKey","ColorOpt","tinycolor","toHex","color","isValid","toRgb","charAt","substring","label","labelFor","easeFunCanvasId","gradientCanvasId","selectedHandleIndex","selectedPaletteItemId","selectedPaletteItem","segment","selectedPaletteItemView","onPaletteAttributeInput","_e","makePaletteValid","sortPaletteClone","palettePositions","drawPaletteDiagram","fun","luminance","_l","optView","basePath","resolveOptDesc","opt","isAttrTrue","node","$component","childId","path","tag","resolveValue","onModified","position","z42optVal","g","b","a","easeFun","easeFunctions","defaultEaseFunction","isNoisy","noise","frequency","depends","options","octaves","gain","enabled","lacunarity","amplitude","seed","z42optUtil","item","$serialize","pos","noiseRes","desc","noiseShortKeyMap","split","itemStr","itemValues","$deserialize","noiseValues","nv","valueStr","noiseKey","console","error","functionName","z42easing","palette","map","res","_","cloneDeep","$resolveEaseFunction","hexValue","mergeDefaultsWithUrlParams","optionsDescriptor","urlParams","defaults","setDefaultOptions","log","JSON","parse","stringify","optionsFromUrlParams","defaultValues","descriptor","resultPath","Error","childDescriptor","childPath","joinPath","validateUniqueShortKeys","shortKeyToPath","createShortKeyToPathMap","par","URLSearchParams","urlValue","parsedValue","optionsToUrlParams","createUrlParams","separator","createPermalink","optionsData","url","baseUrl","shortKeyMap","Map","validateShortKeysRecursively","shortKeyLCase","has","set","rootDescriptor","serialize","append","onShow","onHide","moreInfoLinkUrl","moreInfoLinkText","staticStyle","permaLinkUrl","optData","tabIndex","Vue","use","BootstrapVue","requireComponent","require","keys","forEach","fileName","componentConfig","componentName","pop","replace","default","directives","rawName","modifiers","info","paletteEaseFunctions","linear","inQuad","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inQuart","outQuart","inOutQuart","inQuint","outQuint","inOutQuint","inSine","outSine","inOutSine","inOutSine2_3","inOutSine2_5","inOutSine2_9","inOutSine2_13","inExpo","outExpo","inOutExpo","inExpo2","outExpo2","inOutExpo2","inCirc","outCirc","inOutCirc","inBounce","outBounce","inOutBounce","noiseFunctions3D","Perlin3D","SimplexPerlin3D","Value3D","Cellular3D","warpFunctions","warpRegular","warpPolar","warpVortex","warpVortexInverse","noiseFunction","isScale","scaleNormalPos","angle","isClamp","warp","isEnabled","transformFunction","rotation","warp2","isGrayScale","isCustom","easeFunctionBgToFg","easeFunctionFgToBg","saturation","brightness","bgColor","customPalette","z42PaletteOpt","isCustomPaletteAnimated","noiseAnim","noiseSpeed","isSlow","turbulence","warpAnim","warpAnim2","paletteAnim","isRotaEnabled","rotaSpeed","transitionDelay","transitionDuration","showFps","optionsView","groups","noiseTab","warpingTab","warpingTab2","paletteTab","animTab","infoTab","setBufferRectangle","gl","x","y","width","height","usage","STATIC_DRAW","x1","x2","y1","y2","bufferData","ARRAY_BUFFER","Float32Array","setPaletteTexture","textureWidth","paletteDef","isRepeat","paletteBuffer","ArrayBuffer","paletteUint32","Uint32Array","z42color","mipLevel","paletteUint8","Uint8Array","texImage2D","TEXTURE_2D","RGBA","UNSIGNED_BYTE","scaledTextureWidth","scaledPaletteBuffer","scaledPaletteUint32","iDst","iSrc","c1","samplePalette","c2","c3","roundColor","mulColor","sumColors","texParameteri","TEXTURE_WRAP_S","REPEAT","CLAMP_TO_EDGE","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","TEXTURE_MAG_FILTER","LINEAR","splitColor","colors","f","round","pal","index","PlasmaFractal2D","params","_noiseSeed","noiseSeed","_warpSeed","warpSeed","_warpSeed2","warpSeed2","_options","_startTime","performance","now","_initPalettes","colorSeed","_initCanvasGl","canvas","resize","_paletteRndColorCount","_startPalette","_nextPalette","_currentPalette","_grayScalePalette","_paletteCurrentFirstHue","_colorRnd","MersenneTwister","_generatePalette","random","_isPaletteTransition","_paletteStartTime","_currentPaletteIsRepeat","_canvas","_gl","getContext","disable","BLEND","DEPTH_TEST","depthMask","FALSE","stencilMask","_positionBuffer","createBuffer","_texCoordBuffer","_paletteTexture","createTexture","_paletteTextureSize","getParameter","MAX_TEXTURE_SIZE","_rebuildShaders","mapToPaletteFun","fragShaderSrcTransformed","injectDefines","fragShaderSrc","BASE_NOISE_FUN","NOISE_CLAMP_FUN","MAP_TO_PALETTE_FUN","WARP_NOISE_FUN","WARP_TRANSFORM_FUN","WARP2_NOISE_FUN","WARP2_TRANSFORM_FUN","_shader","update","vertexShaderSrc","createShader","_updateStaticShaderData","_updateShaderVar_coords","_updateShaderVar_scale","_vao","deleteVertexArray","createVertexArray","bindVertexArray","bindBuffer","z42glu","attributes","a_position","pointer","FLOAT","a_texCoord","uniforms","u_scale","force","viewport","time","setShaderArgs_noise","setShaderArgs_warp","setShaderArgs_palette","clearColor","clear","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","uniformName","warpOpt","warpAnimOpt","uf","basic","octavesFract","PI","anim","sizeFactor","u_paletteOffset","u_paletteTexture","paletteToUse","_animatePalette","activeTexture","TEXTURE0","bindTexture","paletteIsRepeat","z42glcolor","curTime","paletteDuration","alpha","firstHue","_generatePaletteCustom","_generatePaletteRandom","hsv","toHsv","h","colorHsv","v","bgToFgFunction","fgToBgFunction","subRange","subRangeHalf","colorRGBA","needRebuildShaders","wireUpEventListeners","animate","resizePlasmaToWindowSize","toggleFullscreen","updateOptionsButtonVisibility","onKeyDown","config","productionTip","App","$mount","displayValue","webpackContext","req","webpackContextResolve","e","code","resolve","Grad","z","fade","lerp","grad3","F2","sqrt","G2","F3","G3","_perm","Array","_gradP","xin","yin","n0","n1","n2","i1","j1","floor","x0","y0","gi0","gi1","gi2","t0","dot2","t1","t2","zin","n3","k1","i2","j2","k2","k","z0","z1","z2","x3","y3","z3","gi3","dot3","t3","X","Y","n00","n01","n10","n11","u","Z","n000","n001","n010","n011","n100","n101","n110","n111","w","_seed","_noiseGenes","perlin2","rnd","octaveSeed","gen","z42noiseGen","renderPaletteSegment","outPaletteUint32","startIndex","count","startColor","endColor","easeFunction","mod","ec","nc","renderPaletteDef","inputPaletteDef","sortedPalette","sort","iEnd","start","end","startPos","endPos","endIndex","dist","noiseFun","rgb","makeNoiseFun","noiseOpt","noiseGen","FractalNoiseGen","adjustRgbLightness","blendPaletteDef","inFirstPalette","inSecondPalette","alphaFloat","assert","blendColorRGBA","nextGoldenRatioColorRGBA","hsva","golden_ratio","clamp","doubleLerp","end1","alpha1","end2","alpha2","rgbToHslLightness","setRgbLightness","lightness","baseLightness","relativeLightness","Node","nodes","configurable","writable","assign","Option","$defaultComponent","cos","sin","pow","inElastic","abs","asin","outElastic","inOutElastic","inBack","undefined","outBack","inOutBack","group","contentComponentName"],"mappings":"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","file":"js/app-legacy.287618d5.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/plasmafractal-gl/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',[_c('b-form-checkbox',{staticClass:\"z42opt-check\",attrs:{\"id\":_vm.id,\"checked\":_vm.value,\"disabled\":_vm.disabled},on:{\"change\":function($event){return _vm.$emit( 'input', $event )}}},[_vm._v(\" \"+_vm._s(_vm.optDesc.$attrs.title)+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOption UI components. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<b-form-group>\r\n\t\t<b-form-checkbox\r\n\t\t\t:id=\"id\"\r\n\t\t\t:checked=\"value\"\r\n\t\t\t:disabled=\"disabled\"\r\n\t\t\tclass=\"z42opt-check\"\r\n\t\t\t@change=\"$emit( 'input', $event )\"\r\n\t\t\t>\r\n\t\t\t{{ optDesc.$attrs.title }}\r\n\t\t</b-form-checkbox>\r\n\t</b-form-group>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport * as z42opt from \"./optionsDescriptor.js\"\r\n\r\nexport default {\r\n\tname: \"z42opt-check\",\r\n\tinheritAttrs: false,\r\n\r\n\tprops: { \r\n\t\tid:       { type: String, required: true },\r\n\t\tvalue:    { required: true },\r\n\t\toptDesc:  { type: z42opt.Option, required: true }, \r\n\t\tdisabled: { type: Boolean, required: false, default: false },\r\n\t},\r\n\tcreated() {\r\n\t\t//console.log(\"z42opt-check.optDesc:\", this.optDesc);\r\n\t},\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-check.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-check.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-check.vue?vue&type=template&id=17f00265&\"\nimport script from \"./z42opt-check.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-check.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*\r\nOption descriptor classes. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n\r\nimport * as z42opt from \"./optionsDescriptor.js\";\r\nimport * as tinycolor from \"tinycolor2\"\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nclass IntOpt extends z42opt.Option {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\t}\r\n\r\n\t$serialize( value ) { \r\n\t\treturn Math.trunc( value ).toString(); \r\n\t}\r\n\r\n\t$deserialize( value ) {\r\n\t\tvalue = parseInt( value, 10 );\r\n\t\tif( isNaN( value ) ) {\r\n\t\t\tthis.$parseError( value );\r\n\t\t\treturn this.$attrs.defaultVal;\r\n\t\t}\r\n\t\treturn clampOptional( Math.ceil( value ), this.$attrs.min, this.$attrs.max );\r\n\t}\r\n\r\n\t$displayValue( value ) {\r\n\t\tif( this.$attrs.displayFactor != null )\r\n\t\t\tvalue *= this.$attrs.displayFactor;\r\n\r\n\t\tlet result = Math.trunc( value ).toString();\r\n\r\n\t\tif( this.$attrs.displayUnit != null )\r\n\t\t\tresult += \" \" + this.$attrs.displayUnit;\r\n\r\n\t\treturn result;\r\n\t}\t\r\n\r\n\tget $defaultComponent() { return \"z42opt-range\"; }\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nclass FloatOpt extends z42opt.Option {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\t}\r\n\r\n\t$serialize( value ) { \r\n\t\treturn floatToStringCompact( value, this.$attrs.maxDecimals );\r\n\t}\r\n\r\n\t$deserialize( value ) {\r\n\t\tvalue = parseFloat( value );\r\n\t\tif( isNaN( value ) ) {\r\n\t\t\tthis.$parseError( value );\r\n\t\t\treturn this.$attrs.defaultVal;\r\n\t\t}\r\n\t\treturn clampOptional( value, this.$attrs.min, this.$attrs.max ); \t\t\t\r\n\t}\r\n\r\n\t$displayValue( value ) {\r\n\t\tif( this.$attrs.displayFactor != null )\r\n\t\t\tvalue *= this.$attrs.displayFactor;\r\n\r\n\t\tif( this.$attrs.maxDecimals != null )\r\n\t\t\tvalue = Number( value.toFixed( this.$attrs.maxDecimals ) );\r\n\r\n\t\tlet result = value.toString();\r\n\r\n\t\tif( this.$attrs.displayUnit != null )\r\n\t\t\tresult += \" \" + this.$attrs.displayUnit;\r\n\r\n\t\treturn result;\r\n\t}\t\r\n\r\n\tget $defaultComponent() { return \"z42opt-range\"; }\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nclass DurationOpt extends FloatOpt {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\t}\r\n\r\n\t$serialize( value ) { \r\n\t\tlet result = floatToStringCompact( value, this.$attrs.maxDecimals );\r\n\r\n\t\t// Make sure there is always a decimal separator to indicate seconds (previously we used ms)\r\n\t\tif( result.indexOf( \".\" ) < 0 && value !== 0 )\r\n\t\t\tresult += \".\"; \r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t$deserialize( value ) {\r\n\t\tconst isSeconds = value.indexOf( \".\" ) >= 0;\r\n\r\n\t\tvalue = parseFloat( value );\r\n\t\tif( isNaN( value ) ) {\r\n\t\t\tthis.$parseError( value );\r\n\t\t\treturn this.$attrs.defaultVal;\r\n\t\t}\r\n\r\n\t\tif( ! isSeconds ) {\r\n\t\t\t// A number without decimal separator is interpreted as milliseconds.\r\n\t\t\tvalue /= 1000;\r\n\t\t}\r\n\r\n\t\treturn clampOptional( value, this.$attrs.min, this.$attrs.max ); \t\t\t\r\n\t}\r\n\r\n\tget $defaultComponent() { return \"z42opt-range\"; }\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nclass BoolOpt extends z42opt.Option {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\t}\r\n\r\n\t$serialize( value ) {\r\n\t\treturn value ? \"1\" : \"0\";\t\t\t\r\n\t}\r\n\r\n\t$deserialize( value ) {\r\n\t\tconst valueLCase = value.toString().toLowerCase();\r\n\t\treturn ( valueLCase === \"true\" || valueLCase === \"1\" );\r\n\t}\r\n\r\n\tget $defaultComponent() { return \"z42opt-check\"; }\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nclass EnumOpt extends z42opt.Option {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\t}\r\n\r\n\t$serialize( value ) {\r\n\t\tvalue = String( value ).toLowerCase();\r\n\r\n\t\tfor( const [ enumVal, enumInfo ] of Object.entries( this.$attrs.values ) ) {\r\n\t\t\tif( enumInfo.shortKey.toLowerCase() === value ){\r\n\t\t\t\treturn enumInfo.shortKey;\r\n\t\t\t}\r\n\t\t\tif( enumVal.toLowerCase() === value ) {\r\n\t\t\t\treturn enumInfo.shortKey;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t$deserialize( value ) {\r\n\t\tvalue = String( value ).toLowerCase();\r\n\r\n\t\tfor( const [ enumVal, enumInfo ] of Object.entries( this.$attrs.values ) ) {\r\n\t\t\tif( enumInfo.shortKey.toLowerCase() === value ){\r\n\t\t\t\treturn enumVal;\r\n\t\t\t}\r\n\t\t\tif( enumVal.toLowerCase() === value ) {\r\n\t\t\t\treturn enumVal;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.$parseError( value );\r\n\t\treturn this.$attrs.defaultVal;\r\n\t}\r\n\r\n\tget $defaultComponent() { return \"z42opt-select\"; }\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nclass ColorOpt extends z42opt.Option {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\t}\r\n\r\n\t$serialize( value ) {\r\n\t\treturn tinycolor( value ).toHex();\r\n\t}\r\n\r\n\t$deserialize( value ) {\r\n\t\tconst color = tinycolor( value );\r\n\t\tif( ! color.isValid() )\t{\r\n\t\t\tthis.$parseError( value );\r\n\t\t\treturn this.$attrs.defaultVal;\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn color.toRgb(); // keep it pure data to simplify merging\t\t\t\r\n\t}\r\n\r\n\tget $defaultComponent() { return \"z42opt-color\"; }\r\n}\t\r\n\r\n//================================================================================================\r\n// Utility functions\r\n\r\nfunction clampOptional( value, min = null, max = null ) {\r\n\tif( min && value < min ) return min;\r\n\tif( max && value > max ) return max;\r\n\treturn value;\r\n}\t\t\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nfunction floatToStringCompact( value, maxDecimals = null ) {\r\n\tif( maxDecimals != null ) {\r\n\t\t// convert to fixed, then remove trailing zeros by converting back to Number\r\n\t\tvalue = Number( value.toFixed( maxDecimals ) );\r\n\t}\r\n\tvalue = value.toString();\r\n\t// remove unneeded leading zero (e. g. \"0.5\" -> \".5\" )\r\n\tif( value.charAt( 0 ) == \"0\" && value.charAt( 1 ) == \".\" )\r\n\t\treturn value.substring( 1 );\r\n\t// remove unneeded leading zero after \"-\" (e. g. \"-0.5\" -> \"-.5\" )\r\n\tif( value.charAt( 0 ) == \"-\" && value.charAt( 1 ) == \"0\" && value.charAt( 2 ) == \".\" )\r\n\t\treturn \"-\" + value.substring( 2 );\r\n\treturn value;\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nexport { Node, Option } from \"./optionsDescriptor.js\"\r\n\r\nexport { \r\n\tclampOptional,\r\n\tfloatToStringCompact,\r\n\tIntOpt,\r\n\tFloatOpt,\r\n\tDurationOpt,\r\n\tBoolOpt,\r\n\tEnumOpt,\r\n\tColorOpt,\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{attrs:{\"label\":_vm.label,\"label-for\":_vm.labelFor,\"disabled\":_vm.disabled}},[_c('canvas',{staticClass:\"z42opt-palette-easefun-canvas\",attrs:{\"id\":_vm.easeFunCanvasId}}),_c('canvas',{staticClass:\"z42opt-palette-gradient-canvas\",attrs:{\"id\":_vm.gradientCanvasId}}),_c('div',{staticClass:\"z42opt-palette-slider\",attrs:{\"id\":_vm.id,\"disabled\":_vm.disabled}}),(_vm.selectedHandleIndex !== null)?_c('z42opt-container',{key:_vm.selectedPaletteItemId,staticClass:\"container px-0\",attrs:{\"id\":_vm.selectedPaletteItemId,\"optData\":_vm.selectedPaletteItem,\"optDesc\":_vm.optDesc.segment,\"optView\":_vm.selectedPaletteItemView},on:{\"opt-modified\":function($event){return _vm.onPaletteAttributeInput( $event )}}}):_vm._e(),(_vm.selectedHandleIndex === null)?_c('div',{staticClass:\"text-info\"},[_c('p',[_vm._v(\" Click handle to \"),_c('b',[_vm._v(\"edit\")]),_vm._v(\" properties.\"),_c('br'),_vm._v(\" Curve displays luminance. Change ease functions to modify curve shape. \")]),_c('p',[_vm._v(\" Double-click to \"),_c('b',[_vm._v(\"add\")]),_vm._v(\" handle.\"),_c('br'),_vm._v(\" Drag up/down or shift+click to \"),_c('b',[_vm._v(\"remove\")]),_vm._v(\" handle. \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOption UI components. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nPalette editor component\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<b-form-group\r\n\t\t:label=\"label\"\r\n\t\t:label-for=\"labelFor\"\r\n\t\t:disabled=\"disabled\"\r\n\t\t>\r\n\t\t<!-- Show the curves of the ease functions -->\r\n\t\t<canvas \r\n\t\t\t:id=\"easeFunCanvasId\"\r\n\t\t\tclass=\"z42opt-palette-easefun-canvas\"\r\n\t\t\t>\r\n\t\t</canvas>\r\n\r\n\t\t<!-- Show the rendered palette -->\r\n\t\t<canvas \r\n\t\t\t:id=\"gradientCanvasId\"\r\n\t\t\tclass=\"z42opt-palette-gradient-canvas\"\r\n\t\t\t>\r\n\t\t</canvas>\r\n\r\n\t\t<!-- Mounting point for noUiSlider -->\r\n\t\t<div \r\n\t\t\t:id=\"id\"\r\n\t\t\t:disabled=\"disabled\"\r\n\t\t\tclass=\"z42opt-palette-slider\"\r\n\t\t\t>\r\n\t\t</div>\r\n\r\n\t\t<!-- Components for selected palette item -->\r\n\t\t<z42opt-container\r\n\t\t\tv-if=\"selectedHandleIndex !== null\"\r\n\t\t\t:id=\"selectedPaletteItemId\"\r\n\t\t\t:key=\"selectedPaletteItemId\"\r\n\t\t\t:optData=\"selectedPaletteItem\"\r\n\t\t\t:optDesc=\"optDesc.segment\"\r\n\t\t\t:optView=\"selectedPaletteItemView\"\r\n\t\t\tclass=\"container px-0\"\r\n\t\t\t@opt-modified=\"onPaletteAttributeInput( $event )\"\t\r\n\t\t/>\r\n\t\t\r\n\t\t<!-- Help text -->\r\n\t\t<div v-if=\"selectedHandleIndex === null\"\r\n\t\t\tclass=\"text-info\"\r\n\t\t\t>\r\n\t\t\t<p>\r\n\t\t\t\tClick handle to <b>edit</b> properties.<br>\r\n\t\t\t\tCurve displays luminance. Change ease functions to modify curve shape.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tDouble-click to <b>add</b> handle.<br>\r\n\t\t\t\tDrag up/down or shift+click to <b>remove</b> handle.\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</b-form-group>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport z42PaletteOpt from \"./optionsDescriptorPalette.js\";\r\nimport * as z42optUtil from \"./optionsUtils.js\";\r\nimport * as z42color from \"./color.js\";\r\nimport noUiSlider from \"nouislider\";\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\n\r\n// Non-module dependencies (include via <script> element):\r\n// \"color.js\" - for drawing palette\r\n\r\n// Pattern for private class members: https://stackoverflow.com/a/33533611/7571258\r\nconst privates = new WeakMap();\r\n\r\n// When a slider handle is moved up or down more than this distance, it will be removed.\r\nconst mouseThresholdToRemoveHandle = 50;\r\n\r\nconst cssClassHandleToRemove = \"z42opt-palette-handle-to-remove\";\r\nconst cssClassHandleSelected = \"z42opt-palette-handle-selected\";\r\n\r\nexport default {\r\n\tname: \"z42opt-palette\",\r\n\tinheritAttrs: false,\r\n\r\n\tprops: { \r\n\t\tid:       { type: String, required: true },\r\n\t\tvalue:    { type: Array, required: true },\r\n\t\toptDesc:  { type: z42PaletteOpt, required: true }, \r\n\t\tdisabled: { type: Boolean, required: false, default: false },\r\n\t},\t\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tselectedHandleIndex: null,\r\n\t\t\tselectedPaletteItem: null,\r\n\t\t\tselectedPaletteItemView: {\r\n\t\t\t\toptions: [ \"\" ]   // <- means \"all children\"\r\n\t\t\t},\r\n\t\t}\r\n\t},\t\r\n\tmounted() {\r\n\t\t// Make a deep clone so we will be able to differentiate between changes of palette originating\r\n\t\t// from the outside and from the inside of this component.\r\n\r\n\t\tconst palette = makePaletteValid( this.value, this.optDesc );\r\n\r\n\t\tconst resizeObserver = new ResizeObserver( this.onCanvasResize );\r\n\t\t\r\n\t\t// Define private variables of this component (non-reactive!)\r\n\t\tprivates.set( this, {\r\n\t\t\tpalette: palette,\r\n\t\t\tcurrentMousePos: null,\r\n\t\t\tslideStartMousePos: null,\r\n\t\t\tslidingHandleElement: null,\r\n\t\t\tresizeObserver: resizeObserver,\r\n\t\t});\r\n\r\n\t\tlet sliderConfig = {\r\n\t\t\tstart: palettePositions( palette ),\r\n\t\t\trange: { min: 0, max: 1 },\r\n\t\t\tstep: 0.001,\r\n\t\t\tbehaviour: \"unconstrained\",\r\n\t\t};\r\n\r\n\t\tif( this.optDesc.$attrs.step != null ){\r\n\t\t\tsliderConfig.step = this.optDesc.$attrs.step;\r\n\t\t}\r\n\r\n\t\tthis.recreateSlider( sliderConfig );\r\n\r\n\t\tthis.updateCanvas();\r\n\r\n\t\tresizeObserver.observe( document.getElementById( this.gradientCanvasId ) );\r\n\t\tresizeObserver.observe( document.getElementById( this.easeFunCanvasId ) );\r\n\r\n\t\t// If initial palette was not valid, send \"fixed\" palette back to parent.\r\n\t\tif( ! _.isEqual( palette, this.value ) ){\r\n\t\t\tthis.emitPaletteInputEvent();\r\n\t\t}\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tconst priv = privates.get( this );\r\n\r\n\t\t// Remove global event listener in any case.\r\n\t\twindow.removeEventListener( \"mousemove\", this.onSlideMouseMove );\r\n\t\twindow.removeEventListener( \"touchmove\", this.onSlideTouchMove );\r\n\r\n\t\tpriv.resizeObserver.disconnect();\r\n\t},\r\n\tcomputed: {\r\n\t\teaseFunCanvasId()     { return this.id + \"#easeFunCanvas\"; },\r\n\t\tgradientCanvasId()    { return this.id + \"#gradientCanvas\"; },\r\n\t\tselectedPaletteItemId()    { return this.id + \"#segmentOptions\"; },\r\n\t\tlabel()               { return this.optDesc.$attrs.title ? this.optDesc.$attrs.title + \":\" : undefined; },\r\n\t\tlabelFor()            { return this.optDesc.$attrs.title ? this.id : undefined; },\r\n\t},\r\n\tmethods: {\r\n\t\t// Get the DOM element of the slider.\r\n\t\tgetSliderElement() {\r\n\t\t\treturn document.getElementById( this.id );\t\t\t\r\n\t\t},\r\n\r\n\t\tgetSliderWidth() {\r\n\t\t\treturn getSliderElement().offsetWidth;\r\n\t\t},\r\n\r\n\t\tgetEaseFunCanvasHeight() { \r\n\t\t\treturn document.getElementById( this.easeFunCanvasId ).offsetHeight;\r\n\t\t},\r\n\r\n\t\t// (Re-)create slider and (re-) attach event listeners.\r\n\t\trecreateSlider( options ) {\r\n\t\t\tconst sliderElem = this.getSliderElement();\r\n\r\n\t\t\tif( sliderElem.noUiSlider ) {\r\n\t\t\t\tsliderElem.noUiSlider.destroy();\r\n\t\t\t}\r\n\r\n\t\t\tnoUiSlider.create( sliderElem, options );\r\n\t\r\n\t\t\t// Using arrow function forwarder so onSlide() gets 'this' context of component instead of noUiSlider.\r\n\t\t\tsliderElem.noUiSlider.on( \"start\", ( ...args ) => this.onSlideStart( ...args ) );\r\n\t\t\tsliderElem.noUiSlider.on( \"slide\", ( ...args ) => this.onSlide( ...args ) );\r\n\t\t\tsliderElem.noUiSlider.on( \"end\"  , ( ...args ) => this.onSlideEnd( ...args ) );\r\n\r\n\t\t\t// Hook double-click on the slider bar (adds handle).\r\n\t\t\tfor( const elem of sliderElem.getElementsByClassName( \"noUi-connects\" ) ) {\r\n\t\t\t\telem.addEventListener( \"dblclick\", this.onConnectsDblClick );\r\n\t\t\t}\r\n\t\t\r\n\t\t\tfor( const elem of sliderElem.getElementsByClassName( \"noUi-handle\" ) ) {\r\n\t\t\t\t// Hook shift-click on the handles (removes handle).\r\n\t\t\t\telem.addEventListener( \"click\", this.onHandleClick );\r\n\t\r\n\t\t\t\t// Hook focus event to know about \"selected\" handle.\r\n\t\t\t\telem.addEventListener( \"focus\", this.onHandleFocus );\r\n\t\t\t}\t\r\n\t\t},\r\n\r\n\t\t// Called on slider position changes.\r\n\t\t//   values:     Current slider values formatted (array of String)\r\n\t\t//   handle:     Handle that caused the event (Number)\r\n\t\t//   valuesRaw:  Slider values without formatting (array of Number)\r\n\t\t//   tap:        Event was caused by the user tapping the slider (Boolean)\r\n\t\t//   handleOffs: Left offset of the handles (array of Number)\r\n\r\n\t\tonSlide( values, handleIndex, valuesRaw, tap, handleOffs ) {\r\n\r\n\t\t\tconst palette = privates.get( this ).palette;\r\n\t\t\tconst positions = palettePositions( palette );\r\n\r\n\t\t\t// Make sure we only react to actually changed values. The noUiSlider emits too many events \r\n\t\t\t// even if values haven't changed.\r\n        \tif( ! _.isEqual( positions, valuesRaw ) ) {\r\n\r\n\t\t\t\t// Update the new positions of the slider handles in the cloned array.\r\n\t\t\t\tfor( const i in valuesRaw ){\r\n\t\t\t\t\tpalette[ i ].pos = valuesRaw[ i ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.updateCanvas();\r\n\r\n\t\t\t\t// According to Vue.js rules, this.value must not be modified directly.\r\n\t\t\t\t// Instead emit changes as \"input\" event to make the component compatible with v-model.\r\n\t\t\t\tthis.emitPaletteInputEvent();\r\n\t\t\t }\r\n\t\t},\r\n\r\n\t\t// Called on double click at slider bar. Adds a new handle at clicked position.\r\n\t\tonConnectsDblClick( event ) {\r\n\t\t\tlet palettePos = 0;\r\n\t\t\tif( event.target.clientWidth > 0 )\r\n\t\t\t\tpalettePos = event.offsetX / event.target.clientWidth;\r\n\t\t\tpalettePos = _.clamp( palettePos, 0, 1 );  // just for sure\r\n\t\t\t\r\n\t\t\t// Clone required so setPaletteFromOutside() notices change in handle count.\r\n\t\t\tlet newPalette = _.cloneDeep( privates.get( this ).palette );\r\n\r\n\t\t\tlet newPaletteItem = { pos: palettePos };\r\n\t\t\tz42optUtil.setDefaultOptions( newPaletteItem, this.optDesc.segment );\r\n\t\t\tnewPalette.push( newPaletteItem );\r\n\r\n\t\t\tthis.setPaletteFromOutside( newPalette );\r\n\r\n\t\t\t// Select newly added handle.\r\n\t\t\tthis.setSelectedHandle( newPalette.length - 1 );\r\n\r\n\t\t\tthis.emitPaletteInputEvent();\r\n\t\t},\r\n\r\n\t\t// Called on click at a slider handle. If shift key is pressed, remove handle.\r\n\t\tonHandleClick( event ) {\r\n\t\t\tif( event.shiftKey ) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tconst handleIndex = this.handleIndexFromElement( event.target );\r\n\t\t\t\tif( handleIndex >= 0 ) {\r\n\t\t\t\t\tthis.removeHandleAtIndex( handleIndex );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonSlideStart( values, handleIndex, valuesRaw, tap, handleOffs ){\r\n\t\t\tconst priv = privates.get( this );\r\n\t\t\tpriv.slideStartMousePos = null;\r\n\t\t\tpriv.slidingHandleElement = this.handleElements()[ handleIndex ];\r\n\t\t\t\r\n\t\t\t// Register global mouse/touch move listener to capture movement even outside of handle element\r\n\t\t\t// which is needed to detect dragging up/down.\r\n\t\t\twindow.addEventListener( \"mousemove\", this.onSlideMouseMove );\r\n\t\t\twindow.addEventListener( \"touchmove\", this.onSlideTouchMove );\r\n\t\t},\r\n\r\n\t\tonSlideMouseMove( event ) {\r\n\t\t\tthis.onSlideMouseTouchMove({ x: event.screenX, y: event.screenY });\r\n\t\t},\r\n\t\t\r\n\t\tonSlideTouchMove( event ) {\r\n\t\t\tif( event.changedTouches.length > 0 ){\r\n\t\t\t\tthis.onSlideMouseTouchMove({ x: event.changedTouches[ 0 ].screenX, y: event.changedTouches[ 0 ].screenY });\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonSlideMouseTouchMove( pos ) {\r\n\t\t\tconst priv = privates.get( this );\r\n\r\n\t\t\tpriv.currentMousePos = _.clone( pos );\r\n\t\t\tif( ! priv.slideStartMousePos ){\r\n\t\t\t\tpriv.slideStartMousePos = _.clone( pos );\r\n\t\t\t}\r\n\r\n\t\t\tconst distY = Math.abs( pos.y - priv.slideStartMousePos.y ); \r\n\r\n\t\t\tif( distY > mouseThresholdToRemoveHandle && priv.palette.length > 1 ) {\r\n\t\t\t\t// Visually indicate \"to be deleted\" state of handle.\r\n\t\t\t\tpriv.slidingHandleElement.classList.add( cssClassHandleToRemove );\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Removal visual \"to be deleted\" state of handle.\r\n\t\t\t\tpriv.slidingHandleElement.classList.remove( cssClassHandleToRemove );\t\t\t\t\r\n\t\t\t}\r\n\t\t},\t\r\n\r\n\t\tonSlideEnd( values, handleIndex, valuesRaw, tap, handleOffs ){\r\n\t\t\tconst priv = privates.get( this );\r\n\r\n\t\t\t// Remove CSS class that shows \"to be deleted\" state of handle.\r\n\t\t\tpriv.slidingHandleElement.classList.remove( cssClassHandleToRemove );\t\t\t\t\r\n\r\n\t\t\tif( priv.slideStartMousePos ){\r\n\t\t\t\t// Remove slider if mouse was moved a certain distance vertically.\r\n\t\t\t\tconst distY = Math.abs( priv.currentMousePos.y - priv.slideStartMousePos.y ); \r\n\t\t\t\tif( distY > mouseThresholdToRemoveHandle ) {\r\n\t\t\t\t\tthis.removeHandleAtIndex( handleIndex );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Remove global mouse/touch move listener that was registered by onSlideStart().\r\n\t\t\twindow.removeEventListener( \"mousemove\", this.onSlideMouseMove );\r\n\t\t\twindow.removeEventListener( \"touchmove\", this.onSlideTouchMove );\r\n\t\t},\r\n\r\n\t\t// Called on click at a slider handle. If shift key is pressed, remove handle.\r\n\t\tonHandleFocus( event ) {\r\n\t\t\tconst handleIndex = this.handleIndexFromElement( event.target );\r\n\t\t\tif( handleIndex >= 0 ) {\r\n\r\n\t\t\t\tconst handleElems = this.handleElements();\r\n\r\n\t\t\t\tconst focusedHandleElem = handleElems[ handleIndex ];\r\n\t\t\t\tif( focusedHandleElem ){\r\n\t\t\t\t\t// Highlight handle even if focus is on a non-handle element.\r\n\t\t\t\t\tfocusedHandleElem.classList.add( cssClassHandleSelected );\r\n\t\t\t\t}\r\n\t\t\t\tif( this.selectedHandleIndex != null ){\r\n\t\t\t\t\tconst selectedHandleElem = handleElems[ this.selectedHandleIndex ];\r\n\t\t\t\t\tif( selectedHandleElem ){\r\n\t\t\t\t\t\tselectedHandleElem.classList.remove( cssClassHandleSelected );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.selectedHandleIndex = handleIndex;\r\n\r\n\t\t\t\tconst palette = privates.get( this ).palette;\r\n\t\t\t\tthis.selectedPaletteItem = _.cloneDeep( palette[ handleIndex ] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Called when a value in the input components for the selected handle has changed. \r\n\t\tonPaletteAttributeInput( event ) {\r\n\t\t\tif( this.selectedHandleIndex != null ) {\r\n\t\t\t\tconst oldValue = _.get( this.selectedPaletteItem, event.path );\r\n\r\n\t\t\t\tif( ! _.isEqual( oldValue, event.value ) ){\r\n\t\t\t\t\t_.set( this.selectedPaletteItem, event.path, _.cloneDeep( event.value ) );\r\n\r\n\t\t\t\t\tconst palette = privates.get( this ).palette;\r\n\t\t\t\t\t_.set( palette[ this.selectedHandleIndex ], event.path, _.cloneDeep( event.value ) );\r\n\r\n\t\t\t\t\tthis.updateCanvas();\r\n\t\t\t\t\tthis.emitPaletteInputEvent();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Resize canvas internal size to actual display size of HTML element to avoid stretching of canvas image.\r\n\t\tonCanvasResize( entries ) {\r\n\t\t\tfor( const entry of entries ) {\r\n\t\t\t\tconst rect = entry.contentRect;\r\n\r\n\t\t\t\t// Canvas uses physical coordinates, while rect is given in CSS coordinates. \r\n\t\t\t\t// Multiply with DPR to adjust for High-DPI devices and browser zoom.\r\n\t\t\t\tconst scaledWidth  = rect.width  * window.devicePixelRatio;\r\n\t\t\t\tconst scaledHeight = rect.height * window.devicePixelRatio;\r\n\r\n\t\t\t\tif( entry.target.width !== scaledWidth || entry.target.height !== scaledHeight ){\r\n\t\t\t\t\tentry.target.width  = scaledWidth;\r\n\t\t\t\t\tentry.target.height = scaledHeight;\r\n\r\n\t\t\t\t\tthis.updateCanvas({ \r\n\t\t\t\t\t\tisEaseFunCanvas : entry.target.id == this.easeFunCanvasId, \r\n\t\t\t\t\t\tisGradientCanvas: entry.target.id == this.gradientCanvasId, \r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\t\r\n\r\n\t\t// Get array of handle elements\r\n\t\thandleElements() {\r\n\t\t\treturn Array.from( this.getSliderElement().getElementsByClassName( \"noUi-handle\" ) );\r\n\t\t},\r\n\r\n\t\t// Get handle index from child element of handle.\r\n\t\thandleIndexFromElement( childElem ){\r\n\t\t\tconst elems = this.handleElements();\r\n\t\t\treturn elems.findIndex( elem => elem.contains( childElem ) );\r\n\t\t},\r\n\r\n\t\t// Set new palette and update slider positions. Recreate slider if handle count changes.\r\n\t\tsetPaletteFromOutside( newPalette ) {\r\n\r\n\t\t\tconst curPalette = privates.get( this ).palette;\r\n\t\t\tconst newPositions = palettePositions( newPalette );\r\n\r\n\t\t\tconst slider = this.getSliderElement().noUiSlider;\r\n\t\t\t\r\n\t\t\tif( newPalette.length != curPalette.length ){\r\n\t\t\t\t// Need to destroy and re-create slider to update handle count. \r\n\t\t\t\t// https://github.com/leongersen/noUiSlider/issues/892\r\n\r\n\t\t\t\tlet options = slider.options;\r\n\t\t\t\toptions.start = newPositions;\r\n\r\n\t\t\t\tthis.recreateSlider( options );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Only update existing handle positions.\r\n\t\t\t\tslider.set( newPositions );\r\n\t\t\t}\r\n\r\n\t\t\tprivates.get( this ).palette = newPalette;\r\n\r\n\t\t\tthis.updateCanvas();\r\n\t\t},\r\n\r\n\t\t// Remove given slider handle and emit input event.\r\n\t\tremoveHandleAtIndex( handleIndex ) {\r\n\t\t\tconst palette = privates.get( this ).palette;\r\n\t\t\t\t\t\t\r\n\t\t\t// Slider requires at least one handle.\r\n\t\t\tif( palette.length > 1 ) {\r\n\t\t\t\t// Create new palette with handle removed.\r\n\t\t\t\tlet newPalette = _.cloneDeep( palette );\t\t\t\r\n\t\t\t\tnewPalette.splice( handleIndex, 1 );\r\n\r\n\t\t\t\tthis.setPaletteFromOutside( newPalette );\r\n\t\t\t\t\r\n\t\t\t\t// Set focus to next handle\r\n\t\t\t\tthis.setSelectedHandle( ( handleIndex + 1 ) % newPalette.length );\r\n\t\t\t\r\n\t\t\t\tthis.emitPaletteInputEvent();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Set focus to handle by index.\r\n\t\tsetSelectedHandle( handleIndex ) {\r\n\t\t\tconst handleElems = this.handleElements();\r\n\t\t\thandleElems[ handleIndex ].focus();\r\n\t\t},\r\n\r\n\t\t// Send \"input\" event with current palette. Palette will be cloned to prevent receiver\r\n\t\t// from accidentally modifying the current palette.\r\n\t\temitPaletteInputEvent() {\r\n\t\t\tconst palette = privates.get( this ).palette;\r\n\t\t\tthis.$emit( \"input\", _.cloneDeep( palette ) );\r\n\t\t},\r\n\r\n\t\t// Update easeFunCanvas and/or gradientCanvas.\r\n\t\tupdateCanvas( update = { isEaseFunCanvas: true, isGradientCanvas: true } ){\r\n\t\t\tconst palette = privates.get( this ).palette;\r\n\r\n\t\t\t// Resolve ease function names to actual functions.\r\n\t\t\tconst paletteResolved = this.optDesc.$resolvePaletteEaseFunctions( palette );\r\n\r\n\t\t\tif( update.isEaseFunCanvas )\r\n\t\t\t\tthis.updateEaseFunCanvas( paletteResolved );\r\n\t\t\tif( update.isGradientCanvas )\r\n\t\t\t\tthis.updateGradientCanvas( paletteResolved );\r\n\t\t},\r\n\r\n\t\t// Draw a diagram of the palette ease functions into the canvas.\r\n\t\tupdateEaseFunCanvas( palette ){\r\n\r\n\t\t\tconst canvasElem = document.getElementById( this.easeFunCanvasId );\r\n\t\t\tconst width   = canvasElem.width;\r\n\t\t\tconst height  = canvasElem.height;\r\n\r\n\t\t\tif( width === 0 || height === 0 )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tconst ctx = canvasElem.getContext( \"2d\" );\r\n\r\n\t\t\tctx.fillStyle   = \"rgba( 0, 0, 0, 0.3 )\";\r\n\t\t\tctx.strokeStyle = \"rgb( 255, 255, 255 )\";\r\n\t\t\tctx.lineWidth   = window.devicePixelRatio;\r\n\r\n\t\t\tctx.clearRect( 0, 0, width, height );\r\n\t\t\tctx.fillRect( 0, 0, width, height );\r\n\r\n\t\t\tconst diagramWidth  = width + 1;\r\n\t\t\tconst diagramheight = height - ctx.lineWidth * 2;\r\n\r\n\t\t\tconst paletteRendered = new Uint32Array( new ArrayBuffer( diagramWidth * Uint32Array.BYTES_PER_ELEMENT ) );\r\n\t\t\tz42color.renderPaletteDef( paletteRendered, paletteRendered.length, palette );\r\n\r\n\t\t\tdrawPaletteDiagram( ctx, 0, ctx.lineWidth, diagramWidth, diagramheight, paletteRendered, luminance );\r\n\t\t},\r\n\r\n\t\t// Draw the current palette into the canvas.\r\n\t\tupdateGradientCanvas( palette ){\r\n\t\r\n\t\t\tconst canvasElem = document.getElementById( this.gradientCanvasId );\r\n\t\t\tconst width   = canvasElem.width;\r\n\t\t\tconst height  = canvasElem.height;\r\n\r\n\t\t\tif( width === 0 || height === 0 )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tconst context = canvasElem.getContext( \"2d\" );\r\n\t\t\tconst imgData = context.createImageData( width, 1 );\r\n\t\t\tconst pixels  = new Uint32Array( imgData.data.buffer );\r\n\t\t\t\r\n\t\t\t// Fill buffer with a single line.\r\n\t\t\tz42color.renderPaletteDef( pixels, pixels.length, palette );\r\n\t\t\r\n\t\t\t// Draw repeatedly to stretch vertically.\r\n\t\t\tfor( let y = 0; y < height; ++y ) {\r\n\t\t\t\tcontext.putImageData( imgData, 0, y );\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tvalue: {\r\n\t\t\tdeep: true,\r\n\t\t\thandler: function( val, oldVal ) { \r\n\t\t\t\t\r\n\t\t\t\tconst newPalette = makePaletteValid( val, this.optDesc );\t\r\n\t\t\t\tconst curPalette = privates.get( this ).palette;\r\n\r\n\t\t\t\t// Sort new and current palettes for comparability.\r\n\t\t\t\tconst newPaletteSorted = sortPaletteClone( newPalette );\r\n\t\t\t\tconst curPaletteSorted = sortPaletteClone( curPalette );\r\n\r\n\t\t\t\t// To prevent stack overflow or extreme slowdown, make sure to only react on data changes\r\n\t\t\t\t// originating from the outside, instead of changes originating from this component!\r\n\t\t\t\tif( ! _.isEqual( newPaletteSorted, curPaletteSorted ) ) {\r\n\t\t\t\t\tthis.setPaletteFromOutside( newPalette );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\t\t\r\n\t},\r\n}\t\r\n\r\n//==================================================================================================\r\n// Private functions\r\n\r\nfunction makePaletteValid( palette, optDesc ) {\r\n\tconst defaults = { pos: 0 };\r\n\tz42optUtil.setDefaultOptions( defaults, optDesc.segment );\r\n\r\n\tif( ! Array.isArray( palette ) || palette.length === 0 ) {\r\n\t\tconst defaults2 = _.cloneDeep( defaults );\r\n\t\tdefaults2.pos = 0.5;\r\n\t\tdefaults2.color = { r: 255, g: 255, b: 255, a: 1 };\r\n\r\n\t\treturn [ defaults, defaults2 ];\r\n\t}\r\n\r\n\tconst result = _.cloneDeep( palette );\r\n\r\n\t// Set defaults for each array element.\r\n\tfor( let i = 0; i < result.length; ++i ){\r\n\t\tresult[ i ] = result[ i ] || {};\r\n\t\t_.defaultsDeep( result[ i ], defaults );\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\n//---------------------------------------------------------------------------------------------------\r\n\r\nfunction sortPaletteClone( palette ){\r\n\tlet result = _.cloneDeep( palette );\r\n\tresult.sort( ( a, b ) => a.pos - b.pos );\r\n\treturn result;\t\r\n}\r\n\r\nfunction palettePositions( palette ){\r\n\treturn palette.map( item => item.pos );\r\n}\r\n\r\n//---------------------------------------------------------------------------------------------------\r\n\r\nfunction drawPaletteDiagram( ctx, left, bottom, width, height, paletteUint32, fun ) {\r\n\r\n\tlet x1 = Math.trunc( left );\r\n\tbottom = Math.trunc( bottom );\r\n\r\n\tconst calcY = ( index ) => bottom + height - fun( paletteUint32[ index ] ) * height;\r\n\r\n\tctx.beginPath();\r\n\r\n\tlet y1 = calcY( 0 );\r\n\tctx.moveTo( x1, y1 );\r\n\r\n\tfor( let i = 1; i < width; ++i ) {\r\n\t\tconst x2 = i;\r\n\t\tconst y2 = calcY( i );\r\n\t\r\n\t\t// To avoid aliasing in horizontal direction, draw curve segments only when Y changes or curve ends.\r\n\t\tif( y2 != y1 || i >= width - 1 ) {\r\n\t\t\t// Draw horizontal line for any x values we previously skipped.\r\n\t\t\tif( x2 - x1 > 1 ) {\r\n\t\t\t\tctx.lineTo( x2 - 1, y1 );\r\n\t\t\t}\r\n\r\n\t\t\t// Draw possibly pitched line.\r\n\t\t\tctx.lineTo( x2, y2 );\r\n\t\t\tx1 = x2;\r\n\t\t\ty1 = y2;\r\n\t\t}\r\n\t}\r\n\r\n\tctx.stroke();\r\n}\r\n\r\n//---------------------------------------------------------------------------------------------------\r\n// Return luminance of packed RGB Uint32 color in range 0..1.\r\n\r\nfunction luminance( colorUint32 ){\r\n\tconst r = ( colorUint32 >> 16 ) & 0xFF;\r\n\tconst g = ( colorUint32 >> 8 ) & 0xFF;\r\n\tconst b = ( colorUint32 ) & 0xFF;\r\n\treturn ( 0.299 * r + 0.587 * g + 0.114 * b ) / 255;\r\n} \t\r\n\r\n//---------------------------------------------------------------------------------------------------\r\n\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-palette.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-palette.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-palette.vue?vue&type=template&id=3eac2edc&\"\nimport script from \"./z42opt-palette.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-palette.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.optView.options),function(basePath){return [_vm._l((_vm.resolveOptDesc( basePath )),function(opt){return [(_vm.isAttrTrue( opt.node, 'depends' ))?_c(opt.node.$component,{key:_vm.childId( opt.path ),tag:\"component\",attrs:{\"disabled\":! _vm.isAttrTrue( opt.node, 'enabled' ),\"id\":_vm.childId( opt.path ),\"optDesc\":opt.node,\"value\":_vm.resolveValue( opt.path )},on:{\"input\":function($event){return _vm.onModified( opt.path, $event )}}}):_vm._e()]})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOption UI components. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nComponent that generates a flat list of components for the individual option values.\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<div>\r\n\t\t<template v-for=\"basePath in optView.options\">\r\n\t\t\t<template v-for=\"opt in resolveOptDesc( basePath )\">\r\n\t\t\t\t\r\n\t\t\t\t<!-- Component for manipulating a single option value -->\r\n\t\t\t\t<component :is=\"opt.node.$component\" \r\n\t\t\t\t\tv-if=\"isAttrTrue( opt.node, 'depends' )\" \r\n\t\t\t\t\t:disabled=\"! isAttrTrue( opt.node, 'enabled' )\"\r\n\t\t\t\t\t:key=\"childId( opt.path )\"\r\n\t\t\t\t\t:id=\"childId( opt.path )\"\r\n\t\t\t\t\t:optDesc=\"opt.node\" \r\n\t\t\t\t\t:value=\"resolveValue( opt.path )\"\r\n\t\t\t\t\t@input=\"onModified( opt.path, $event )\"\r\n\t\t\t\t/>\r\n\t\t\t</template>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport * as z42opt from \"./optionsDescriptor\";\r\nimport * as z42optUtil from \"./optionsUtils\";\r\n\r\nexport default {\r\n\tname: \"z42opt-container\",\r\n\tinheritAttrs: false,\r\n\r\n\tprops: {\r\n\t\tid:      { type: String, required: true },\r\n\t\toptData: { type: Object, required: true },\r\n\t\toptDesc: { type: z42opt.Node, required: true }, \r\n\t\toptView: { type: Object, required: true },\r\n\t},\r\n\tmethods: {\r\n\t\tchildId( key ) {  \r\n\t\t\treturn z42optUtil.joinPath( this.id, key, \"#\" ); \r\n\t\t},\t\t\t\r\n\t\t// Return a flat array of options descriptors from given path. \r\n\t\t// Path can be empty (not null!) to return all children of root options descriptor.\r\n\t\tresolveOptDesc( path ){\r\n\t\t\tif( path == null ) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\tconst node = ( path.length === 0 ?\r\n\t\t\t               this.optDesc :\r\n\t\t\t\t\t\t   _.get( this.optDesc, path ) );\r\n\t\t\r\n\t\t\tif( node instanceof z42opt.Option ){\r\n\t\t\t\treturn [{ path: path, node: node }];\r\n\t\t\t}\r\n\t\t\tlet res = [];\r\n\t\t\tfor( const key of Object.keys( node ) ){\r\n\t\t\t\tconst childPath = z42optUtil.joinPath( path, key );\r\n\t\t\t\t// Recurse to append child option descriptors\r\n\t\t\t\tres = res.concat( this.resolveOptDesc( childPath ) );\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\t\r\n\t\tresolveValue( path ){\r\n\t\t\treturn _.get( this.optData, path );\r\n\t\t},\r\n\t\tisAttrTrue( optDescChild, attrName ){\r\n\t\t\tconst attr = optDescChild.$attrs[ attrName ];\r\n\t\t\tif( typeof attr === \"undefined\" )\r\n\t\t\t\treturn true;\r\n\t\t\tif( typeof attr === \"function\" )\r\n\t\t\t\treturn attr( this.optData, this.optDesc );\r\n\t\t\treturn Boolean( attr );\r\n\t\t},\r\n\t\tonModified( path, value ){\r\n\t\t\tconst optDescNode = _.get( this.optDesc, path ); \r\n\t\t\tif( optDescNode instanceof z42opt.Option ) {\r\n\t\t\t\t// Send new option value to parent component, instead of modifying this.value directly.\r\n\t\t\t\t// This way parent component has more control about changes.\r\n\t\t\t\tthis.$emit( \"opt-modified\", { path: path, value: value } );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-container.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-container.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-container.vue?vue&type=template&id=2aa7a1f9&\"\nimport script from \"./z42opt-container.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-container.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*\r\nOption descriptor classes. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n\r\nimport * as z42opt     from \"./optionsDescriptor.js\";\r\nimport * as z42optVal  from \"./optionsDescriptorValues.js\";\r\nimport * as z42optUtil from \"./optionsUtils.js\";\r\nimport * as z42easing  from \"./easing.js\";\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nexport default class extends z42opt.Option {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\r\n\t\t// Create descriptors for palette item data.\r\n\r\n\t\tthis.position = new z42optVal.FloatOpt({ \r\n\t\t\tmin: 0, max: 1, \r\n\t\t\tmaxDecimals: 3,\r\n\t\t\tdefaultVal: 0\r\n\t\t});\r\n\r\n\t\tthis.segment = new z42opt.Node( {}, {\r\n\t\t\tcolor: new z42optVal.ColorOpt({\r\n\t\t\t\ttitle: \"Selected color\",\r\n\t\t\t\tdefaultVal: { r: 0, g: 0, b: 0, a: 1 }\r\n\t\t\t}),\r\n\t\t\teaseFun: new z42optVal.EnumOpt({\r\n\t\t\t\ttitle: \"Selected ease function\",\r\n\t\t\t\tvalues: this.$attrs.easeFunctions,\r\n\t\t\t\tdefaultVal: this.$attrs.defaultEaseFunction\r\n\t\t\t}),\r\n\t\t\tisNoisy: new z42optVal.BoolOpt({\r\n\t\t\t\ttitle: \"Add noise to lightness (HSL)\",\r\n\t\t\t\tdefaultVal: false,\r\n\t\t\t}),\r\n\t\t\tnoise: new z42opt.Node( {}, {\r\n\t\t\t\t// NOTE: shortKey has to be only single letter for these options!\r\n\r\n\t\t\t\tfrequency: new z42optVal.IntOpt({ \r\n\t\t\t\t\tshortKey: \"f\",\r\n\t\t\t\t\ttitle: \"Frequency\",\r\n\t\t\t\t\tmin: 1,\r\n\t\t\t\t\tmax: 15,\r\n\t\t\t\t\tmaxDecimals: 0,\r\n\t\t\t\t\tdefaultVal: 2,\r\n\t\t\t\t\tdepends: options => options.isNoisy\r\n\t\t\t\t}),\r\n\t\t\t\toctaves: new z42optVal.IntOpt({\r\n\t\t\t\t\tshortKey: \"o\",\r\n\t\t\t\t\ttitle: \"Octaves\",\r\n\t\t\t\t\tmin: 1,\r\n\t\t\t\t\tmax: 12,\r\n\t\t\t\t\tdefaultVal: 4,\r\n\t\t\t\t\tdepends: options => options.isNoisy\r\n\t\t\t\t}),\r\n\t\t\t\tgain: new z42optVal.FloatOpt({\r\n\t\t\t\t\tshortKey: \"g\",\r\n\t\t\t\t\ttitle: \"Gain\",\r\n\t\t\t\t\tmin: 0.1,\r\n\t\t\t\t\tmax: 1.0,\r\n\t\t\t\t\tmaxDecimals: 2,\r\n\t\t\t\t\tdefaultVal: 0.5,\r\n\t\t\t\t\tdepends: options => options.isNoisy,\r\n\t\t\t\t\tenabled: options => options.noise.octaves >= 2,\r\n\t\t\t\t}),\r\n\t\t\t\tlacunarity: new z42optVal.IntOpt({\r\n\t\t\t\t\tshortKey: \"l\",\r\n\t\t\t\t\ttitle: \"Lacunarity\",\r\n\t\t\t\t\tmin: 2,\r\n\t\t\t\t\tmax: 10,\r\n\t\t\t\t\tdefaultVal: 2,\r\n\t\t\t\t\tdepends: options => options.isNoisy,\r\n\t\t\t\t\tenabled: options => options.noise.octaves >= 2,\r\n\t\t\t\t}),\r\n\t\t\t\tamplitude: new z42optVal.FloatOpt({\r\n\t\t\t\t\tshortKey: \"a\",\r\n\t\t\t\t\ttitle: \"Amplitude\",\r\n\t\t\t\t\tmin: 0,\r\n\t\t\t\t\tmax: 5,\r\n\t\t\t\t\tmaxDecimals: 2,\r\n\t\t\t\t\tdefaultVal: 0.5,\r\n\t\t\t\t\tdepends: options => options.isNoisy\r\n\t\t\t\t}),\r\n\t\t\t\tseed: new z42optVal.FloatOpt({\r\n\t\t\t\t\tshortKey: \"s\",\r\n\t\t\t\t\ttitle: \"Random seed\",\r\n\t\t\t\t\tmin: 0,\r\n\t\t\t\t\tmax: 1.0,\r\n\t\t\t\t\tmaxDecimals: 2,\r\n\t\t\t\t\tdefaultVal: 0.5,\r\n\t\t\t\t\tdepends: options => options.isNoisy\r\n\t\t\t\t}),\r\n\t\t\t}),\r\n\t\t});\r\n\r\n\t\tz42optUtil.validateUniqueShortKeys( this.segment.noise, \"palette.noise\" );\r\n\t}\r\n\r\n\t// Serialize to string.\r\n\t$serialize( value ) {\r\n\t\tlet result = \"\";\r\n\r\n\t\tfor( const item of value ){\r\n\t\t\tresult.length === 0 || ( result += \" \" );\r\n\r\n\t\t\tresult += this.position.$serialize( item.pos ) + \"_\";\r\n\t\t\tresult += this.segment.color.$serialize( item.color ) + \"_\";\r\n\t\t\tresult += this.segment.easeFun.$serialize( item.easeFun );\r\n\r\n\t\t\tif( item.isNoisy ){\r\n\t\t\t\tlet noiseRes = \"\";\r\n\r\n\t\t\t\tfor( const key in this.segment.noise ){\r\n\t\t\t\t\tnoiseRes.length === 0 || ( noiseRes += \"*\" );\r\n\r\n\t\t\t\t\tconst desc = this.segment.noise[ key ];\r\n\t\t\t\t\tnoiseRes += desc.$attrs.shortKey;\r\n\t\t\t\t\tnoiseRes += desc.$serialize( item.noise[ key ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult += \"_\" + noiseRes;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Deserialize from string.\r\n\t$deserialize( value ) {\r\n\t\tlet result = [];\r\n\r\n\t\tconst noiseShortKeyMap = {};\r\n\t\tz42optUtil.createShortKeyToPathMap( noiseShortKeyMap, this.segment.noise );\r\n\r\n\t\tfor( const itemStr of value.split( \" \" ) ){\r\n\t\t\tconst itemValues = itemStr.split( \"_\" );\r\n\t\t\t\r\n\t\t\tif( itemValues.length >= 2 ) {\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\tpos:     this.position.$deserialize( itemValues[ 0 ] ),\r\n\t\t\t\t\tcolor:   this.segment.color.$deserialize( itemValues[ 1 ] ),\r\n\t\t\t\t\tisNoisy: false,\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tif( itemValues.length >= 3 ){\r\n\t\t\t\t\titem.easeFun = this.segment.easeFun.$deserialize( itemValues[ 2 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( itemValues.length >= 4 ){\r\n\t\t\t\t\titem.isNoisy = true;\r\n\t\t\t\t\titem.noise = {};\r\n\r\n\t\t\t\t\tconst noiseValues = itemValues[ 3 ].split( \"*\" );\r\n\r\n\t\t\t\t\tfor( let i in noiseValues ){\r\n\t\t\t\t\t\tconst nv = noiseValues[ i ];\r\n\t\t\t\t\t\tconst shortKey = nv.substring( 0, 1 );\r\n\t\t\t\t\t\tconst valueStr = nv.substring( 1 );\r\n\t\t\t\t\t\tconst noiseKey = noiseShortKeyMap[ shortKey ];\r\n\t\t\t\t\t\tif( ! noiseKey ) {\r\n\t\t\t\t\t\t\tconsole.error( \"Invalid shortKey for palette noise option:\", shortKey );\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst value = this.segment.noise[ noiseKey ].$deserialize( valueStr );\r\n\t\t\t\t\t\tif( value !== null ){\r\n\t\t\t\t\t\t\titem.noise[ noiseKey ] = value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tresult.push( item );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\t\t\t\r\n\t}\r\n\r\n\t// Resolve ease function name to actual function.\r\n\t$resolveEaseFunction( functionName ) {\r\n\t\treturn z42easing[ functionName ] || z42easing.linear;\r\n\t}\r\n\r\n\t// Return a cloned palette with ease function names resolved to actual functions.\r\n\t$resolvePaletteEaseFunctions( palette ) {\r\n\t\treturn palette.map( item => {\r\n\t\t\tconst res = _.cloneDeep( item );\r\n\t\t\tres.easeFun = this.$resolveEaseFunction( res.easeFun ) \r\n\t\t\treturn res;\r\n\t\t});\r\n\t}\r\n\r\n\tget $defaultComponent() { return \"z42opt-palette\"; }\r\n}\t\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{staticClass:\"container px-0\"},[_c('b-row',{attrs:{\"align-v\":\"center\"}},[_c('b-col',[_c('label',{attrs:{\"for\":_vm.id,\"disabled\":_vm.disabled}},[_vm._v(\" \"+_vm._s(_vm.optDesc.$attrs.title)+\": \")])]),_c('b-col',[_c('b-form-input',{staticClass:\"z42opt-color\",attrs:{\"type\":\"color\",\"id\":_vm.id,\"value\":_vm.hexValue,\"disabled\":_vm.disabled},on:{\"change\":function($event){return _vm.onModified( $event )}}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOption UI components. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<b-form-group class=\"container px-0\">\r\n\t\t<b-row align-v=\"center\">\r\n\t\t\t<b-col>\r\n\t\t\t\t<label \r\n\t\t\t\t\t:for=\"id\"\r\n\t\t\t\t\t:disabled=\"disabled\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t{{ optDesc.$attrs.title }}:\r\n\t\t\t\t</label>\r\n\t\t\t</b-col>\r\n\t\t\t<b-col>\r\n\t\t\t\t<b-form-input type=\"color\"\r\n\t\t\t\t\t:id=\"id\"\r\n\t\t\t\t\t:value=\"hexValue\"\r\n\t\t\t\t\t:disabled=\"disabled\"\r\n\t\t\t\t\tclass=\"z42opt-color\"\r\n\t\t\t\t\t@change=\"onModified( $event )\"\t\t\t\t\r\n\t\t\t\t/>\r\n\t\t\t</b-col>\r\n\t\t</b-row>\r\n\t</b-form-group>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport * as tinycolor from \"tinycolor2\"\r\nimport * as z42opt from \"./optionsDescriptor.js\"\r\n\r\nexport default {\r\n\tname: \"z42opt-color\",\r\n\tinheritAttrs: false,\r\n\r\n\tprops: { \r\n\t\tid:       { type: String, required: true },\r\n\t\tvalue:    { required: true },\r\n\t\toptDesc:  { type: z42opt.Option, required: true }, \r\n\t\tdisabled: { type: Boolean, required: false, default: false },\r\n\t},\r\n\tcreated() {\r\n\t\t//console.log(\"z42opt-color.optDesc:\", this.optDesc);\r\n\t},\r\n\tcomputed: {\r\n\t\thexValue(){\r\n\t\t\treturn tinycolor( this.value ).toHexString();\r\n\t\t},\r\n\t},\t\t\r\n\tmethods: {\r\n\t\tonModified( value ){\r\n\t\t\tthis.$emit( \"input\", tinycolor( value ).toRgb() );\r\n\t\t}\r\n\t},\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-color.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-color.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-color.vue?vue&type=template&id=02e64ebb&\"\nimport script from \"./z42opt-color.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-color.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*\r\nOption utilities. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n//------------------------------------------------------------------------------------------------\r\n\r\nimport * as z42opt from \"./optionsDescriptor.js\";\r\nimport * as _ from \"lodash\";\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Get the default option values from optionsDescriptor and merge them with the given URL params.\r\n\r\nfunction mergeDefaultsWithUrlParams( optionsDescriptor, urlParams )\r\n{\r\n\tlet defaults = {};\r\n\tsetDefaultOptions( defaults, optionsDescriptor );\r\n\r\n\tconsole.log( \"Default options:\", JSON.parse( JSON.stringify( defaults ) ) );\r\n\r\n\t// Deserialize and validate URL parameters.\t\r\n\tlet result = optionsFromUrlParams( urlParams, optionsDescriptor );\r\n\tif( ! result )\r\n\t\treturn defaultValues;\r\n\r\n\tconsole.log( \"URL params:\", JSON.parse( JSON.stringify( result ) ) );\r\n\r\n\t_.defaultsDeep( result, defaults );\r\n\r\n\tconsole.log( \"Merged options:\", JSON.parse( JSON.stringify( result ) ) );\r\n\r\n\treturn result;\r\n}\t\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Set values in options object to the default values obtained from descriptor.\r\n\r\nfunction setDefaultOptions( result, descriptor, resultPath = null ) {\r\n\tif( ! ( descriptor instanceof z42opt.Node ) )\r\n\t\tthrow new Error( \"Invalid argument: descriptor must be instance of z42opt.Node\" );\r\n\r\n\tfor( const [ key, childDescriptor ] of Object.entries( descriptor ) ) {\r\n\t\tconst childPath = joinPath( resultPath, key );\r\n\r\n\t\tif( childDescriptor instanceof z42opt.Option ){\r\n\t\t\tlet defaultVal = childDescriptor.$attrs.defaultVal; \r\n\t\t\tif( typeof defaultVal === \"undefined\" ){\r\n\t\t\t\tconsole.error( \"Missing attribute defaultVal for option:\", childPath );\r\n\t\t\t\tdefaultVal = null;\r\n\t\t\t}\r\n\t\t\t// Set default value by path.\r\n\t\t\t_.set( result, childPath, defaultVal );\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Recurse into child descriptor.\r\n\t\t\tsetDefaultOptions( result, childDescriptor, childPath );\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nfunction optionsFromUrlParams( urlParams, descriptor ) {\r\n\tif( ! ( descriptor instanceof z42opt.Node ) )\r\n\t\tthrow new Error( \"Invalid argument: descriptor must be instance of z42opt.Node\" );\r\n\r\n\tlet result = {};\r\n\r\n\tvalidateUniqueShortKeys( descriptor );\t\r\n\r\n\tlet shortKeyToPath = {};\r\n\tcreateShortKeyToPathMap( shortKeyToPath, descriptor );\r\n\t\r\n\tconst par = new URLSearchParams( urlParams );\r\n\t\t\t\t\r\n\tfor( const [ shortKey, urlValue ] of par ) {\t\t\r\n\t\tconst path = shortKeyToPath[ shortKey ];\r\n\t\tif( typeof path === \"undefined\" ) {\r\n\t\t\tconsole.error( `Invalid URL param '${shortKey}'` );\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tconst childDescriptor = _.get( descriptor, path );\r\n\t\tif( ! ( childDescriptor instanceof z42opt.Option ) ) {\r\n\t\t\tconsole.error( `Internal error: missing or invalid descriptor for URL param '${shortKey}', path: ${path}` );\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tconst parsedValue = childDescriptor.$deserialize( urlValue );\r\n\t\tif( parsedValue !== null ) {\r\n\t\t\t_.set( result, path, parsedValue );\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\t\t\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nfunction optionsToUrlParams( options, descriptor ) {\r\n\tif( ! ( descriptor instanceof z42opt.Node ) )\r\n\t\tthrow new Error( \"Invalid argument: descriptor must be instance of z42opt.Node\" );\r\n\r\n\tvalidateUniqueShortKeys( descriptor );\t\r\n\t\r\n\tlet urlParams = new URLSearchParams();\t\t\r\n\t\r\n\tcreateUrlParams( urlParams, options, descriptor );\r\n\r\n\treturn urlParams.toString();\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Append childPath to basePath with given separator. Separator is not appended if basePath is empty.\r\n\r\nfunction joinPath( basePath, childPath, separator = '.' ) {\r\n\tif( ! basePath || basePath.length == 0 )\r\n\t\treturn childPath;\r\n\treturn basePath + separator + childPath; \r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Create permalink from options.\r\n\r\nfunction createPermalink( optionsData, optionsDescriptor, url ) {\r\n\r\n\tconst urlParams = optionsToUrlParams( optionsData, optionsDescriptor );\r\n\r\n\t// Remove sub string after \"#\" and \"?\", if exists.\r\n\tconst baseUrl = url.split( \"#\" )[ 0 ].split( \"?\" )[ 0 ];\r\n\r\n\t// Append '#' because otherwise URL might end with '.' (because of the way how durations are serialized).\r\n\t// '.' breaks the URL when pasted in some mail programs though.\r\n\treturn baseUrl + \"?\" + urlParams + \"#\";\r\n}\t\r\n\r\n//================================================================================================\r\n// Private functions\r\n//================================================================================================\r\n\r\n// Validate shortKey attribute of options descriptor and log any errors to console.\r\n// - all Option descriptors must have a shortKey attribute\r\n// - no duplicates\r\n// - short key is all lowercase\r\n\r\nfunction validateUniqueShortKeys( descriptor, path = null ) {\r\n\tlet shortKeyMap = new Map();\r\n\tvalidateShortKeysRecursively( shortKeyMap, descriptor, path );\r\n\t\r\n\tfor( const [ key, value ] of shortKeyMap.entries() ){\r\n\t\tif( value.length > 1 ){\r\n\t\t\tconsole.error( `Duplicate value '${key}' of attribute 'shortKey' detected for the following options:`, value );\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nfunction validateShortKeysRecursively( result, descriptor, path = null ) {\r\n\r\n\tfor( const [ key, childDescriptor ] of Object.entries( descriptor ) ) {\r\n\t\tconst childPath = joinPath( path, key );\r\n\r\n\t\tif( childDescriptor instanceof z42opt.Option ){\r\n\t\t\tconst shortKey = childDescriptor.$attrs.shortKey;\r\n\t\t\tif( ! shortKey ){\r\n\t\t\t\tconsole.error( \"Missing attribute 'shortKey' for option:\", childPath );\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst shortKeyLCase = shortKey.toLowerCase();\r\n\t\t\tif( shortKeyLCase !== shortKey ){\r\n\t\t\t\tconsole.error( \"Attribute 'shortKey' is not all lowercase for option:\", childPath );\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t// To detect dupes.\r\n\t\t\tif( result.has( shortKey ) ) {\r\n\t\t\t\tresult.get( shortKey ).push( childPath );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tresult.set( shortKey, [ childPath ] );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Recurse into child descriptor.\r\n\t\t\tvalidateShortKeysRecursively( result, childDescriptor, childPath );\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nfunction createShortKeyToPathMap( result, descriptor, path = null ) {\r\n\r\n\tfor( const [ key, childDescriptor ] of Object.entries( descriptor ) ) {\r\n\t\tconst childPath = joinPath( path, key );\r\n\r\n\t\tif( childDescriptor instanceof z42opt.Option ){\r\n\t\t\tresult[ childDescriptor.$attrs.shortKey ] = childPath;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Recurse into child descriptor.\r\n\t\t\tcreateShortKeyToPathMap( result, childDescriptor, childPath );\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nfunction createUrlParams( urlParams, options, rootDescriptor, path = null ) {\r\n\r\n\tfor( const [ key, value ] of Object.entries( options ) ) {\r\n\t\tconst childPath = joinPath( path, key );\r\n\t\tconst childDescriptor = _.get( rootDescriptor, childPath );\r\n\t\t\r\n\t\tif( childDescriptor instanceof z42opt.Option )\t{\r\n\t\t\tif( childDescriptor.$attrs.serialize !== false ) {\r\n\t\t\t\tif( ! childDescriptor.$attrs.shortKey ) {\r\n\t\t\t\t\tconsole.error( \"Missing attribute shortKey for option:\", childPath );\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst urlValue = childDescriptor.$serialize( value ); \r\n\t\t\t\turlParams.append( childDescriptor.$attrs.shortKey, urlValue );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if( typeof value === \"object\" ) {\t\t\t\r\n\t\t\t// Recurse\r\n\t\t\tcreateUrlParams( urlParams, value, rootDescriptor, childPath );\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Single value without descriptor -> this is an error\r\n\t\t\tconsole.error( \"Missing descriptor for option:\", childPath );\r\n\t\t}\t\t\t\r\n\t}\r\n}\t\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nexport { \r\n\tmergeDefaultsWithUrlParams,\r\n\tsetDefaultOptions,\r\n\toptionsFromUrlParams,\r\n\toptionsToUrlParams,\r\n\tjoinPath,\r\n\tcreatePermalink,\r\n\tvalidateUniqueShortKeys,\r\n\tcreateShortKeyToPathMap\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{attrs:{\"id\":_vm.id,\"title\":_vm.optView.title,\"scrollable\":\"\",\"hide-footer\":\"\"},on:{\"show\":_vm.onShow,\"hide\":_vm.onHide}},[_c('p',[(_vm.optView.moreInfoLinkUrl)?_c('a',{attrs:{\"href\":_vm.optView.moreInfoLinkUrl,\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\" \"+_vm._s(_vm.optView.moreInfoLinkText)+\" \")]):_vm._e(),_c('a',{staticStyle:{\"float\":\"right\"},attrs:{\"href\":_vm.permaLinkUrl}},[_vm._v(\"Permalink\")])]),_c(_vm.optView.component || 'z42opt-tabs',{tag:\"component\",attrs:{\"id\":_vm.id,\"optData\":_vm.optData,\"optDesc\":_vm.optDesc,\"optView\":_vm.optView,\"tabIndex\":_vm.tabIndex},on:{\"update:tabIndex\":function($event){_vm.tabIndex=$event},\"update:tab-index\":function($event){_vm.tabIndex=$event},\"opt-modified\":function($event){return _vm.$emit( 'opt-modified', $event )}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOptions dialog component. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n Component for a dynamic options dialog. \r\n It will be generated from the following information:\r\n - optData: the option values \r\n - optDesc: options descriptor that describes the data types, constraints, etc.\r\n - optView: options view describes how the data should be structured in the UI\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<b-modal \r\n\t\t:id=\"id\" \r\n\t\t:title=\"optView.title\"\r\n\t\tscrollable hide-footer\r\n\t\t@show=\"onShow\" \r\n\t\t@hide=\"onHide\"\r\n\t\t>\r\n\t\t<p>\r\n\t\t\t<a v-if=\"optView.moreInfoLinkUrl\" :href=\"optView.moreInfoLinkUrl\" target=\"_blank\" rel=\"noopener\">\r\n\t\t\t\t{{ optView.moreInfoLinkText }}\r\n\t\t\t</a>\r\n\t\t\t<a :href=\"permaLinkUrl\" style=\"float: right\">Permalink</a>\r\n\t\t</p>\r\n\t\t\r\n\t\t<!-- Component for the root of the options tree (typically z42opt-tabs) \r\n\t\t\tInstead of modifying optData directly the component just forwards opt-modified event \r\n\t\t\tto parent to give parent full control. -->\r\n\t\t<component \r\n\t\t\t:is=\"optView.component || 'z42opt-tabs'\" \r\n\t\t\t:id=\"id\" \r\n\t\t\t:optData=\"optData\" \r\n\t\t\t:optDesc=\"optDesc\" \r\n\t\t\t:optView=\"optView\" \r\n\t\t\t:tabIndex.sync=\"tabIndex\"\r\n\t\t\t@opt-modified=\"$emit( 'opt-modified', $event )\"\r\n\t\t/>\r\n\t</b-modal>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport * as z42opt from \"./optionsDescriptor.js\"\r\nimport * as z42optUtil from \"./optionsUtils.js\"\r\n\r\nexport default {\r\n\tname: \"z42opt-dialog\",\r\n\tinheritAttrs: false,\r\n\r\n\tprops: { \r\n\t\tid:      { type: String, required: true }, \r\n\t\toptData: { type: Object, required: true },\r\n\t\toptDesc: { type: z42opt.Node, required: true },\r\n\t\toptView: { type: Object, required: true },\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tinitialPermaLinkUrl: null,\r\n\t\t\ttabIndex: 0,  // remembers last active tab\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tpermaLinkUrl() {\r\n\t\t\treturn z42optUtil.createPermalink( this.optData, this.optDesc, window.location.href );\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tonShow(){\r\n\t\t\tthis.initialPermaLinkUrl = z42optUtil.createPermalink( this.optData, this.optDesc, window.location.href );\r\n\t\t},\r\n\t\tonHide(){\r\n\t\t\t// When options have changed, make it possible to use the browser back button to revert the current options.\r\n\t\t\tif( this.permaLinkUrl !== this.initialPermaLinkUrl ){\r\n\t\t\t\twindow.history.pushState( { action: \"optionsDialogClose\" }, document.title, this.permaLinkUrl );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-dialog.vue?vue&type=template&id=0f516fb6&\"\nimport script from \"./z42opt-dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{attrs:{\"label\":_vm.optDesc.$attrs.title + ':',\"label-for\":_vm.id,\"disabled\":_vm.disabled}},[_c('b-form-select',{staticClass:\"z42opt-select\",attrs:{\"id\":_vm.id,\"options\":_vm.options,\"value\":_vm.value,\"disabled\":_vm.disabled},on:{\"change\":function($event){return _vm.$emit( 'input', $event )}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOption UI components. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<b-form-group\r\n\t\t:label=\"optDesc.$attrs.title + ':'\"\r\n\t\t:label-for=\"id\"\r\n\t\t:disabled=\"disabled\"\r\n\t\t>\r\n\t\t<b-form-select \r\n\t\t\t:id=\"id\"\r\n\t\t\t:options=\"options\"\r\n\t\t\t:value=\"value\"\r\n\t\t\t:disabled=\"disabled\"\r\n\t\t\tclass=\"z42opt-select\"\r\n\t\t\t@change=\"$emit( 'input', $event )\"\r\n\t\t/>\r\n\t</b-form-group>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport * as z42opt from \"./optionsDescriptor.js\"\r\n\r\nexport default {\r\n\tname: \"z42opt-select\",\r\n\tinheritAttrs: false,\r\n\t\r\n\tprops: { \r\n\t\tid:       { type: String, required: true },\r\n\t\tvalue:    { required: true },\r\n\t\toptDesc:  { type: z42opt.Option, required: true }, \r\n\t\tdisabled: { type: Boolean, required: false, default: false },\r\n\t},\r\n\tcreated() {\r\n\t\t//console.log(\"z42opt-select.optDesc:\", this.optDesc);\r\n\t},\r\n\tcomputed: {\r\n\t\toptions() {\r\n\t\t\tconst entries = Object.entries( this.optDesc.$attrs.values );\r\n\t\t\treturn entries.map( entry => ({ \r\n\t\t\t\tvalue: entry[ 0 ], \r\n\t\t\t\ttext : entry[ 1 ].title || entry[ 0 ] })\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-select.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-select.vue?vue&type=template&id=5a27b288&\"\nimport script from \"./z42opt-select.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-select.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\n\r\nimport BootstrapVue from \"bootstrap-vue\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\r\n\r\nVue.use(BootstrapVue);\r\n","import Vue from 'vue';\r\n\r\nconst requireComponent = require.context(\r\n  // The relative path of the components folder\r\n  './components',\r\n  // Whether or not to look in subfolders\r\n  false,\r\n  // The regular expression used to match component filenames\r\n  /z42opt.*\\.vue$/\r\n);\r\n\r\nrequireComponent.keys().forEach( fileName => {\r\n  // Get component config\r\n  const componentConfig = requireComponent( fileName );\r\n\r\n  // Gets the file name regardless of folder depth\r\n  const componentName = fileName\r\n        .split('/')\r\n        .pop()\r\n        .replace(/\\.\\w+$/, '');\r\n\r\n  // Register component globally\r\n  Vue.component(\r\n    componentName,\r\n    // Look for the component options on `.default`, which will\r\n    // exist if the component was exported with `export default`,\r\n    // otherwise fall back to module's root.\r\n    componentConfig.default || componentConfig\r\n  );\r\n});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.z42opt-dialog\",modifiers:{\"z42opt-dialog\":true}}],attrs:{\"id\":\"button-options-dialog\",\"title\":\"Plasma Options (Key 'o')\"}},[_vm._v(\"\")]),_c('z42opt-dialog',{attrs:{\"id\":\"z42opt-dialog\",\"optData\":_vm.optData,\"optDesc\":_vm.optDesc,\"optView\":_vm.optView},on:{\"opt-modified\":function($event){return _vm.onModified( $event )}}}),(_vm.optData.info.showFps)?_c('div',{attrs:{\"id\":\"fps-info\"}}):_vm._e(),_c('canvas',{staticClass:\"plasma\",attrs:{\"id\":\"plasmaCanvas\"}},[_vm._v(\"PlasmaFractal\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\nPlasmaFractal options module. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n\r\nimport * as z42opt from './components/optionsDescriptorValues.js'\r\nimport z42PaletteOpt from './components/optionsDescriptorPalette.js'\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Ease functions from 'z42ease.js' to use (excluded some which doesn't look good).\r\n// Map to short keys for serializing to URL params.\r\n\r\nconst paletteEaseFunctions = {\r\n\tlinear       : { shortKey: \"l\"     , title: \"Linear\"                        },\r\n\tinQuad       : { shortKey: \"i2\"    , title: \"Quadratic [in]\"                },\r\n\toutQuad      : { shortKey: \"o2\"    , title: \"Quadratic [out]\"               },\r\n\tinOutQuad    : { shortKey: \"io2\"   , title: \"Quadratic [in/out]\"            },\r\n\tinCubic      : { shortKey: \"i3\"    , title: \"Cubic [in]\"                    },\r\n\toutCubic     : { shortKey: \"o3\"    , title: \"Cubic [out]\"                   },\r\n\tinOutCubic   : { shortKey: \"io3\"   , title: \"Cubic [in/out]\"                },\r\n\tinQuart      : { shortKey: \"i4\"    , title: \"Quartic [in]\"                  },\r\n\toutQuart     : { shortKey: \"o4\"    , title: \"Quartic [out]\"                 },\r\n\tinOutQuart   : { shortKey: \"io4\"   , title: \"Quartic [in/out]\"              },\r\n\tinQuint      : { shortKey: \"i5\"    , title: \"Quintic [in]\"                  },\r\n\toutQuint     : { shortKey: \"o5\"    , title: \"Quintic [out]\"                 },\r\n\tinOutQuint   : { shortKey: \"io5\"   , title: \"Quintic [in/out]\"              },\r\n\tinSine       : { shortKey: \"is\"    , title: \"Sine [in]\"                     },\r\n\toutSine      : { shortKey: \"os\"    , title: \"Sine [out]\"                    },\r\n\tinOutSine    : { shortKey: \"ios\"   , title: \"Sine [in/out]\"                 },\r\n\tinOutSine2_3 : { shortKey: \"ios23\" , title: \"Sine(x) + Sine(x*3)  [in/out]\" },\r\n\tinOutSine2_5 : { shortKey: \"ios25\" , title: \"Sine(x) + Sine(x*5)  [in/out]\" },\r\n\tinOutSine2_9 : { shortKey: \"ios29\" , title: \"Sine(x) + Sine(x*9)  [in/out]\" },\r\n\tinOutSine2_13: { shortKey: \"ios213\", title: \"Sine(x) + Sine(x*13) [in/out]\" },\r\n\tinExpo       : { shortKey: \"ie\"    , title: \"Exponential [in]\"              },\r\n\toutExpo      : { shortKey: \"oe\"    , title: \"Exponential [out]\"             },\r\n\tinOutExpo    : { shortKey: \"ioe\"   , title: \"Exponential [in/out]\"          },\r\n\tinExpo2      : { shortKey: \"ie2\"   , title: \"Double Exponential [in]\"       },\r\n\toutExpo2     : { shortKey: \"oe2\"   , title: \"Double Exponential [out]\"      },\r\n\tinOutExpo2   : { shortKey: \"ioe2\"  , title: \"Double Exponential [in/out]\"   },\r\n\tinCirc       : { shortKey: \"ic\"    , title: \"Circular [in]\"                 },\r\n\toutCirc      : { shortKey: \"oc\"    , title: \"Circular [out]\"                },\r\n\tinOutCirc    : { shortKey: \"ioc\"   , title: \"Circular [in/out]\"             },\r\n\tinBounce     : { shortKey: \"ib\"    , title: \"Bounce [in]\"                   },\r\n\toutBounce    : { shortKey: \"ob\"    , title: \"Bounce [out]\"                  },\r\n\tinOutBounce  : { shortKey: \"iob\"   , title: \"Bounce [in/out]\"               },\r\n};\r\n\r\nconst noiseFunctions3D = {\r\n\tPerlin3D        : { shortKey: \"p3\", title: \"Perlin\" },\r\n\tSimplexPerlin3D : { shortKey: \"s3\", title: \"Simplex\" },\r\n\tValue3D         : { shortKey: \"v3\", title: \"Value\" },\r\n\tCellular3D      : { shortKey: \"c3\", title: \"Cellular\" },\r\n};\r\n\r\nconst warpFunctions = {\r\n\twarpRegular       : { shortKey: \"r\", title: \"Regular\" },\r\n\twarpPolar         : { shortKey: \"p\", title: \"Polar\" },\r\n\twarpVortex        : { shortKey: \"v\", title: \"Vortex\" },\r\n\twarpVortexInverse : { shortKey: \"vi\", title: \"Vortex Inverse\" },\r\n};\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Describes all available options, e. g. default values, constraints, mapping to URL params, etc.\r\n// It does NOT store actual option values!\r\n\r\nconst optionsDescriptor = new z42opt.Node( {}, {\r\n\tnoise: new z42opt.Node( {}, {\r\n\t\tnoiseFunction: new z42opt.EnumOpt({\r\n\t\t\tshortKey: \"n\",\r\n\t\t\ttitle: \"Noise function\",\r\n\t\t\tvalues: noiseFunctions3D,\r\n\t\t\tdefaultVal: \"Perlin3D\",\r\n\t\t}),\r\n\t\tfrequency: new z42opt.FloatOpt({ \r\n\t\t\tshortKey: \"f\",\r\n\t\t\ttitle: \"Frequency\",\r\n\t\t\tmin: 0.01,\r\n\t\t\tmax: 15,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisScale: true,\r\n\t\t\tscaleNormalPos: 0.33,\r\n\t\t\tdefaultVal: 1.5,\r\n\t\t}),\r\n\t\toctaves: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"o\",\r\n\t\t\ttitle: \"Octaves\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 15,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 10,\r\n\t\t}),\r\n\t\tgain: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"g\",\r\n\t\t\ttitle: \"Gain\",\r\n\t\t\tmin: 0.1,\r\n\t\t\tmax: 1.0,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 0.5,\r\n\t\t\tenabled: options => options.noise.octaves > 1,\r\n\t\t}),\r\n\t\tlacunarity: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"l\",\r\n\t\t\ttitle: \"Lacunarity\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 10,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 2,\r\n\t\t\tenabled: options => options.noise.octaves > 1,\r\n\t\t}),\r\n\t\tangle: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"an\",\r\n\t\t\ttitle: \"Angle\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 90,\r\n\t\t\tmaxDecimals: 1,\r\n\t\t\tdefaultVal: 0,\r\n\t\t\tenabled: options => options.noise.octaves > 1,\r\n\t\t}),\r\n\t\tamplitude: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"a\",\r\n\t\t\ttitle: \"Amplitude\",\r\n\t\t\tmin: 0.1,\r\n\t\t\tmax: 50,\r\n\t\t\tisScale: true,\r\n\t\t\tscaleNormalPos: 0.15,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 1,\r\n\t\t}),\r\n\t\tisClamp: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"c\",\r\n\t\t\ttitle: \"Clamp\",\r\n\t\t\tdefaultVal: false,\r\n\t\t}),\r\n\t}),\r\n\twarp: new z42opt.Node( {}, {\r\n\t\tisEnabled: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"de\",\r\n\t\t\ttitle: \"Warp the noise\",\r\n\t\t\tdefaultVal: false,\r\n\t\t}),\t\t\r\n\t\ttransformFunction: new z42opt.EnumOpt({\r\n\t\t\tshortKey: \"wt\",\r\n\t\t\ttitle: \"Transform function\",\r\n\t\t\tvalues: warpFunctions,\r\n\t\t\tdefaultVal: \"warpVortex\",\r\n\t\t\tdepends: options => options.warp.isEnabled,\r\n\t\t}),\r\n\t\tnoiseFunction: new z42opt.EnumOpt({\r\n\t\t\tshortKey: \"wn\",\r\n\t\t\ttitle: \"Noise function\",\r\n\t\t\tvalues: noiseFunctions3D,\r\n\t\t\tdefaultVal: \"Perlin3D\",\r\n\t\t\tdepends: options => options.warp.isEnabled,\r\n\t\t}),\r\n\t\tfrequency: new z42opt.FloatOpt({ \r\n\t\t\tshortKey: \"wf\",\r\n\t\t\ttitle: \"Frequency\",\r\n\t\t\tmin: 0.01,\r\n\t\t\tmax: 15,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisScale: true,\r\n\t\t\tscaleNormalPos: 0.33,\r\n\t\t\tdefaultVal: 1.5,\r\n\t\t\tdepends: options => options.warp.isEnabled,\r\n\t\t}),\r\n\t\toctaves: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wo\",\r\n\t\t\ttitle: \"Octaves\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 15,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 4,\r\n\t\t\tdepends: options => options.warp.isEnabled,\r\n\t\t}),\r\n\t\tgain: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wg\",\r\n\t\t\ttitle: \"Gain\",\r\n\t\t\tmin: 0.1,\r\n\t\t\tmax: 1.0,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 0.75,\r\n\t\t\tenabled: options => options.warp.octaves > 1,\r\n\t\t\tdepends: options => options.warp.isEnabled,\r\n\t\t}),\r\n\t\tlacunarity: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wl\",\r\n\t\t\ttitle: \"Lacunarity\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 10,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 2,\r\n\t\t\tenabled: options => options.warp.octaves > 1,\r\n\t\t\tdepends: options => options.warp.isEnabled,\r\n\t\t}),\r\n\t\tamplitude: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wa\",\r\n\t\t\ttitle: \"Amplitude\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 100,\r\n\t\t\tmaxDecimals: 1,\r\n\t\t\tdefaultVal: 12,\r\n\t\t\tdepends: options => options.warp.isEnabled,\r\n\t\t}),\r\n\t\trotation: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wr\",\r\n\t\t\ttitle: \"Rotation\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 20,\r\n\t\t\tmaxDecimals: 1,\r\n\t\t\tdefaultVal: 4,\r\n\t\t\tdepends: options => options.warp.isEnabled && options.warp.transformFunction != 'warpRegular',\r\n\t\t}),\r\n\t}),\r\n\twarp2: new z42opt.Node( {}, {\r\n\t\tisEnabled: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"de2\",\r\n\t\t\ttitle: \"Warp the warp\",\r\n\t\t\tdefaultVal: false,\r\n\t\t}),\t\t\r\n\t\ttransformFunction: new z42opt.EnumOpt({\r\n\t\t\tshortKey: \"wt2\",\r\n\t\t\ttitle: \"Transform function\",\r\n\t\t\tvalues: warpFunctions,\r\n\t\t\tdefaultVal: \"warpVortex\",\r\n\t\t\tdepends: options => options.warp2.isEnabled,\r\n\t\t}),\r\n\t\tnoiseFunction: new z42opt.EnumOpt({\r\n\t\t\tshortKey: \"wn2\",\r\n\t\t\ttitle: \"Noise function\",\r\n\t\t\tvalues: noiseFunctions3D,\r\n\t\t\tdefaultVal: \"SimplexPerlin3D\",\r\n\t\t\tdepends: options => options.warp2.isEnabled,\r\n\t\t}),\r\n\t\tfrequency: new z42opt.FloatOpt({ \r\n\t\t\tshortKey: \"wf2\",\r\n\t\t\ttitle: \"Frequency\",\r\n\t\t\tmin: 0.01,\r\n\t\t\tmax: 15,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisScale: true,\r\n\t\t\tscaleNormalPos: 0.33,\r\n\t\t\tdefaultVal: 3.0,\r\n\t\t\tdepends: options => options.warp2.isEnabled,\r\n\t\t}),\r\n\t\toctaves: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wo2\",\r\n\t\t\ttitle: \"Octaves\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 15,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 4,\r\n\t\t\tdepends: options => options.warp2.isEnabled,\r\n\t\t}),\r\n\t\tgain: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wg2\",\r\n\t\t\ttitle: \"Gain\",\r\n\t\t\tmin: 0.1,\r\n\t\t\tmax: 1.0,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 0.55,\r\n\t\t\tenabled: options => options.warp2.octaves > 1,\r\n\t\t\tdepends: options => options.warp2.isEnabled,\r\n\t\t}),\r\n\t\tlacunarity: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wl2\",\r\n\t\t\ttitle: \"Lacunarity\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 10,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 2,\r\n\t\t\tenabled: options => options.warp2.octaves > 1,\r\n\t\t\tdepends: options => options.warp2.isEnabled,\r\n\t\t}),\r\n\t\tamplitude: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wa2\",\r\n\t\t\ttitle: \"Amplitude\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 100,\r\n\t\t\tmaxDecimals: 1,\r\n\t\t\tdefaultVal: 3,\r\n\t\t\tdepends: options => options.warp2.isEnabled,\r\n\t\t}),\r\n\t\trotation: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wr2\",\r\n\t\t\ttitle: \"Rotation\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 20,\r\n\t\t\tmaxDecimals: 1,\r\n\t\t\tdefaultVal: 2,\r\n\t\t\tdepends: options => options.warp2.isEnabled && options.warp2.transformFunction != 'warp2Regular',\r\n\t\t}),\r\n\t}),\r\n\tpalette: new z42opt.Node( {}, {\r\n\t\tisGrayScale: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"pg\",\r\n\t\t\ttitle: \"Show only grayscale output\",\r\n\t\t\tdefaultVal: false,\r\n\t\t}),\r\n\t\tisCustom: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"icp\",\r\n\t\t\ttitle: \"Custom palette\",\r\n\t\t\tdefaultVal: false,\r\n\t\t\tdepends: options => ! options.palette.isGrayScale,\r\n\t\t}),\r\n\t\teaseFunctionBgToFg: new z42opt.EnumOpt({\r\n\t\t\tshortKey: \"pbf\",\r\n\t\t\ttitle: \"Background to foreground easing\",\r\n\t\t\tvalues: paletteEaseFunctions,\r\n\t\t\tdefaultVal: \"inBounce\",\r\n\t\t\tdepends: options => ! options.palette.isCustom && ! options.palette.isGrayScale,\r\n\t\t}),\r\n\t\teaseFunctionFgToBg: new z42opt.EnumOpt({\r\n\t\t\tshortKey: \"pfb\",\r\n\t\t\ttitle: \"Foreground to background easing\",\r\n\t\t\tvalues: paletteEaseFunctions,\r\n\t\t\tdefaultVal: \"outBounce\",\r\n\t\t\tdepends: options => ! options.palette.isCustom && ! options.palette.isGrayScale,\r\n\t\t}),\r\n\t\tsaturation: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"ps\",\r\n\t\t\ttitle: \"Saturation\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 1,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 0.5,\r\n\t\t\tdepends: options => ! options.palette.isCustom && ! options.palette.isGrayScale,\r\n\t\t}),\r\n\t\tbrightness: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"pb\",\r\n\t\t\ttitle: \"Brightness\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 1,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tdefaultVal: 1.0,\r\n\t\t\tdepends: options => ! options.palette.isCustom && ! options.palette.isGrayScale,\r\n\t\t}),\r\n\t\tbgColor: new z42opt.ColorOpt({\r\n\t\t\tshortKey: \"pbg\",\r\n\t\t\ttitle: \"Background color\",\r\n\t\t\tdefaultVal: { r: 0, g: 0, b: 0, a: 1 },\r\n\t\t\tdepends: options => ! options.palette.isCustom && ! options.palette.isGrayScale,\r\n\t\t}),\r\n\t\tcustomPalette: new z42PaletteOpt({\r\n\t\t\tshortKey: \"cp\",\r\n\t\t\teaseFunctions: paletteEaseFunctions,\r\n\t\t\tdefaultEaseFunction: \"linear\",\r\n\t\t\tdefaultVal: [],\r\n\t\t\tdepends: options => options.palette.isCustom && ! options.palette.isGrayScale,\r\n\t\t}),\r\n\t\tisCustomPaletteAnimated: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"acp\",\r\n\t\t\ttitle: \"Animate custom palette (random hue offset)\",\r\n\t\t\tdefaultVal: false,\r\n\t\t\tdepends: options => options.palette.isCustom && ! options.palette.isGrayScale,\r\n\t\t}),\t\t\r\n\t}),\r\n\tnoiseAnim: new z42opt.Node( {}, {\r\n\t\tisEnabled: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"inm\",\r\n\t\t\ttitle: \"Mutate noise\",\r\n\t\t\tdefaultVal: true,\r\n\t\t}),\r\n\t\tnoiseSpeed: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"ns\",\r\n\t\t\ttitle: \"Noise mutation speed\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 1,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 0.05,\r\n\t\t\tdepends: options => options.noiseAnim.isEnabled\r\n\t\t}),\r\n\t\tturbulence: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"ntu\",\r\n\t\t\ttitle: \"Noise turbulence\",\r\n\t\t\tmin: 1.0,\r\n\t\t\tmax: 2.5,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 1.85,\r\n\t\t\tdepends: options => options.noiseAnim.isEnabled\r\n\t\t}),\r\n\t}),\r\n\twarpAnim: new z42opt.Node( {}, {\r\n\t\tisEnabled: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"iwm\",\r\n\t\t\ttitle: \"Mutate warp\",\r\n\t\t\tdefaultVal: false,\r\n\t\t\tdepends: options => options.warp.isEnabled \r\n\t\t}),\r\n\t\tnoiseSpeed: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"ws\",\r\n\t\t\ttitle: \"Warp mutation speed\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 1,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 0.05,\r\n\t\t\tdepends: options => options.warp.isEnabled && options.warpAnim.isEnabled \r\n\t\t}),\r\n\t\tturbulence: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wtu\",\r\n\t\t\ttitle: \"Warp turbulence\",\r\n\t\t\tmin: 1.0,\r\n\t\t\tmax: 2.5,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 1.85,\r\n\t\t\tdepends: options => options.warp.isEnabled && options.warpAnim.isEnabled\r\n\t\t}),\r\n\t}),\r\n\twarpAnim2: new z42opt.Node( {}, {\r\n\t\tisEnabled: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"iwm2\",\r\n\t\t\ttitle: \"Mutate warp\",\r\n\t\t\tdefaultVal: false,\r\n\t\t\tdepends: options => options.warp2.isEnabled \r\n\t\t}),\r\n\t\tnoiseSpeed: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"ws2\",\r\n\t\t\ttitle: \"Warp mutation speed\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 1,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 0.05,\r\n\t\t\tdepends: options => options.warp2.isEnabled && options.warpAnim2.isEnabled \r\n\t\t}),\r\n\t\tturbulence: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"wtu2\",\r\n\t\t\ttitle: \"Warp turbulence\",\r\n\t\t\tmin: 1.0,\r\n\t\t\tmax: 2.5,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 1.85,\r\n\t\t\tdepends: options => options.warp2.isEnabled && options.warpAnim2.isEnabled\r\n\t\t}),\r\n\t}),\r\n\tpaletteAnim: new z42opt.Node( {}, {\r\n\t\tisRotaEnabled: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"ipr\",\r\n\t\t\ttitle: \"Rotate palette (disabled if Noise > Clamp is set)\",\r\n\t\t\tdefaultVal: false,\r\n\t\t\tenabled: options => ! options.noise.isClamp,\r\n\t\t}),\t\t\r\n\t\trotaSpeed: new z42opt.FloatOpt({\r\n\t\t\tshortKey: \"prs\",\r\n\t\t\ttitle: \"Palette rotation speed\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 1,\r\n\t\t\tmaxDecimals: 2,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 0.1,\r\n\t\t\tdepends: options => options.paletteAnim.isRotaEnabled && ! options.noise.isClamp,\r\n\t\t}),\r\n\t\ttransitionDelay: new z42opt.DurationOpt({\r\n\t\t\tshortKey: \"ptde\",\r\n\t\t\ttitle: \"Palette transition delay\",\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 30,\r\n\t\t\tdisplayUnit: \"s\",\r\n\t\t\tmaxDecimals: 1,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 10,\r\n\t\t\tdepends: options => ! options.palette.isCustom || options.palette.isCustomPaletteAnimated,\r\n\t\t}),\r\n\t\ttransitionDuration: new z42opt.DurationOpt({\r\n\t\t\tshortKey: \"ptd\",\r\n\t\t\ttitle: \"Palette transition duration\",\r\n\t\t\tmin: 0.1,\r\n\t\t\tmax: 30,\r\n\t\t\tdisplayUnit: \"s\",\r\n\t\t\tmaxDecimals: 1,\r\n\t\t\tisSlow: true,\r\n\t\t\tdefaultVal: 5,\r\n\t\t\tdepends: options => ! options.palette.isCustom || options.palette.isCustomPaletteAnimated,\r\n\t\t}),\r\n\t}),\r\n\tinfo: new z42opt.Node( {}, {\r\n\t\tshowFps: new z42opt.BoolOpt({\r\n\t\t\tshortKey: \"sfp\",\r\n\t\t\ttitle: \"Show FPS\",\r\n\t\t\tdefaultVal: false,\r\n\t\t\tserialize: false,\r\n\t\t}),\r\n\t}),\r\n});\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Describes the GUI structure of the options.\r\n\r\nconst optionsView = {\r\n\ttitle: \"PlasmaFractal Options\",\r\n\tmoreInfoLinkUrl: \"https://github.com/zett42/plasmafractal-gl\",\r\n\tmoreInfoLinkText: \"GitHub Project\",\r\n\t\r\n\t//Group components can be customized, this is the default:\r\n\t//component: \"z42opt-tabs\",\r\n\r\n\tgroups: {\r\n\t\tnoiseTab: {\r\n\t\t\ttitle: \"Noise\",\r\n\t\t\toptions: [ \"noise\" ]\r\n\t\t},\r\n\t\twarpingTab: {\r\n\t\t\ttitle: \"Warp\",\r\n\t\t\toptions: [ \"warp\" ]\r\n\t\t},\r\n\t\twarpingTab2: {\r\n\t\t\ttitle: \"Warp\",\r\n\t\t\toptions: [ \"warp2\" ]\r\n\t\t},\r\n\t\tpaletteTab: {\r\n\t\t\ttitle: \"Palette\",\r\n\t\t\toptions: [ \"palette\" ]\r\n\t\t},\r\n\t\tanimTab: {\r\n\t\t\ttitle: \"Animation\",\r\n\r\n\t\t\t// This creates a flat view of the palette and noise anim options:\r\n\t\t\toptions: [ \"noiseAnim\", \"warpAnim\", \"warpAnim2\", \"paletteAnim\" ],\r\n\r\n\t\t\t/* This would create nested tabs instead:\r\n\t\t\tgroups: {\r\n\t\t\t\tpaletteAnimGrp: {\r\n\t\t\t\t\ttitle: \"Palette\",\r\n\t\t\t\t\toptions: [ \"paletteAnim\" ]\r\n\t\t\t\t},\r\n\t\t\t\tnoiseAnimGrp: {\r\n\t\t\t\t\ttitle: \"Noise\",\r\n\t\t\t\t\toptions: [ \"noiseAnim\" ]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t},\r\n\t\tinfoTab: {\r\n\t\t\ttitle: \"Info\",\r\n\t\t\toptions: [ \"info\" ]\r\n\t\t},\r\n\t}\r\n};\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nexport {\r\n\toptionsDescriptor,\r\n\toptionsView,\r\n}\r\n","/*\r\nWebGL utilities. Copyright (c) 2019 zett42\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n//----------------------------------------------------------------------------------------------\r\n\r\nexport function setBufferRectangle( gl, x, y, width, height, usage = gl.STATIC_DRAW ) {\r\n    let x1 = x;\r\n    let x2 = x + width;\r\n    let y1 = y;\r\n    let y2 = y + height;\r\n    gl.bufferData( gl.ARRAY_BUFFER, \r\n        new Float32Array([\r\n            x1, y1,\r\n            x2, y1,\r\n            x1, y2,\r\n            x1, y2,\r\n            x2, y1,\r\n            x2, y2 \r\n        ]), \r\n        usage \r\n    );\r\n}\r\n","/*\r\nWebGL utilities. Copyright (c) 2019 zett42\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n//----------------------------------------------------------------------------------------------\r\n\r\nimport * as z42color from './color.js'\r\n\r\n//----------------------------------------------------------------------------------------------\r\n// Render the given multi-gradient palette to the currently bound texture, generating mipmaps.\r\n\r\nexport function setPaletteTexture( gl, textureWidth, paletteDef, isRepeat ) {\r\n\r\n    textureWidth = Math.trunc( textureWidth );\r\n\r\n    let paletteBuffer = new ArrayBuffer( textureWidth * 4 );\r\n    let paletteUint32 = new Uint32Array( paletteBuffer );\r\n    z42color.renderPaletteDef( paletteUint32, paletteUint32.length, paletteDef );\r\n\r\n    // Loop to generate mipmaps (can't use gl.generateMipmap for non-square texture)\r\n    for( let mipLevel = 0; textureWidth >= 1; ++mipLevel ) {\r\n            \r\n        const paletteUint8 = new Uint8Array ( paletteBuffer );\r\n        gl.texImage2D( gl.TEXTURE_2D, mipLevel, gl.RGBA, textureWidth, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, paletteUint8, 0 );\r\n\r\n        const scaledTextureWidth = Math.trunc( textureWidth / 2 );\r\n        if( scaledTextureWidth >= 1 ) {\r\n            // Scale palette down to half the size for next mip level.\r\n\r\n            const scaledPaletteBuffer = new ArrayBuffer( scaledTextureWidth * 4 );\r\n            const scaledPaletteUint32 = new Uint32Array( scaledPaletteBuffer );\r\n\r\n            for( let iDst = 0, iSrc = 0; iDst < scaledTextureWidth; ++iDst, iSrc += 2 ) {\r\n                \r\n                // Averaging 3 samples seems to be the sweet spot between aliasing and too much blur.\r\n                const c1 = samplePalette( paletteUint32, iSrc - 1, isRepeat );\r\n                const c2 = samplePalette( paletteUint32, iSrc + 0, isRepeat );\r\n                const c3 = samplePalette( paletteUint32, iSrc + 1, isRepeat );\r\n\r\n                const c = roundColor( mulColor( sumColors([ c1, c2, c3 ]), 1 / 3 ) );\r\n\r\n                scaledPaletteUint32[ iDst ] = ( c.a << 24 ) | ( c.r << 16 ) | ( c.g << 8 ) | c.b;\r\n            } \r\n            \r\n            paletteBuffer = scaledPaletteBuffer;\r\n            paletteUint32 = scaledPaletteUint32;\r\n        }\r\n\r\n        textureWidth = scaledTextureWidth;\r\n    }\r\n\r\n    // Set texture parameters\r\n\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, isRepeat ? gl.REPEAT : gl.CLAMP_TO_EDGE );\r\n    gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR );\r\n    gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR );\r\n}\r\n\r\n//----------------------------------------------------------------------------------------------\r\n// Utility functions.\r\n\r\nfunction splitColor( c ) {\r\n    return {\r\n        a: ( c >> 24 ),\r\n        r: ( c >> 16 ) & 0xFF,\r\n        g: ( c >> 8  ) & 0xFF,\r\n        b: ( c & 0xFF ),\r\n    };\r\n}\r\n\r\nfunction sumColors( colors ) {\r\n    let r = { a: 0, r: 0, g: 0, b: 0 };\r\n    for( let c of colors ) {\r\n        r.a += c.a;\r\n        r.r += c.r;\r\n        r.g += c.g;\r\n        r.b += c.b;\r\n    }\r\n    return r;\r\n}\r\n\r\nfunction mulColor( c, f ) {\r\n    return { \r\n        a: c.a * f, \r\n        r: c.r * f, \r\n        g: c.g * f, \r\n        b: c.b * f,\r\n    };\r\n}\r\n\r\nfunction roundColor( c ) {\r\n    return { \r\n        a: Math.round( c.a ), \r\n        r: Math.round( c.r ), \r\n        g: Math.round( c.g ), \r\n        b: Math.round( c.b ),\r\n    };\r\n}\r\n\r\n// Sample Uint32 palette with wrap-around.\r\nfunction samplePalette( pal, index, isRepeat ) {\r\n\r\n    const i = isRepeat ? z42color.mod( index, pal.length )\r\n                       : z42color.clamp( index, 0, pal.length - 1 );\r\n    \r\n    return splitColor( pal[ i ] );\r\n}\r\n","export default \"#version 300 es\\n\\n#define SHADER_NAME glPlasmaVertex.glsl\\n\\nprecision highp float;\\n#define GLSLIFY 1\\n\\n// Scale factor to adjust for screen aspect ratio and orientation.\\nuniform vec2 u_scale;\\n\\n// An attribute is an input (in) to a vertex shader.\\n// It will receive data from a buffer\\nin vec2 a_position;\\nin vec2 a_texCoord;\\n\\n// Used to pass the texture coordinates to the fragment shader\\nout vec2 fragCoord;\\n\\nvoid main() {\\n\\t// Scale to adjust for screen aspect ratio and orientation.\\n\\tvec2 pos = a_position * u_scale;\\n\\n\\t// Define position of the current vertex by assigning to global variable gl_Position \\n\\tgl_Position = vec4( pos, 0, 1 );\\n\\n\\t// pass the texCoord to the fragment shader\\n\\t// The GPU will interpolate this value between points.\\n\\tfragCoord = a_texCoord;\\n}\"","export default \"#version 300 es\\n#define SHADER_NAME glPlasmaFrag.glsl\\n\\n/*\\nPlasmaFractal. Copyright (c) 2019 zett42.\\nhttps://github.com/zett42/plasmafractal-gl\\n\\nMIT License\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE. \\n*/\\n\\n// Fragment shaders don't have a default precision so we need to pick one.\\nprecision highp float;\\nprecision highp sampler2D;\\n#define GLSLIFY 1\\n\\n//\\n// Imports\\n\\n//\\n//  Wombat\\n//  An efficient texture-free GLSL procedural noise library\\n//  Source: https://github.com/BrianSharpe/Wombat\\n//  Derived from: https://github.com/BrianSharpe/GPU-Noise-Lib\\n//\\n//  I'm not one for copyrights.  Use the code however you wish.\\n//  All I ask is that credit be given back to the blog or myself when appropriate.\\n//  And also to let me know if you come up with any changes, improvements, thoughts or interesting uses for this stuff. :)\\n//  Thanks!\\n//\\n//  Brian Sharpe\\n//  brisharpe CIRCLE_A yahoo DOT com\\n//  http://briansharpe.wordpress.com\\n//  https://github.com/BrianSharpe\\n//\\n\\n//\\n//  Perlin Noise 3D\\n//  Return value range of -1.0->1.0\\n//\\nfloat Perlin3D( vec3 P )\\n{\\n    //  https://github.com/BrianSharpe/Wombat/blob/master/Perlin3D.glsl\\n\\n    // establish our grid cell and unit position\\n    vec3 Pi = floor(P);\\n    vec3 Pf = P - Pi;\\n    vec3 Pf_min1 = Pf - 1.0;\\n\\n    // clamp the domain\\n    Pi.xyz = Pi.xyz - floor(Pi.xyz * ( 1.0 / 69.0 )) * 69.0;\\n    vec3 Pi_inc1 = step( Pi, vec3( 69.0 - 1.5 ) ) * ( Pi + 1.0 );\\n\\n    // calculate the hash\\n    vec4 Pt = vec4( Pi.xy, Pi_inc1.xy ) + vec2( 50.0, 161.0 ).xyxy;\\n    Pt *= Pt;\\n    Pt = Pt.xzxz * Pt.yyww;\\n    const vec3 SOMELARGEFLOATS = vec3( 635.298681, 682.357502, 668.926525 );\\n    const vec3 ZINC = vec3( 48.500388, 65.294118, 63.934599 );\\n    vec3 lowz_mod = vec3( 1.0 / ( SOMELARGEFLOATS + Pi.zzz * ZINC ) );\\n    vec3 highz_mod = vec3( 1.0 / ( SOMELARGEFLOATS + Pi_inc1.zzz * ZINC ) );\\n    vec4 hashx0 = fract( Pt * lowz_mod.xxxx );\\n    vec4 hashx1 = fract( Pt * highz_mod.xxxx );\\n    vec4 hashy0 = fract( Pt * lowz_mod.yyyy );\\n    vec4 hashy1 = fract( Pt * highz_mod.yyyy );\\n    vec4 hashz0 = fract( Pt * lowz_mod.zzzz );\\n    vec4 hashz1 = fract( Pt * highz_mod.zzzz );\\n\\n    // calculate the gradients\\n    vec4 grad_x0 = hashx0 - 0.49999;\\n    vec4 grad_y0 = hashy0 - 0.49999;\\n    vec4 grad_z0 = hashz0 - 0.49999;\\n    vec4 grad_x1 = hashx1 - 0.49999;\\n    vec4 grad_y1 = hashy1 - 0.49999;\\n    vec4 grad_z1 = hashz1 - 0.49999;\\n    vec4 grad_results_0 = inversesqrt( grad_x0 * grad_x0 + grad_y0 * grad_y0 + grad_z0 * grad_z0 ) * ( vec2( Pf.x, Pf_min1.x ).xyxy * grad_x0 + vec2( Pf.y, Pf_min1.y ).xxyy * grad_y0 + Pf.zzzz * grad_z0 );\\n    vec4 grad_results_1 = inversesqrt( grad_x1 * grad_x1 + grad_y1 * grad_y1 + grad_z1 * grad_z1 ) * ( vec2( Pf.x, Pf_min1.x ).xyxy * grad_x1 + vec2( Pf.y, Pf_min1.y ).xxyy * grad_y1 + Pf_min1.zzzz * grad_z1 );\\n\\n    // Classic Perlin Interpolation\\n    vec3 blend = Pf * Pf * Pf * (Pf * (Pf * 6.0 - 15.0) + 10.0);\\n    vec4 res0 = mix( grad_results_0, grad_results_1, blend.z );\\n    vec4 blend2 = vec4( blend.xy, vec2( 1.0 - blend.xy ) );\\n    float final = dot( res0, blend2.zxzx * blend2.wwyy );\\n    return ( final * 1.1547005383792515290182975610039 );  // scale things to a strict -1.0->1.0 range  *= 1.0/sqrt(0.75)\\n}\\n\\n//\\n//  Wombat\\n//  An efficient texture-free GLSL procedural noise library\\n//  Source: https://github.com/BrianSharpe/Wombat\\n//  Derived from: https://github.com/BrianSharpe/GPU-Noise-Lib\\n//\\n//  I'm not one for copyrights.  Use the code however you wish.\\n//  All I ask is that credit be given back to the blog or myself when appropriate.\\n//  And also to let me know if you come up with any changes, improvements, thoughts or interesting uses for this stuff. :)\\n//  Thanks!\\n//\\n//  Brian Sharpe\\n//  brisharpe CIRCLE_A yahoo DOT com\\n//  http://briansharpe.wordpress.com\\n//  https://github.com/BrianSharpe\\n//\\n\\n//\\n//  This is a modified version of Stefan Gustavson's and Ian McEwan's work at http://github.com/ashima/webgl-noise\\n//  Modifications are...\\n//  - faster random number generation\\n//  - analytical final normalization\\n//  - space scaled can have an approx feature size of 1.0\\n//  - filter kernel changed to fix discontinuities at tetrahedron boundaries\\n//\\n\\n//\\n//  Simplex Perlin Noise 3D\\n//  Return value range of -1.0->1.0\\n//\\nfloat SimplexPerlin3D( vec3 P )\\n{\\n    //  https://github.com/BrianSharpe/Wombat/blob/master/SimplexPerlin3D.glsl\\n\\n    //  simplex math constants\\n    const float SKEWFACTOR = 1.0/3.0;\\n    const float UNSKEWFACTOR = 1.0/6.0;\\n    const float SIMPLEX_CORNER_POS = 0.5;\\n    const float SIMPLEX_TETRAHADRON_HEIGHT = 0.70710678118654752440084436210485;    // sqrt( 0.5 )\\n\\n    //  establish our grid cell.\\n    P *= SIMPLEX_TETRAHADRON_HEIGHT;    // scale space so we can have an approx feature size of 1.0\\n    vec3 Pi = floor( P + dot( P, vec3( SKEWFACTOR) ) );\\n\\n    //  Find the vectors to the corners of our simplex tetrahedron\\n    vec3 x0 = P - Pi + dot(Pi, vec3( UNSKEWFACTOR ) );\\n    vec3 g = step(x0.yzx, x0.xyz);\\n    vec3 l = 1.0 - g;\\n    vec3 Pi_1 = min( g.xyz, l.zxy );\\n    vec3 Pi_2 = max( g.xyz, l.zxy );\\n    vec3 x1 = x0 - Pi_1 + UNSKEWFACTOR;\\n    vec3 x2 = x0 - Pi_2 + SKEWFACTOR;\\n    vec3 x3 = x0 - SIMPLEX_CORNER_POS;\\n\\n    //  pack them into a parallel-friendly arrangement\\n    vec4 v1234_x = vec4( x0.x, x1.x, x2.x, x3.x );\\n    vec4 v1234_y = vec4( x0.y, x1.y, x2.y, x3.y );\\n    vec4 v1234_z = vec4( x0.z, x1.z, x2.z, x3.z );\\n\\n    // clamp the domain of our grid cell\\n    Pi.xyz = Pi.xyz - floor(Pi.xyz * ( 1.0 / 69.0 )) * 69.0;\\n    vec3 Pi_inc1 = step( Pi, vec3( 69.0 - 1.5 ) ) * ( Pi + 1.0 );\\n\\n    //\\tgenerate the random vectors\\n    vec4 Pt = vec4( Pi.xy, Pi_inc1.xy ) + vec2( 50.0, 161.0 ).xyxy;\\n    Pt *= Pt;\\n    vec4 V1xy_V2xy = mix( Pt.xyxy, Pt.zwzw, vec4( Pi_1.xy, Pi_2.xy ) );\\n    Pt = vec4( Pt.x, V1xy_V2xy.xz, Pt.z ) * vec4( Pt.y, V1xy_V2xy.yw, Pt.w );\\n    const vec3 SOMELARGEFLOATS = vec3( 635.298681, 682.357502, 668.926525 );\\n    const vec3 ZINC = vec3( 48.500388, 65.294118, 63.934599 );\\n    vec3 lowz_mods = vec3( 1.0 / ( SOMELARGEFLOATS.xyz + Pi.zzz * ZINC.xyz ) );\\n    vec3 highz_mods = vec3( 1.0 / ( SOMELARGEFLOATS.xyz + Pi_inc1.zzz * ZINC.xyz ) );\\n    Pi_1 = ( Pi_1.z < 0.5 ) ? lowz_mods : highz_mods;\\n    Pi_2 = ( Pi_2.z < 0.5 ) ? lowz_mods : highz_mods;\\n    vec4 hash_0 = fract( Pt * vec4( lowz_mods.x, Pi_1.x, Pi_2.x, highz_mods.x ) ) - 0.49999;\\n    vec4 hash_1 = fract( Pt * vec4( lowz_mods.y, Pi_1.y, Pi_2.y, highz_mods.y ) ) - 0.49999;\\n    vec4 hash_2 = fract( Pt * vec4( lowz_mods.z, Pi_1.z, Pi_2.z, highz_mods.z ) ) - 0.49999;\\n\\n    //\\tevaluate gradients\\n    vec4 grad_results = inversesqrt( hash_0 * hash_0 + hash_1 * hash_1 + hash_2 * hash_2 ) * ( hash_0 * v1234_x + hash_1 * v1234_y + hash_2 * v1234_z );\\n\\n    //\\tNormalization factor to scale the final result to a strict 1.0->-1.0 range\\n    //\\thttp://briansharpe.wordpress.com/2012/01/13/simplex-noise/#comment-36\\n    const float FINAL_NORMALIZATION = 37.837227241611314102871574478976;\\n\\n    //  evaulate the kernel weights ( use (0.5-x*x)^3 instead of (0.6-x*x)^4 to fix discontinuities )\\n    vec4 kernel_weights = v1234_x * v1234_x + v1234_y * v1234_y + v1234_z * v1234_z;\\n    kernel_weights = max(0.5 - kernel_weights, 0.0);\\n    kernel_weights = kernel_weights*kernel_weights*kernel_weights;\\n\\n    //\\tsum with the kernel and return\\n    return dot( kernel_weights, grad_results ) * FINAL_NORMALIZATION;\\n}\\n\\n//\\n//  Wombat\\n//  An efficient texture-free GLSL procedural noise library\\n//  Source: https://github.com/BrianSharpe/Wombat\\n//  Derived from: https://github.com/BrianSharpe/GPU-Noise-Lib\\n//\\n//  I'm not one for copyrights.  Use the code however you wish.\\n//  All I ask is that credit be given back to the blog or myself when appropriate.\\n//  And also to let me know if you come up with any changes, improvements, thoughts or interesting uses for this stuff. :)\\n//  Thanks!\\n//\\n//  Brian Sharpe\\n//  brisharpe CIRCLE_A yahoo DOT com\\n//  http://briansharpe.wordpress.com\\n//  https://github.com/BrianSharpe\\n//\\n\\n//\\n//  Value Noise 3D\\n//  Return value range of -1.0->1.0 (modification by zett42, original code: 0.0->1.0)\\n//\\nfloat Value3D( vec3 P )\\n{\\n    //  https://github.com/BrianSharpe/Wombat/blob/master/Value3D.glsl\\n\\n    // establish our grid cell and unit position\\n    vec3 Pi = floor(P);\\n    vec3 Pf = P - Pi;\\n    vec3 Pf_min1 = Pf - 1.0;\\n\\n    // clamp the domain\\n    Pi.xyz = Pi.xyz - floor(Pi.xyz * ( 1.0 / 69.0 )) * 69.0;\\n    vec3 Pi_inc1 = step( Pi, vec3( 69.0 - 1.5 ) ) * ( Pi + 1.0 );\\n\\n    // calculate the hash\\n    vec4 Pt = vec4( Pi.xy, Pi_inc1.xy ) + vec2( 50.0, 161.0 ).xyxy;\\n    Pt *= Pt;\\n    Pt = Pt.xzxz * Pt.yyww;\\n    vec2 hash_mod = vec2( 1.0 / ( 635.298681 + vec2( Pi.z, Pi_inc1.z ) * 48.500388 ) );\\n    vec4 hash_lowz = fract( Pt * hash_mod.xxxx );\\n    vec4 hash_highz = fract( Pt * hash_mod.yyyy );\\n\\n    //\\tblend the results and return\\n    vec3 blend = Pf * Pf * Pf * (Pf * (Pf * 6.0 - 15.0) + 10.0);\\n    vec4 res0 = mix( hash_lowz, hash_highz, blend.z );\\n    vec4 blend2 = vec4( blend.xy, vec2( 1.0 - blend.xy ) );\\n    float result = dot( res0, blend2.zxzx * blend2.wwyy );\\n\\t\\n\\treturn result * 2.0 - 1.0;\\n}\\n\\n//\\n//  Wombat\\n//  An efficient texture-free GLSL procedural noise library\\n//  Source: https://github.com/BrianSharpe/Wombat\\n//  Derived from: https://github.com/BrianSharpe/GPU-Noise-Lib\\n//\\n//  I'm not one for copyrights.  Use the code however you wish.\\n//  All I ask is that credit be given back to the blog or myself when appropriate.\\n//  And also to let me know if you come up with any changes, improvements, thoughts or interesting uses for this stuff. :)\\n//  Thanks!\\n//\\n//  Brian Sharpe\\n//  brisharpe CIRCLE_A yahoo DOT com\\n//  http://briansharpe.wordpress.com\\n//  https://github.com/BrianSharpe\\n//\\n\\n//\\n//  This represents a modified version of Stefan Gustavson's work at http://www.itn.liu.se/~stegu/GLSL-cellular\\n//  The noise is optimized to use a 2x2x2 search window instead of 3x3x3\\n//  Modifications are...\\n//  - faster random number generation\\n//  - analytical final normalization\\n//  - random point offset is restricted to prevent artifacts\\n//\\n\\n//\\n//  Cellular Noise 3D\\n//  produces a range of 0.0->1.0\\n//\\nfloat Cellular3D(vec3 P)\\n{\\n    //\\testablish our grid cell and unit position\\n    vec3 Pi = floor(P);\\n    vec3 Pf = P - Pi;\\n\\n    // clamp the domain\\n    Pi.xyz = Pi.xyz - floor(Pi.xyz * ( 1.0 / 69.0 )) * 69.0;\\n    vec3 Pi_inc1 = step( Pi, vec3( 69.0 - 1.5 ) ) * ( Pi + 1.0 );\\n\\n    // calculate the hash ( over -1.0->1.0 range )\\n    vec4 Pt = vec4( Pi.xy, Pi_inc1.xy ) + vec2( 50.0, 161.0 ).xyxy;\\n    Pt *= Pt;\\n    Pt = Pt.xzxz * Pt.yyww;\\n    const vec3 SOMELARGEFLOATS = vec3( 635.298681, 682.357502, 668.926525 );\\n    const vec3 ZINC = vec3( 48.500388, 65.294118, 63.934599 );\\n    vec3 lowz_mod = vec3( 1.0 / ( SOMELARGEFLOATS + Pi.zzz * ZINC ) );\\n    vec3 highz_mod = vec3( 1.0 / ( SOMELARGEFLOATS + Pi_inc1.zzz * ZINC ) );\\n    vec4 hash_x0 = fract( Pt * lowz_mod.xxxx ) * 2.0 - 1.0;\\n    vec4 hash_x1 = fract( Pt * highz_mod.xxxx ) * 2.0 - 1.0;\\n    vec4 hash_y0 = fract( Pt * lowz_mod.yyyy ) * 2.0 - 1.0;\\n    vec4 hash_y1 = fract( Pt * highz_mod.yyyy ) * 2.0 - 1.0;\\n    vec4 hash_z0 = fract( Pt * lowz_mod.zzzz ) * 2.0 - 1.0;\\n    vec4 hash_z1 = fract( Pt * highz_mod.zzzz ) * 2.0 - 1.0;\\n\\n    //  generate the 8 point positions\\n    const float JITTER_WINDOW = 0.166666666;\\t// 0.166666666 will guarentee no artifacts.\\n    hash_x0 = ( ( hash_x0 * hash_x0 * hash_x0 ) - sign( hash_x0 ) ) * JITTER_WINDOW + vec4( 0.0, 1.0, 0.0, 1.0 );\\n    hash_y0 = ( ( hash_y0 * hash_y0 * hash_y0 ) - sign( hash_y0 ) ) * JITTER_WINDOW + vec4( 0.0, 0.0, 1.0, 1.0 );\\n    hash_x1 = ( ( hash_x1 * hash_x1 * hash_x1 ) - sign( hash_x1 ) ) * JITTER_WINDOW + vec4( 0.0, 1.0, 0.0, 1.0 );\\n    hash_y1 = ( ( hash_y1 * hash_y1 * hash_y1 ) - sign( hash_y1 ) ) * JITTER_WINDOW + vec4( 0.0, 0.0, 1.0, 1.0 );\\n    hash_z0 = ( ( hash_z0 * hash_z0 * hash_z0 ) - sign( hash_z0 ) ) * JITTER_WINDOW + vec4( 0.0, 0.0, 0.0, 0.0 );\\n    hash_z1 = ( ( hash_z1 * hash_z1 * hash_z1 ) - sign( hash_z1 ) ) * JITTER_WINDOW + vec4( 1.0, 1.0, 1.0, 1.0 );\\n\\n    //\\treturn the closest squared distance\\n    vec4 dx1 = Pf.xxxx - hash_x0;\\n    vec4 dy1 = Pf.yyyy - hash_y0;\\n    vec4 dz1 = Pf.zzzz - hash_z0;\\n    vec4 dx2 = Pf.xxxx - hash_x1;\\n    vec4 dy2 = Pf.yyyy - hash_y1;\\n    vec4 dz2 = Pf.zzzz - hash_z1;\\n    vec4 d1 = dx1 * dx1 + dy1 * dy1 + dz1 * dz1;\\n    vec4 d2 = dx2 * dx2 + dy2 * dy2 + dz2 * dz2;\\n    d1 = min(d1, d2);\\n    d1.xy = min(d1.xy, d1.wz);\\n    return min(d1.x, d1.y) * ( 9.0 / 12.0 ); // return a value scaled to 0.0->1.0\\n}\\n\\n// Common parameter types\\nstruct FbmNoiseParams {\\n\\tint   octaves;           // number of octaves for fractal noise\\n\\tfloat octavesFract;      // fractional part of octaves value\\n\\tfloat frequency;         // noise frequency\\n\\tfloat gain;              // amplitude factor per octave\\n\\tfloat angle;             // rotation per octave\\n\\tfloat lacunarity;        // frequency factor per octave\\n\\tfloat turbulence;        // Z coordinate factor per octave  \\n};\\n\\nstruct NoiseParams {\\n\\tFbmNoiseParams basic;    // basic params\\n\\tfloat anim;              // Z-position in 3D noise, for animation\\n\\tfloat amplitude;         // noise amplitude\\n};\\n\\nstruct WarpParams {\\n\\tFbmNoiseParams basic;\\n\\tfloat anim;              // Z-position in 3D noise, for animation\\n\\tfloat amplitude;         // directional amplitude\\n\\tfloat rotation;          // rotational amplitude\\n};\\n\\n// Through preprocessor variables BASE_NOISE_FUN, WARP_NOISE_FUN and WARP2_NOISE_FUN which are passed from JS \\n// via injectDefines(), we select from the above noise functions to compose the FBM functions.\\n// NOTE: formatting should not be changed, as glslify breaks when more than 1 space character appears after comma!\\n\\n/*\\nPlasmaFractal. Copyright (c) 2019 zett42.\\nhttps://github.com/zett42/plasmafractal-gl\\n\\nMIT License\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE. \\n*/\\n\\n// Fractal brownian motion noise.\\n// Requires NOISE_FUN argument in require() call to define noise function to use.\\n\\nfloat fbmNoise3D_0( vec3 pos, FbmNoiseParams noise ) {\\n\\n\\tfloat result = 0.0;\\n\\n\\tfloat freq = noise.frequency;\\n\\tfloat z    = pos.z;\\n\\tfloat amp  = 1.0;\\n\\n\\t// Z-increment to \\\"randomize\\\" each octave for avoiding artefacts that originate from coords 0,0\\n\\t// due to the pseudo-random nature of the noise.\\n\\t// This value has been choosen by trial and error.\\n\\tconst float zInc = 7.2;\\n\\n\\tmat2 rot = mat2( cos( noise.angle ), sin( noise.angle ), -sin( noise.angle ), cos( noise.angle ) );\\n\\n\\tvec2 p2 = pos.xy * noise.frequency;\\n\\n\\t// Create fractal noise by adding multiple octaves of noise.\\n\\tfor( int i = 0; i < noise.octaves; ++i ) {                \\n\\n\\t\\tresult += BASE_NOISE_FUN( vec3( p2, z ) ) * amp;\\n\\n\\t\\tp2  *= rot * noise.lacunarity;\\n\\t\\tamp *= noise.gain;\\n\\t\\tz   += zInc;\\n\\t\\tz   *= noise.turbulence;\\n\\t}\\n\\n\\t// Fractional part of octave value is used for smooth transition.\\n\\tresult += BASE_NOISE_FUN( vec3( p2, z ) ) * amp * noise.octavesFract;\\n\\n\\treturn result;\\n}\\n\\n/*\\nPlasmaFractal. Copyright (c) 2019 zett42.\\nhttps://github.com/zett42/plasmafractal-gl\\n\\nMIT License\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE. \\n*/\\n\\n// Fractal brownian motion noise.\\n// Requires NOISE_FUN argument in require() call to define noise function to use.\\n\\nfloat fbmNoise3D_2( vec3 pos, FbmNoiseParams noise ) {\\n\\n\\tfloat result = 0.0;\\n\\n\\tfloat freq = noise.frequency;\\n\\tfloat z    = pos.z;\\n\\tfloat amp  = 1.0;\\n\\n\\t// Z-increment to \\\"randomize\\\" each octave for avoiding artefacts that originate from coords 0,0\\n\\t// due to the pseudo-random nature of the noise.\\n\\t// This value has been choosen by trial and error.\\n\\tconst float zInc = 7.2;\\n\\n\\tmat2 rot = mat2( cos( noise.angle ), sin( noise.angle ), -sin( noise.angle ), cos( noise.angle ) );\\n\\n\\tvec2 p2 = pos.xy * noise.frequency;\\n\\n\\t// Create fractal noise by adding multiple octaves of noise.\\n\\tfor( int i = 0; i < noise.octaves; ++i ) {                \\n\\n\\t\\tresult += WARP_NOISE_FUN( vec3( p2, z ) ) * amp;\\n\\n\\t\\tp2  *= rot * noise.lacunarity;\\n\\t\\tamp *= noise.gain;\\n\\t\\tz   += zInc;\\n\\t\\tz   *= noise.turbulence;\\n\\t}\\n\\n\\t// Fractional part of octave value is used for smooth transition.\\n\\tresult += WARP_NOISE_FUN( vec3( p2, z ) ) * amp * noise.octavesFract;\\n\\n\\treturn result;\\n}\\n\\n/*\\nPlasmaFractal. Copyright (c) 2019 zett42.\\nhttps://github.com/zett42/plasmafractal-gl\\n\\nMIT License\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE. \\n*/\\n\\n// Fractal brownian motion noise.\\n// This variant returns two different noise values for a given coordinate.\\n// Requires NOISE_FUN argument in require() call to define noise function to use.\\n\\nvec2 fbmNoiseDual3D_0( vec3 pos, FbmNoiseParams noise ) {\\n\\n\\tvec2 result = vec2( 0 );\\n\\n\\tfloat freq = noise.frequency;\\n\\tfloat z    = pos.z;\\n\\tfloat amp  = 1.0;\\n\\n\\t// Z-increment to \\\"randomize\\\" each octave for avoiding artefacts that originate from coords 0,0\\n\\t// due to the pseudo-random nature of the noise.\\n\\t// This value has been choosen by trial and error.\\n\\tconst float zInc = 7.0;\\n\\n\\t// Randomize noise for Y direction.\\n\\tconst float yInc = 4.8;\\n\\n\\t// Create fractal noise by adding multiple octaves of noise.\\n\\tfor( int i = 0; i < noise.octaves; ++i ) {                \\n\\n\\t\\tvec3 p = vec3( pos.xy * freq, z );\\n\\t\\tfloat nx = WARP_NOISE_FUN( vec3( pos.xy * freq, z ) );\\n\\t\\tfloat ny = WARP_NOISE_FUN( vec3( pos.xy * freq, z + yInc ) );\\n\\n\\t\\tresult += vec2( nx, ny ) * amp;\\n\\n\\t\\tfreq   *= noise.lacunarity;\\n\\t\\tamp    *= noise.gain;\\n\\t\\tz      += zInc;\\n\\t\\tz      *= noise.turbulence;\\n\\t}\\n\\n\\t// Fractional part of octave value is used for smooth transition.\\n\\tvec3 p = vec3( pos.xy * freq, z );\\n\\tfloat nx = WARP_NOISE_FUN( vec3( pos.xy * freq, z ) );\\n\\tfloat ny = WARP_NOISE_FUN( vec3( pos.xy * freq, z + yInc ) );\\n\\n\\tresult += vec2( nx, ny ) * amp * noise.octavesFract;\\n\\n\\treturn result;\\n}\\n\\n// Regular domain warping. Just offset coordinates by noise values.\\n\\nvec2 warpRegular_0( vec2 pos, WarpParams warp ) {\\n\\n\\tvec2 noise = fbmNoiseDual3D_0( vec3( pos, warp.anim ), warp.basic );\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t  \\n\\treturn pos + noise * warp.amplitude;\\n}\\n\\n// Most sample code for domain warping simply adds noise values to the fragment position. \\n// This is a variation where we are interpreting the noise values as angle and length to\\n// produce more fluid-looking results. \\n\\nvec2 warpPolar_1( vec2 pos, WarpParams warp ) {\\n\\n\\tvec2 noise = fbmNoiseDual3D_0( vec3( pos, warp.anim ), warp.basic );\\n\\n\\tfloat warpAngle = noise.x * warp.rotation;\\n\\treturn pos.xy + vec2( sin( warpAngle ), cos( warpAngle ) ) * noise.y * warp.amplitude;\\n}\\n\\n// Most sample code for domain warping simply adds noise values to the fragment position. \\n// This is a variation where we are using the noise value for a vortex (spiral) transformation.\\n// Creates results similar to warpPolar, but requires only a single noise function, reducing GPU load!\\n\\nvec2 warpVortex_0( vec2 pos, WarpParams warp ) {\\n\\t\\n\\tfloat noise = fbmNoise3D_2( vec3( pos, warp.anim ), warp.basic );\\n\\n\\tfloat angle = noise * warp.rotation;\\n\\tfloat dist  = noise * warp.amplitude;\\n\\n\\treturn pos + vec2( sin( angle ), cos( angle ) ) * dist;\\n}\\n\\n// Variation of warpVortex. \\n\\nvec2 warpVortexInverse_0( vec2 pos, WarpParams warp ) {\\n\\n\\tfloat noise = fbmNoise3D_2( vec3( pos, warp.anim ), warp.basic );\\n\\n\\tnoise = 1.0 - abs( clamp( noise, -1.0, 1.0 ) );\\n\\n\\tfloat angle = noise * warp.rotation;\\n\\tfloat dist  = noise * warp.amplitude;\\n\\n\\treturn pos + vec2( sin( angle ), cos( angle ) ) * dist;\\n}\\n\\n/*\\nPlasmaFractal. Copyright (c) 2019 zett42.\\nhttps://github.com/zett42/plasmafractal-gl\\n\\nMIT License\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE. \\n*/\\n\\n// Fractal brownian motion noise.\\n// Requires NOISE_FUN argument in require() call to define noise function to use.\\n\\nfloat fbmNoise3D_1( vec3 pos, FbmNoiseParams noise ) {\\n\\n\\tfloat result = 0.0;\\n\\n\\tfloat freq = noise.frequency;\\n\\tfloat z    = pos.z;\\n\\tfloat amp  = 1.0;\\n\\n\\t// Z-increment to \\\"randomize\\\" each octave for avoiding artefacts that originate from coords 0,0\\n\\t// due to the pseudo-random nature of the noise.\\n\\t// This value has been choosen by trial and error.\\n\\tconst float zInc = 7.2;\\n\\n\\tmat2 rot = mat2( cos( noise.angle ), sin( noise.angle ), -sin( noise.angle ), cos( noise.angle ) );\\n\\n\\tvec2 p2 = pos.xy * noise.frequency;\\n\\n\\t// Create fractal noise by adding multiple octaves of noise.\\n\\tfor( int i = 0; i < noise.octaves; ++i ) {                \\n\\n\\t\\tresult += WARP2_NOISE_FUN( vec3( p2, z ) ) * amp;\\n\\n\\t\\tp2  *= rot * noise.lacunarity;\\n\\t\\tamp *= noise.gain;\\n\\t\\tz   += zInc;\\n\\t\\tz   *= noise.turbulence;\\n\\t}\\n\\n\\t// Fractional part of octave value is used for smooth transition.\\n\\tresult += WARP2_NOISE_FUN( vec3( p2, z ) ) * amp * noise.octavesFract;\\n\\n\\treturn result;\\n}\\n\\n/*\\nPlasmaFractal. Copyright (c) 2019 zett42.\\nhttps://github.com/zett42/plasmafractal-gl\\n\\nMIT License\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE. \\n*/\\n\\n// Fractal brownian motion noise.\\n// This variant returns two different noise values for a given coordinate.\\n// Requires NOISE_FUN argument in require() call to define noise function to use.\\n\\nvec2 fbmNoiseDual3D_1( vec3 pos, FbmNoiseParams noise ) {\\n\\n\\tvec2 result = vec2( 0 );\\n\\n\\tfloat freq = noise.frequency;\\n\\tfloat z    = pos.z;\\n\\tfloat amp  = 1.0;\\n\\n\\t// Z-increment to \\\"randomize\\\" each octave for avoiding artefacts that originate from coords 0,0\\n\\t// due to the pseudo-random nature of the noise.\\n\\t// This value has been choosen by trial and error.\\n\\tconst float zInc = 7.0;\\n\\n\\t// Randomize noise for Y direction.\\n\\tconst float yInc = 4.8;\\n\\n\\t// Create fractal noise by adding multiple octaves of noise.\\n\\tfor( int i = 0; i < noise.octaves; ++i ) {                \\n\\n\\t\\tvec3 p = vec3( pos.xy * freq, z );\\n\\t\\tfloat nx = WARP2_NOISE_FUN( vec3( pos.xy * freq, z ) );\\n\\t\\tfloat ny = WARP2_NOISE_FUN( vec3( pos.xy * freq, z + yInc ) );\\n\\n\\t\\tresult += vec2( nx, ny ) * amp;\\n\\n\\t\\tfreq   *= noise.lacunarity;\\n\\t\\tamp    *= noise.gain;\\n\\t\\tz      += zInc;\\n\\t\\tz      *= noise.turbulence;\\n\\t}\\n\\n\\t// Fractional part of octave value is used for smooth transition.\\n\\tvec3 p = vec3( pos.xy * freq, z );\\n\\tfloat nx = WARP2_NOISE_FUN( vec3( pos.xy * freq, z ) );\\n\\tfloat ny = WARP2_NOISE_FUN( vec3( pos.xy * freq, z + yInc ) );\\n\\n\\tresult += vec2( nx, ny ) * amp * noise.octavesFract;\\n\\n\\treturn result;\\n}\\n\\n// Regular domain warping. Just offset coordinates by noise values.\\n\\nvec2 warpRegular_1( vec2 pos, WarpParams warp ) {\\n\\n\\tvec2 noise = fbmNoiseDual3D_1( vec3( pos, warp.anim ), warp.basic );\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t  \\n\\treturn pos + noise * warp.amplitude;\\n}\\n\\n// Most sample code for domain warping simply adds noise values to the fragment position. \\n// This is a variation where we are interpreting the noise values as angle and length to\\n// produce more fluid-looking results. \\n\\nvec2 warpPolar_0( vec2 pos, WarpParams warp ) {\\n\\n\\tvec2 noise = fbmNoiseDual3D_1( vec3( pos, warp.anim ), warp.basic );\\n\\n\\tfloat warpAngle = noise.x * warp.rotation;\\n\\treturn pos.xy + vec2( sin( warpAngle ), cos( warpAngle ) ) * noise.y * warp.amplitude;\\n}\\n\\n// Most sample code for domain warping simply adds noise values to the fragment position. \\n// This is a variation where we are using the noise value for a vortex (spiral) transformation.\\n// Creates results similar to warpPolar, but requires only a single noise function, reducing GPU load!\\n\\nvec2 warpVortex_1( vec2 pos, WarpParams warp ) {\\n\\t\\n\\tfloat noise = fbmNoise3D_1( vec3( pos, warp.anim ), warp.basic );\\n\\n\\tfloat angle = noise * warp.rotation;\\n\\tfloat dist  = noise * warp.amplitude;\\n\\n\\treturn pos + vec2( sin( angle ), cos( angle ) ) * dist;\\n}\\n\\n// Variation of warpVortex. \\n\\nvec2 warpVortexInverse_1( vec2 pos, WarpParams warp ) {\\n\\n\\tfloat noise = fbmNoise3D_1( vec3( pos, warp.anim ), warp.basic );\\n\\n\\tnoise = 1.0 - abs( clamp( noise, -1.0, 1.0 ) );\\n\\n\\tfloat angle = noise * warp.rotation;\\n\\tfloat dist  = noise * warp.amplitude;\\n\\n\\treturn pos + vec2( sin( angle ), cos( angle ) ) * dist;\\n}\\n\\n//\\n// Wrapper functions so we can select from the functions at runtime, without having to know the suffix\\n// that is added by glslify to the 'require'd functions, which it does to avoid duplicate identifiers.\\n\\nvec2 warpRegular( vec2 pos, WarpParams warp )        { return warpRegular_0( pos, warp ); }\\nvec2 warpPolar( vec2 pos, WarpParams warp )          { return warpPolar_1( pos, warp ); }\\nvec2 warpVortex( vec2 pos, WarpParams warp )         { return warpVortex_0( pos, warp ); }\\nvec2 warpVortexInverse( vec2 pos, WarpParams warp )  { return warpVortexInverse_0( pos, warp ); }\\n\\nvec2 warpRegular2( vec2 pos, WarpParams warp )       { return warpRegular_1( pos, warp ); }\\nvec2 warpPolar2( vec2 pos, WarpParams warp )         { return warpPolar_0( pos, warp ); }\\nvec2 warpVortex2( vec2 pos, WarpParams warp )        { return warpVortex_1( pos, warp ); }\\nvec2 warpVortexInverse2( vec2 pos, WarpParams warp ) { return warpVortexInverse_1( pos, warp ); }\\n\\n//\\n\\nfloat clampZeroOne( float value ) {\\n\\treturn clamp( value, 0.0, 1.0 );\\n}\\n\\n//\\n\\nfloat mapToPaletteMinusOneToOne( float value ) {\\n\\treturn value / 2.0 + 0.5;\\t\\n}\\n\\n//\\n// Identity functions to switch off certain effects.\\n\\nfloat identity( float value ) {\\treturn value; }\\n\\nvec2 identity( vec2 value ) { return value; }\\n\\nvec2 identity( vec2 value, WarpParams warp ) { return value; }\\n\\n//\\n// Shader parameters\\n\\n// Regular noise parameters.\\nuniform NoiseParams u_noise;\\n\\n// Domain warping parameters.\\nuniform WarpParams u_warp;\\nuniform WarpParams u_warp2;\\n\\n// Texture that defines the palette.\\nuniform sampler2D u_paletteTexture;\\nuniform float     u_paletteOffset;     // offset for palette rotation animation\\n\\n// Fragment coordinates passed in from the vertex shader.\\nin vec2 fragCoord;\\n\\n// Output of this fragment shader.\\nout vec4 fragColor;\\n\\n//\\n\\nvoid main() { \\n\\n\\tvec2 pos = fragCoord.xy;\\n\\n\\tpos = WARP2_TRANSFORM_FUN( pos, u_warp2 );\\n\\tpos = WARP_TRANSFORM_FUN( pos, u_warp );\\n\\n\\tfloat n = fbmNoise3D_0( vec3( pos, u_noise.anim ), u_noise.basic ) * u_noise.amplitude;\\n\\t\\t\\t\\t\\t\\t\\n\\t// Adjust for differences in noise function range (-1..1 or 0..1).\\n\\tn = MAP_TO_PALETTE_FUN( n );\\n\\n\\t// Optionally clamp to 0..1\\n\\tn = NOISE_CLAMP_FUN( n );\\n\\n\\t// Actual color is defined by palette\\n\\tfragColor = texture( u_paletteTexture, vec2( n + u_paletteOffset, 0 ) );\\n}\"","/*\r\n2D fractal noise image generation and animation. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n\r\nimport MersenneTwister from 'mersennetwister';\r\nimport * as tinycolor from 'tinycolor2';\r\nimport * as _ from 'lodash';\r\nimport createShader from 'gl-shader';\r\nimport injectDefines from 'glsl-inject-defines';\r\n\r\nimport * as z42color from './color.js'; \r\nimport * as z42easing  from \"./easing.js\";\r\nimport * as z42glu from './glUtils.js'; \r\nimport * as z42glcolor from './glColor.js'; \r\n\r\nimport vertexShaderSrc from './glPlasmaVertex.glsl'\r\nimport fragShaderSrc from './glPlasmaFrag.glsl'\r\n\r\n//===================================================================================================================\r\n// This is the class for generating and animating a plasma. \r\n\r\nclass PlasmaFractal2D {\r\n\tconstructor( params ){\r\n\r\n\t\tthis._noiseSeed = params.noiseSeed;\r\n\t\tthis._warpSeed  = params.warpSeed;\r\n\t\tthis._warpSeed2 = params.warpSeed2;\r\n\t\tthis._options   = _.cloneDeep(params.options);\r\n\r\n\t\tthis._startTime = performance.now() / 1000;\r\n\r\n\t\tthis._initPalettes( params.colorSeed );\r\n\r\n\t\tthis._initCanvasGl( params.canvas );\r\n\t\tthis.resize( params.width, params.height, true );\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\r\n\t_initPalettes( colorSeed ) {\r\n\r\n\t\tthis._paletteRndColorCount = 2;\r\n\t\t\r\n\t\tthis._startPalette      = [];\r\n\t\tthis._nextPalette       = [];\r\n\t\tthis._currentPalette    = [];\r\n\r\n\t\tthis._grayScalePalette = [\r\n\t\t\t{   \r\n\t\t\t\tpos: 0.0,\r\n\t\t\t\tcolor: { r: 0, g: 0, b: 0, a: 1 },\r\n\t\t\t\teaseFun: z42easing.linear\r\n\t\t\t},\r\n\t\t\t{   \r\n\t\t\t\tpos: 1.0,\r\n\t\t\t\tcolor: { r: 255, g: 255, b: 255, a: 1 },\r\n\t\t\t\teaseFun: z42easing.linear\r\n\t\t\t}\t\t\t\r\n\t\t];\r\n\r\n\t\tthis._paletteCurrentFirstHue = 0;\r\n\r\n\t\tthis._colorRnd = new MersenneTwister( Math.trunc( colorSeed * 0xFFFFFFFF ) );\r\n\t\t\r\n\t\t// Generate initial palette.\r\n\t\tthis._startPalette = this._generatePalette( this._colorRnd.random() * 360 ); \r\n\t\t\r\n\t\tthis._isPaletteTransition = false;     // Palette currently transitioning to next palette?\r\n\t\tthis._paletteStartTime = this._startTime;  // Start time of current phase (constant or transition).\r\n\r\n\t\tthis._currentPaletteIsRepeat = null;\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\r\n\t_initCanvasGl( canvas ) {\r\n\t\tthis._canvas = canvas;\r\n\r\n\t\tconst gl = this._gl = canvas.getContext( \"webgl2\" );\r\n\r\n\t\t// Disable unused features\r\n\t\tgl.disable( gl.BLEND );\r\n\t\tgl.disable( gl.DEPTH_TEST );\r\n\t\tgl.depthMask( gl.FALSE );\r\n\t\tgl.stencilMask( gl.FALSE );\r\n\r\n\t\tthis._positionBuffer     = gl.createBuffer();\r\n\t\tthis._texCoordBuffer     = gl.createBuffer();\r\n\t\t\r\n\t\tthis._paletteTexture     = gl.createTexture();\r\n\t\t// Palette texture is 1-dimensional so we could use max. possible size for best quality.\r\n\t\t// I still like to have some control over this value, so I limit it anyway.\r\n\t\tthis._paletteTextureSize = Math.min( gl.getParameter( gl.MAX_TEXTURE_SIZE ), 32768 );\r\n\t\t\r\n\t\tthis._rebuildShaders();\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\r\n\t_rebuildShaders() {\r\n\t\r\n\t\tlet mapToPaletteFun = 'mapToPaletteMinusOneToOne';\r\n\t\tif( this._options.noise.noiseFunction == 'Cellular3D' ) {\r\n\t\t\tmapToPaletteFun = 'identity';\r\n\t\t}\r\n\r\n\t\tconst fragShaderSrcTransformed = injectDefines(fragShaderSrc, {\r\n\t\t\tBASE_NOISE_FUN     : this._options.noise.noiseFunction,\r\n\t\t\tNOISE_CLAMP_FUN    : this._options.noise.isClamp ? 'clampZeroOne' : 'identity',\r\n\t\t\tMAP_TO_PALETTE_FUN : mapToPaletteFun,\r\n\t\t\tWARP_NOISE_FUN     : this._options.warp.noiseFunction,\r\n\t\t\tWARP_TRANSFORM_FUN : this._options.warp.isEnabled ? this._options.warp.transformFunction : 'identity',\r\n\t\t\tWARP2_NOISE_FUN    : this._options.warp2.noiseFunction,\r\n\t\t\tWARP2_TRANSFORM_FUN: this._options.warp2.isEnabled ? `${this._options.warp2.transformFunction}2` : 'identity',\r\n\t\t});\r\n\r\n\t\t//console.log('vertexShaderSrc', vertexShaderSrc)\t\t\r\n\t\tconsole.log('fragShaderSrcTransformed: ', fragShaderSrcTransformed)\t\t\r\n\r\n\t\tif( this._shader ) {\r\n\t\t\tthis._shader.update( vertexShaderSrc, fragShaderSrcTransformed )\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._shader = createShader( this._gl, vertexShaderSrc, fragShaderSrcTransformed );\r\n\t\t}\r\n\r\n\t\t//console.log( \"uniforms:\", this._shader.uniforms );\r\n\r\n\t\tthis._updateStaticShaderData();\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Update shader data that normally doesn't change between frames. \r\n\r\n\t_updateStaticShaderData() {\r\n\t\t// Activate the pair of vertex and fragment shaders.\r\n\t\tthis._shader.bind();\r\n\r\n\t\tthis._updateShaderVar_coords();\r\n\t\tthis._updateShaderVar_scale();\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Update vertex shader variables for geometry and texture coordinates.\r\n\r\n\t_updateShaderVar_coords() {\r\n\r\n\t\tconst gl = this._gl;\r\n\r\n\t\t// (Re-)create and activate vertex array object (VAO) that records the following vertex buffer objects (VBO).\r\n\t\tif( this._vao ) gl.deleteVertexArray( this._vao );\r\n\t\tthis._vao = gl.createVertexArray();\r\n\r\n\t\tgl.bindVertexArray( this._vao );\r\n\r\n\t\t//--- Set a vertex buffer to store rectangle coordinates ---\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, this._positionBuffer );\r\n\t\t// Assign data to the buffer.\r\n\t\tz42glu.setBufferRectangle( gl, -1.0, -1.0, 2.0, 2.0 );\r\n\t\t// Tell the attribute how to get data out of the buffer (ARRAY_BUFFER)\r\n\t\tthis._shader.attributes.a_position.pointer(\r\n\t\t\tgl.FLOAT,   // the data is 32bit floats\r\n\t\t\tfalse,      // don't normalize the data\r\n\t\t\t0,          // 0 = move forward size * sizeof(type) each iteration to get the next position\r\n\t\t\t0           // start at the beginning of the buffer\r\n\t\t);\r\n\r\n\t\t//--- Set a vertex buffer to store texture coordinates ---\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, this._texCoordBuffer );\r\n\t\t// Assign data to the buffer.\r\n\t\tz42glu.setBufferRectangle( gl, -1.0, -1.0, 2.0, 2.0 );\r\n\t\t// Tell the attribute how to get data out of the buffer (ARRAY_BUFFER)\r\n\t\tthis._shader.attributes.a_texCoord.pointer(\r\n\t\t\tgl.FLOAT, // the data is 32bit floats\r\n\t\t\tfalse,    // don't normalize the data\r\n\t\t\t0,        // 0 = move forward size * sizeof(type) each iteration to get the next position\r\n\t\t\t0         // start at the beginning of the buffer\r\n\t\t);\r\n\r\n\t\t// We are finished setting up the VAO. It is not required, but considered good practice to\r\n\t\t// set the current VAO to null.\r\n\t\tgl.bindVertexArray( null ); \r\n\t}\t\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Update vertex shader variable to adjust for canvas aspect ratio and orientation.\r\n\r\n\t_updateShaderVar_scale() {\r\n\t\tconst width  = this._canvas.width;\r\n\t\tconst height = this._canvas.height;\r\n\t\r\n\t\tif( width > height ){\r\n\t\t\tif( height > 0 )\r\n\t\t\t\tthis._shader.uniforms.u_scale = [ 1.0, width / height ];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif( width > 0 )\r\n\t\t\t\tthis._shader.uniforms.u_scale = [ height / width, 1.0 ];\r\n\t\t}\r\n\t}\r\n\r\n\t//===================================================================================================================\r\n\t// Public methods\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Resize the canvas, update WebGL viewport and scale.\r\n\r\n\tresize( width, height, force = false ) {\r\n\t\tif( width == this._canvas.width && height == this._canvas.height && ! force ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif( width <= 0 || height <= 0 )\r\n\t\t\treturn;\r\n\r\n\t\twidth  = Math.trunc( width );\r\n\t\theight = Math.trunc( height );\r\n\r\n\t\tthis._canvas.width  = width;\r\n\t\tthis._canvas.height = height;\r\n\r\n\t\tthis._gl.viewport( 0, 0, width, height );\r\n\r\n\t\tthis._updateShaderVar_scale();\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Draw animation frame in given 32-bit RGBA image buffer.\r\n\r\n\tdrawAnimationFrame() {\r\n\r\n\t\t// Current time in seconds since start of plasma.\r\n\t\tconst time = performance.now() / 1000.0 - this._startTime;\r\n\r\n\t\tconst gl = this._gl;\r\n\r\n\t\t// Tell WebGL to use our program (pair of shaders).\r\n\t\tthis._shader.bind();\r\n\r\n\t\t// Set noise parameters \r\n\r\n\t\tthis.setShaderArgs_noise( 'u_noise', this._options.noise, this._options.noiseAnim, this._noiseSeed, time );\r\n\r\n\t\t// Set domain warp parameters \r\n\r\n\t\tif( this._options.warp.isEnabled ) {\r\n\t\t\tthis.setShaderArgs_warp( 'u_warp',  this._options.warp,  this._options.warpAnim,  this._warpSeed,  time );\r\n\t\t}\r\n\t\tif( this._options.warp2.isEnabled ) {\r\n\t\t\tthis.setShaderArgs_warp( 'u_warp2', this._options.warp2, this._options.warpAnim2, this._warpSeed2, time );\r\n\t\t}\r\n\r\n\t\t// Apply palette options  \r\n\r\n\t\tthis.setShaderArgs_palette( time );\r\n\r\n\t\t// Render  \r\n\t\t\r\n\t\t// Clear the canvas.\r\n\t\tgl.clearColor( 0, 0, 0, 0 );\r\n\t\tgl.clear( gl.COLOR_BUFFER_BIT) ;\r\n\t\t\r\n\t\t// Bind the attribute/buffer set we want.\r\n\t\tgl.bindVertexArray( this._vao );\r\n\r\n\t\t// Draw the rectangle from the vertex and texture coordinates buffers.\r\n\t\tgl.drawArrays( gl.TRIANGLES, 0, 6 );\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Set shader arguments for base noise.\r\n\r\n\tsetShaderArgs_noise( uniformName, warpOpt, warpAnimOpt, warpSeed, time ) {\r\n\r\n\t\tconst uf = this._shader.uniforms[ uniformName ];\r\n\r\n\t\tuf.basic.octaves = Math.trunc(this._options.noise.octaves);\r\n\t\tuf.basic.octavesFract = this._options.noise.octaves % 1;\r\n\t\tuf.basic.frequency = this._options.noise.frequency / 2;\r\n\t\tuf.basic.gain = this._options.noise.gain;\r\n\t\tuf.basic.lacunarity = this._options.noise.lacunarity;\r\n\t\tuf.basic.angle = this._options.noise.angle * 2 * Math.PI / 360;\r\n\t\tuf.amplitude = this._options.noise.amplitude;\r\n\r\n\t\t// Set parameters for noise animation.\r\n\t\tlet anim = this._noiseSeed * 50.0;\r\n\t\tlet turbulence = 1.0;\r\n\r\n\t\tif (this._options.noiseAnim.isEnabled) {\r\n\t\t\tanim += time * this._options.noiseAnim.noiseSpeed / 3;\r\n\t\t\tturbulence = this._options.noiseAnim.turbulence;\r\n\t\t}\r\n\r\n\t\tuf.anim = anim;\r\n\t\tuf.basic.turbulence = turbulence;\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Set shader arguments for domain warping.\r\n\r\n\tsetShaderArgs_warp( uniformName, warpOpt, warpAnimOpt, warpSeed, time ) {\r\n\r\n\t\tconst uf = this._shader.uniforms[ uniformName ];\r\n\r\n\t\tuf.basic.octaves = Math.trunc( warpOpt.octaves );\r\n\t\tuf.basic.octavesFract = warpOpt.octaves % 1;\r\n\t\tuf.basic.frequency = warpOpt.frequency * this._options.noise.frequency;\r\n\t\tuf.basic.gain = warpOpt.gain;\r\n\t\tuf.basic.lacunarity = warpOpt.lacunarity;\r\n\t\tuf.amplitude = warpOpt.amplitude * 0.01;\r\n\t\tuf.rotation = warpOpt.rotation * Math.PI;\r\n\r\n\t\tlet anim = warpSeed * 50.0;\r\n\t\tlet turbulence = 1.0;\r\n\r\n\t\tif( warpAnimOpt.isEnabled ) {\r\n\t\t\tanim += time * warpAnimOpt.noiseSpeed / 3;\r\n\t\t\tturbulence = warpAnimOpt.turbulence;\r\n\t\t}\r\n\r\n\t\tuf.anim = anim;\r\n\t\tuf.basic.turbulence = turbulence;\r\n\t}\t\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Set shader arguments for palette and set palette texture.\r\n\r\n\tsetShaderArgs_palette( time ) {\r\n\r\n\t\tconst gl = this._gl;\r\n\r\n\t\tif( this._options.paletteAnim.isRotaEnabled && ! this._options.noise.isClamp ) {\r\n\t\t\tconst sizeFactor = this._paletteTextureSize / 4096;\r\n\t\t\tthis._shader.uniforms.u_paletteOffset = time * this._options.paletteAnim.rotaSpeed * sizeFactor;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._shader.uniforms.u_paletteOffset = 0.0;\r\n\t\t}\r\n\r\n\t\t// Tell the shader which texture units to use.\r\n\t\tthis._shader.uniforms.u_paletteTexture = 0;\r\n\r\n\t\tlet paletteToUse = this._grayScalePalette;\r\n\t\tif( ! this._options.palette.isGrayScale ) {\t\r\n\t\t\tpaletteToUse = this._animatePalette();\r\n\t\t}\r\n\r\n\t\tgl.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.bindTexture( gl.TEXTURE_2D, this._paletteTexture );\r\n\r\n\t\t// If palette has changed, render it into texture.\r\n\r\n\t\tconst paletteIsRepeat = ! this._options.noise.isClamp;\r\n\r\n\t\tif( ! _.isEqual([ this._currentPalette, this._currentPaletteIsRepeat ],\r\n\t\t\t\t\t\t[ paletteToUse,         paletteIsRepeat  ]) ) {\r\n\r\n\t\t\tthis._currentPalette = _.cloneDeep( paletteToUse );\r\n\t\t\tthis._currentPaletteIsRepeat = paletteIsRepeat;\t\r\n\r\n\t\t\tz42glcolor.setPaletteTexture( gl, this._paletteTextureSize, paletteToUse, paletteIsRepeat );\r\n\t\t}\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Get / set noise options.\r\n\r\n\tget options$noise()\t{\r\n\t\treturn _.cloneDeep( this._options.noise );\r\n\t}\r\n\r\n\tset options$noise( opt ) {\r\n\r\n\t\tconst needRebuildShaders = ! _.isEqual(\r\n\t\t\t[ this._options.noise.noiseFunction, this._options.noise.isClamp ], \r\n\t\t\t[ opt.noiseFunction,                 opt.isClamp ]);\r\n\r\n\t\tthis._options.noise = _.cloneDeep( opt );\r\n\r\n\t\tif( needRebuildShaders ) {\r\n\t\t\tthis._rebuildShaders();\r\n\t\t}\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Get / set domain warp options.\r\n\r\n\tget options$warp() {\r\n\t\treturn _.cloneDeep( this._options.warp );\r\n\t}\r\n\r\n\tset options$warp( opt )\t{\r\n\r\n\t\tconst needRebuildShaders = ! _.isEqual( \r\n\t\t\t[ this._options.warp.isEnabled, this._options.warp.noiseFunction, this._options.warp.transformFunction ], \r\n\t\t\t[ opt.isEnabled               , opt.noiseFunction,                opt.transformFunction                ] \r\n\t\t);\r\n\r\n\t\tthis._options.warp = _.cloneDeep( opt );\r\n\r\n\t\tif( needRebuildShaders ) {\r\n\t\t\tthis._rebuildShaders();\r\n\t\t}\r\n\t}\r\n\r\n\tget options$warp2() {\r\n\t\treturn _.cloneDeep(this._options.warp2);\r\n\t}\r\n\r\n\tset options$warp2(opt) {\r\n\r\n\t\tconst needRebuildShaders = !_.isEqual(\r\n\t\t\t[this._options.warp2.isEnabled, this._options.warp2.noiseFunction, this._options.warp2.transformFunction],\r\n\t\t\t[opt.isEnabled, opt.noiseFunction, opt.transformFunction]\r\n\t\t);\r\n\r\n\t\tthis._options.warp2 = _.cloneDeep(opt);\r\n\r\n\t\tif (needRebuildShaders) {\r\n\t\t\tthis._rebuildShaders();\r\n\t\t}\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Get / set palette options.\r\n\r\n\tget options$palette() {\r\n\t\treturn _.cloneDeep( this._options.palette );\r\n\t}\r\n\r\n\tset options$palette( opt ) {\r\n\t\tthis._options.palette = _.cloneDeep( opt );\r\n\r\n\t\t// (Re-)generate the palette without changing the current hue.\r\n\t\tthis._startPalette = this._generatePalette( this._paletteCurrentFirstHue );\r\n\t\t\r\n\t\t// We reset the transition animation for simplicity.\r\n\t\tthis._isPaletteTransition = false;\r\n\t\tthis._paletteStartTime = performance.now() / 1000;\t\t\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Get / set animation options.\r\n\r\n\tget options$paletteAnim() {\r\n\t\treturn _.cloneDeep( this._options.paletteAnim );\r\n\t}\r\n\r\n\tset options$paletteAnim( opt ) {\r\n\t\tif( opt.transitionDelay != this._options.paletteAnim.transitionDelay ||\r\n\t\t\topt.transitionDuration != this._options.paletteAnim.transitionDuration )\r\n\t\t{\r\n\t\t\t// reset plaette transition animation to avoid some issues\r\n\t\t\tthis._isPaletteTransition = false;  \r\n\t\t\tthis._paletteStartTime = performance.now() / 1000;\r\n\t\t}\r\n\t\t\r\n\t\tthis._options.paletteAnim = _.cloneDeep( opt );\r\n\t\t// Values will be used when drawing next animation frame.\r\n\t}\r\n\r\n\tget options$noiseAnim()\t{\r\n\t\treturn _.cloneDeep( this._options.noiseAnim );\r\n\t}\t\r\n\r\n\tset options$noiseAnim( opt ) {\r\n\t\tthis._options.noiseAnim = _.cloneDeep( opt );\r\n\t}\r\n\r\n\tget options$warpAnim()\t{\r\n\t\treturn _.cloneDeep( this._options.warpAnim );\r\n\t}\t\r\n\r\n\tset options$warpAnim( opt ) {\r\n\t\tthis._options.warpAnim = _.cloneDeep( opt );\r\n\t}\r\n\r\n\tget options$warpAnim2() {\r\n\t\treturn _.cloneDeep(this._options.warpAnim2);\r\n\t}\r\n\r\n\tset options$warpAnim2(opt) {\r\n\t\tthis._options.warpAnim2 = _.cloneDeep(opt);\r\n\t}\r\n\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\t// Rotate and cross-fade the palette.\r\n\r\n\t_animatePalette() {\r\n\r\n\t\tconst curTime         = performance.now() / 1000;\r\n\t\tconst paletteDuration = curTime - this._paletteStartTime;\t\t\r\n\t\r\n\t\tif( this._isPaletteTransition ) {\r\n\t\t\tif( paletteDuration <= this._options.paletteAnim.transitionDuration ) {\r\n\t\t\t\t// Still in transition phase.\r\n\t\t\t\tconst alpha = paletteDuration / this._options.paletteAnim.transitionDuration;\r\n\t\t\t\treturn z42color.blendPaletteDef( this._startPalette, this._nextPalette, alpha );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Transition phase finished. Start the constant phase.\r\n\t\t\t\tthis._isPaletteTransition = false;\r\n\t\t\t\tthis._paletteStartTime = curTime;\r\n\t\t\t\t\r\n\t\t\t\t// swap this._startPalette, this._nextPalette\r\n\t\t\t\t[ this._startPalette, this._nextPalette ] = [ this._nextPalette, this._startPalette ];\r\n\r\n\t\t\t\treturn this._startPalette;\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif( paletteDuration > this._options.paletteAnim.transitionDelay ) {\r\n\t\t\t\t// Constant phase finished. Start the transition phase.\r\n\t\t\t\tthis._isPaletteTransition = true;\r\n\t\t\t\tthis._paletteStartTime = curTime;\r\n\r\n\t\t\t\tthis._nextPalette = this._generatePalette( this._colorRnd.random() * 360 ); \r\n\t\t\t}\r\n\t\t\t// else still in constant phase. Nothing to do.\r\n\r\n\t\t\treturn this._startPalette;\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t//-------------------------------------------------------------------------------------------------------------------\r\n\r\n\t_generatePalette( firstHue )\r\n\t{\r\n\t\tthis._paletteCurrentFirstHue = firstHue;\r\n\r\n\t\tif( this._options.palette.isCustom )\r\n\t\t\treturn this._generatePaletteCustom( firstHue );\r\n\t\telse\r\n\t\t\treturn this._generatePaletteRandom( firstHue );\r\n\t}\r\n\r\n\t// Generate palette from custom palette options.\r\n\r\n\t_generatePaletteCustom( firstHue )\t{\r\n\t\t// Create a cloned palette with ease function names resolved to actual functions.\r\n\t\tconst result = this._options.palette.customPalette.map( item => {\r\n\t\t\tconst res = _.cloneDeep( item );\r\n\t\t\tres.easeFun = z42easing[ res.easeFun ] || z42easing.linear \r\n\t\t\treturn res;\r\n\t\t});\r\n\r\n\t\tif( this._options.palette.isCustomPaletteAnimated ) {\r\n\t\t\tfor( let item of result ){\r\n\t\t\t\tlet hsv = tinycolor( item.color ).toHsv();\r\n\t\t\t\thsv.h = ( hsv.h + firstHue ) % 360;\r\n\t\t\t\titem.color = tinycolor( hsv ).toRgb();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Generate a beautiful loopable palette with random start color. Subsequent colors will be generated by adding\r\n\t// golden ratio to hue value, which creates nices contrasts.\r\n\t\r\n\t_generatePaletteRandom( firstHue )\t{\r\n\t\tlet result = [];\r\n\r\n\t\tlet colorHsv = { \r\n\t\t\th : firstHue,   \r\n\t\t\ts : this._options.palette.saturation, \r\n\t\t\tv : this._options.palette.brightness,\r\n\t\t\ta : 1  // alpha\r\n\t\t};\r\n\r\n\t\tconst bgToFgFunction = z42easing[ this._options.palette.easeFunctionBgToFg ];\r\n\t\tconst fgToBgFunction = z42easing[ this._options.palette.easeFunctionFgToBg ];\r\n\t\t\r\n\t\tconst subRange = 1.0 / this._paletteRndColorCount;\r\n\t\tconst subRangeHalf = subRange / 2;\r\n\r\n\t\tfor( let i = 0; i < this._paletteRndColorCount; ++i ){\r\n\t\t\tconst colorRGBA = z42color.nextGoldenRatioColorRGBA( colorHsv ); \r\n\t\t\r\n\t\t\tresult.push({\r\n\t\t\t\tpos: i * subRange,\r\n\t\t\t\tcolor: { ...this._options.palette.bgColor },\r\n\t\t\t\teaseFun: bgToFgFunction || z42easing.linear \r\n\t\t\t});\r\n\t\t\tresult.push({\r\n\t\t\t\tpos: i * subRange + subRangeHalf,\r\n\t\t\t\tcolor: colorRGBA,\r\n\t\t\t\teaseFun: fgToBgFunction || z42easing.linear \r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\t\r\n}\r\n\r\n//-------------------------------------------------------------------------------------------------------------------\r\n\r\nexport {\r\n\tPlasmaFractal2D\r\n}","<!--\nCopyright (c) 2019 zett42.\nhttps://github.com/zett42/plasmafractal-gl\n\nMIT License\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE. \n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nMain component\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\n\n<template>\n    <div id=\"app\">\n        <b-button \n            id=\"button-options-dialog\" \n            v-b-modal.z42opt-dialog \n            title=\"Plasma Options (Key 'o')\"></b-button>\n        \n        <z42opt-dialog \n            id=\"z42opt-dialog\" \n            :optData=\"optData\" \n            :optDesc=\"optDesc\" \n            :optView=\"optView\" \n            @opt-modified=\"onModified( $event )\"\n        />\n\n        <div id=\"fps-info\" v-if=\"optData.info.showFps\"></div>        \n\n       \t<canvas id=\"plasmaCanvas\" class=\"plasma\">PlasmaFractal</canvas>\n    </div>\n</template>\n\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\n\n<script>\nimport * as plasmaOpt from \"./plasmaOptions\";\nimport * as z42optUtil from \"./components/optionsUtils\";\nimport * as z42plasma from \"./components/glPlasma.js\";\nimport * as _ from \"lodash\";\n\nconst m_options = z42optUtil.mergeDefaultsWithUrlParams( plasmaOpt.optionsDescriptor, window.location.search );\nlet m_canvas = null;\nlet m_plasma = null;\nlet m_optionsButtonFadeoutTimer = null;\n\nlet m_lastFpsTime = performance.now();\nlet m_frameCount = 0;\n\n//\n\nexport default {\n    name: \"app\",\n\n    data() {\n        // The data to provide to z42opt-dialog component.\n        return {\n            optData: m_options,                      // Option values (variable).\n            optDesc: plasmaOpt.optionsDescriptor,    // Options meta data (constant).\n            optView: plasmaOpt.optionsView,          // Overall GUI structure (constant).\n        };\n    },\n    mounted() { \n        m_canvas = document.getElementById( \"plasmaCanvas\" );\n\n        m_plasma = new z42plasma.PlasmaFractal2D({ \n            canvas    : m_canvas,\n            colorSeed : Math.random(),\n            noiseSeed : Math.random(),\n            warpSeed  : Math.random(),\n            warpSeed2 : Math.random(),\n            options   : m_options,\n            width     : Math.round( window.innerWidth  * window.devicePixelRatio ),\n            height    : Math.round( window.innerHeight * window.devicePixelRatio ),\n        });\n\n        wireUpEventListeners();\n\n        requestAnimationFrame( animate );\n    },\n    methods: {\n        // Called when an option has been changed in the UI.\n        onModified( event ) {\n            _.set( m_options, event.path, event.value );\n\n            const groupName = event.path.split( \".\" )[ 0 ];\n            m_plasma[ \"options$\" + groupName ] = m_options[ groupName ];\n        },\n    },\n};\n\n//\n\nfunction wireUpEventListeners() {\n    // On window resize, resize the canvas to fill browser window dynamically.\n    // Use debounce() to avoid costly calculations while the window size is in flux.\n    window.addEventListener( \"resize\", _.debounce( resizePlasmaToWindowSize, 150 ) );\n\n    // When browser back/forward button gets pressed, reload the state that onOptionsDialogClose() pushed to the history. \n    window.addEventListener( \"popstate\", () => window.location.reload() );\n\n    // Toggle visibility of options button: fullscreen will hide it, mouse interaction will show it again.\n    document.addEventListener( \"fullscreenchange\", updateOptionsButtonVisibility );\n    document.addEventListener( \"mousemove\", updateOptionsButtonVisibility );\n    document.addEventListener( \"click\", updateOptionsButtonVisibility );\n\n    // Handle keyboard shortcuts\n    document.addEventListener( \"keydown\", onKeyDown );\n\n    // Toggle fullscreen by double-click on canvas.\n    m_canvas.addEventListener( \"dblclick\", toggleFullscreen );\n}\n\n//\n\nfunction animate() {\n    m_plasma.drawAnimationFrame();\n\n    showFps();\n\n\trequestAnimationFrame( animate );\n}\n\n//\n\nfunction showFps() {\n    ++m_frameCount;\n\n    let now = performance.now();\n    if( now - m_lastFpsTime >= 1000 ) {\n        let fpsElem = document.getElementById( \"fps-info\" );\n        if( fpsElem ) {\n            fpsElem.textContent = m_frameCount.toFixed( 0 ) + ' fps';\n        }\n\n        m_lastFpsTime = now;\n        m_frameCount = 0;\n    }\n}\n\n//\n\nfunction resizePlasmaToWindowSize(){\n\n\tconst width  = Math.round( window.innerWidth  * window.devicePixelRatio );\n\tconst height = Math.round( window.innerHeight * window.devicePixelRatio );\n\n\tm_plasma.resize( width, height );\n}\n\n//\n\nfunction toggleFullscreen(){\n\tif( document.documentElement.requestFullscreen ){\n\t\tif( document.fullscreenElement )\n\t\t\tdocument.exitFullscreen();\n\t\telse\n\t\t\tdocument.documentElement.requestFullscreen();\n\t}\n}\n\n//\n\nfunction updateOptionsButtonVisibility(){\n\tdocument.getElementById( \"button-options-dialog\").style.opacity = 1.0;\n\n\tif( m_optionsButtonFadeoutTimer ){\n\t\tclearTimeout( m_optionsButtonFadeoutTimer );\n\t}\n\n\tif( document.fullscreenElement ){\n\t\t// In fullscreen mode, options button will be hidden after timeout.\n\t\tm_optionsButtonFadeoutTimer = setTimeout( \n\t\t\t() => document.getElementById( \"button-options-dialog\" ).style.opacity = 0, \n\t\t\t2000 \n\t\t);\n\t}\n}\n\n//\n\nfunction onKeyDown( event ){\n\tif( ! event.isComposing ) {\n\t\tswitch( event.keyCode ){\n\t\t\tcase \"O\".charCodeAt( 0 ): \n\t\t\t\t// toggle options dialog\n\t\t\t\tdocument.getElementById( \"button-options-dialog\" ).click(); \n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6bdb7720&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport \"./plugins/bootstrap-vue\";\n\nimport \"./registerOptComp\";\nimport App from \"./App.vue\";\n\nimport \"./App.scss\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{attrs:{\"label\":_vm.optDesc.$attrs.title + ': ' + _vm.displayValue,\"label-for\":_vm.id,\"disabled\":_vm.disabled}},[_c('div',{staticClass:\"z42opt-range\",attrs:{\"id\":_vm.id,\"disabled\":_vm.disabled}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOption UI components. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<b-form-group\r\n\t\t:label=\"optDesc.$attrs.title + ': ' + displayValue\"\r\n\t\t:label-for=\"id\"\r\n\t\t:disabled=\"disabled\"\r\n\t\t>\r\n\t\t<!-- Mounting point for nouislider -->\r\n\t\t<div\r\n\t\t\t:id=\"id\" \r\n\t\t\t:disabled=\"disabled\"\r\n\t\t\tclass=\"z42opt-range\"\r\n\t\t\t>\r\n\t\t</div>\r\n\t</b-form-group>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport * as z42opt from \"./optionsDescriptor.js\"\r\nimport noUiSlider from \"nouislider\";\r\nimport 'nouislider/distribute/nouislider.css';\r\n\r\n// Pattern for private class members: https://stackoverflow.com/a/33533611/7571258\r\nconst privates = new WeakMap();\r\n\r\nexport default {\r\n\tname: \"z42opt-range\", \r\n\tinheritAttrs: false,\r\n\r\n\tprops: { \r\n\t\tid:       { type: String, required: true },\r\n\t\tvalue:    { type: Number, required: true },\r\n\t\toptDesc:  { type: z42opt.Option, required: true }, \r\n\t\tdisabled: { type: Boolean, required: false, default: false },\r\n\t},\r\n\tmounted() {\r\n\t\t// Define private variables of this component (non-reactive!)\r\n\t\tprivates.set( this, {\r\n\t\t\tsliderValue: this.value\r\n\t\t});\r\n\r\n\t\tconst sliderElem = this.getSliderElement();\r\n\t\tnoUiSlider.create( sliderElem, this.createSliderConfig() );\r\n\r\n\t\tconst eventName = this.optDesc.$attrs.isSlow ? \"change\" : \"slide\";\r\n\r\n\t\t// Using arrow function forwarder so onSlide() gets 'this' context of component instead of noUiSlider.\r\n\t\tsliderElem.noUiSlider.on( eventName, ( ...args ) => this.onSlide( ...args ) );\r\n\t},\r\n\tcomputed: {\r\n\t\tdisplayValue(){ return this.optDesc.$displayValue( this.value ); }\r\n\t},\r\n\tmethods: {\r\n\t\tgetSliderElement() {\r\n\t\t\treturn document.getElementById( this.id );\r\n\t\t},\r\n\t\t\r\n\t\tcreateSliderConfig(){\r\n\t\t\tlet step = 1;\r\n\t\t\tif( this.optDesc.$attrs.step != null ){\r\n\t\t\t\tstep = this.optDesc.$attrs.step;\r\n\t\t\t}\r\n\t\t\telse if( this.optDesc.$attrs.maxDecimals != null ){\r\n\t\t\t\tstep = 1 / ( Math.pow( 10, this.optDesc.$attrs.maxDecimals ) );\r\n\t\t\t}\r\n\r\n\t\t\tlet range = {\r\n\t\t\t\tmin: this.optDesc.$attrs.min,\r\n\t\t\t\tmax: this.optDesc.$attrs.max,\r\n\t\t\t};\r\n\r\n\t\t\tif( this.optDesc.$attrs.isScale ){\r\n\t\t\t\t// Make the slider non-linear to make it easier to select values below 1.\r\n\t\t\t\tlet percent = 50;\r\n\t\t\t\tif( this.optDesc.$attrs.scaleNormalPos != null ){\r\n\t\t\t\t\tpercent = this.optDesc.$attrs.scaleNormalPos * 100;\r\n\t\t\t\t}\r\n\t\t\t\trange[ `${percent}%` ] = 1.0;\r\n\t\t\t}\r\n\r\n\t\t\tconst tooltipFormatter = { to: val => this.optDesc.$displayValue( val ) };\r\n\r\n\t\t\treturn {\r\n\t\t\t\tstart: [ this.value ],\r\n\t\t\t\tstep: step,\r\n\t\t\t\trange: range,\r\n\t\t\t\tbehaviour: \"unconstrained\",  // so touch scrolling of dialog doesn't move slider\r\n\t\t\t\ttooltips: this.optDesc.$attrs.isSlow ? tooltipFormatter : false,\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tonSlide( values, handleIndex, valuesRaw, tap, handleOffs ){\r\n\t\t\tconst priv = privates.get( this );\r\n\t\t\tconst newValue = valuesRaw[ 0 ];\r\n\r\n\t\t\tif( priv.sliderValue !== newValue ){\r\n\t\t\t\t// Store the raw slider value which is the only way to obtain it.\r\n\t\t\t\tpriv.sliderValue = newValue;  \r\n\r\n\t\t\t\t// emit as \"input\" event to make it compatible with v-model\r\n\t\t\t\tthis.$emit( \"input\", newValue );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tvalue( newValue, oldValue ) {\r\n\t\t\tconst priv = privates.get( this );\r\n\r\n\t\t\t// Make sure the change actually originated from the outside instead from the inside of \r\n\t\t\t// this component (i. e. when slider was moved by user).\r\n\t\t\tif( priv.sliderValue !== newValue ) {\r\n\t\t\t\tpriv.sliderValue = newValue;\r\n\r\n\t\t\t\tconst sliderElem = this.getSliderElement();\r\n\t\t\t\tsliderElem.noUiSlider.set([ newValue ]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-range.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-range.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-range.vue?vue&type=template&id=4e7c73ec&\"\nimport script from \"./z42opt-range.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-range.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var map = {\n\t\"./z42opt-check.vue\": \"0388\",\n\t\"./z42opt-color.vue\": \"2465\",\n\t\"./z42opt-container.vue\": \"11f2\",\n\t\"./z42opt-dialog.vue\": \"4af1\",\n\t\"./z42opt-palette.vue\": \"0954\",\n\t\"./z42opt-range.vue\": \"93b8\",\n\t\"./z42opt-select.vue\": \"4fc5\",\n\t\"./z42opt-tabs.vue\": \"fc79\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"b8d7\";","/**\n * This is a modified version of the code from: https://github.com/josephg/noisejs (perlin.js)\n * Changes:\n * - Converted to ES6 classes, to be able to create multiple independent instances of noise generators.\n * - Made compatible with web workers by using the 'self' instead of the 'this' context for registering\n *   the module.\n * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n *\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\nclass Grad {\n  constructor(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n  }\n\n  dot2(x, y) {\n    return this.x * x + this.y * y;\n  }\n\n  dot3(x, y, z) {\n    return this.x * x + this.y * y + this.z * z;\n  }\n}\n\nfunction fade(t) {\n  return t * t * t * (t * (t * 6 - 15) + 10);\n}\n\nfunction lerp(a, b, t) {\n  return (1 - t) * a + t * b;\n}  \n\nconst grad3 = [new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),\n  new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),\n  new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)];\n\nconst p = [151, 160, 137, 91, 90, 15,\n  131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\n  190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\n  88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\n  77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\n  102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\n  135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\n  5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\n  223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\n  129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\n  251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\n  49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\n  138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nconst F2 = 0.5 * (Math.sqrt(3) - 1);\nconst G2 = (3 - Math.sqrt(3)) / 6;\n\nconst F3 = 1 / 3;\nconst G3 = 1 / 6;\n\n//----------------------------------------------------------------------------------------------------\n// Noise generator class.\n\nexport default class {\n  constructor(seed){\n\n    // To remove the need for index wrapping, double the permutation table length\n    this._perm = new Array(512);\n    this._gradP = new Array(512);\n\n    this.seed = seed;\n  } \n\n  // This isn't a very good seeding function, but it works ok. It supports 2^16\n  // different seed values. Write something better if you need more seeds.\n  set seed(seed) {\n    if (seed === this._seed) {\n      return;\n    }\n\n    this._seed = seed;\n\n    if (seed > 0 && seed < 1) {\n      // Scale the seed out\n      seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if (seed < 256) {\n      seed |= seed << 8;\n    }\n\n    for (let i = 0; i < 256; i++) {\n      let v;\n      if (i & 1) {\n        v = p[i] ^ (seed & 255);\n      } else {\n        v = p[i] ^ ((seed >> 8) & 255);\n      }\n\n      this._perm[i] = this._perm[i + 256] = v;\n      this._gradP[i] = this._gradP[i + 256] = grad3[v % 12];\n    }\n  }\n\n  get seed() { return this._seed; }\n\n  // 2D simplex noise\n  simplex2(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin + yin) * F2; // Hairy factor for 2D\n    var i = Math.floor(xin + s);\n    var j = Math.floor(yin + s);\n    var t = (i + j) * G2;\n    var x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin - j + t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if (x0 > y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n      i1 = 1; j1 = 0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n      i1 = 0; j1 = 1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = this._gradP[i + this._perm[j]];\n    var gi1 = this._gradP[i + i1 + this._perm[j + j1]];\n    var gi2 = this._gradP[i + 1 + this._perm[j + 1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0 * x0 - y0 * y0;\n    if (t0 < 0) {\n      n0 = 0;\n    } else {\n      t0 *= t0;\n      n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1 * x1 - y1 * y1;\n    if (t1 < 0) {\n      n1 = 0;\n    } else {\n      t1 *= t1;\n      n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2 * x2 - y2 * y2;\n    if (t2 < 0) {\n      n2 = 0;\n    } else {\n      t2 *= t2;\n      n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n  }\n\n  // 3D simplex noise\n  simplex3(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin + yin + zin) * F3; // Hairy factor for 2D\n    var i = Math.floor(xin + s);\n    var j = Math.floor(yin + s);\n    var k = Math.floor(zin + s);\n\n    var t = (i + j + k) * G3;\n    var x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin - j + t;\n    var z0 = zin - k + t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if (x0 >= y0) {\n      if (y0 >= z0) { i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 1; k2 = 0; }\n      else if (x0 >= z0) { i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 0; k2 = 1; }\n      else { i1 = 0; j1 = 0; k1 = 1; i2 = 1; j2 = 0; k2 = 1; }\n    } else {\n      if (y0 < z0) { i1 = 0; j1 = 0; k1 = 1; i2 = 0; j2 = 1; k2 = 1; }\n      else if (x0 < z0) { i1 = 0; j1 = 1; k1 = 0; i2 = 0; j2 = 1; k2 = 1; }\n      else { i1 = 0; j1 = 1; k1 = 0; i2 = 1; j2 = 1; k2 = 0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = this._gradP[i + this._perm[j + this._perm[k]]];\n    var gi1 = this._gradP[i + i1 + this._perm[j + j1 + this._perm[k + k1]]];\n    var gi2 = this._gradP[i + i2 + this._perm[j + j2 + this._perm[k + k2]]];\n    var gi3 = this._gradP[i + 1 + this._perm[j + 1 + this._perm[k + 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n    if (t0 < 0) {\n      n0 = 0;\n    } else {\n      t0 *= t0;\n      n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n    if (t1 < 0) {\n      n1 = 0;\n    } else {\n      t1 *= t1;\n      n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n    if (t2 < 0) {\n      n2 = 0;\n    } else {\n      t2 *= t2;\n      n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n    if (t3 < 0) {\n      n3 = 0;\n    } else {\n      t3 *= t3;\n      n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n  }\n\n  // 2D Perlin Noise\n  perlin2(x, y) {\n    // Find unit grid cell containing point\n    let X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    const n00 = this._gradP[X + this._perm[Y]].dot2(x, y);\n    const n01 = this._gradP[X + this._perm[Y + 1]].dot2(x, y - 1);\n    const n10 = this._gradP[X + 1 + this._perm[Y]].dot2(x - 1, y);\n    const n11 = this._gradP[X + 1 + this._perm[Y + 1]].dot2(x - 1, y - 1);\n\n    // Compute the fade curve value for x\n    const u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n      lerp(n00, n10, u),\n      lerp(n01, n11, u),\n      fade(y));\n  }\n\n  // 3D Perlin Noise\n  perlin3(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = this._gradP[X + this._perm[Y + this._perm[Z]]].dot3(x, y, z);\n    var n001 = this._gradP[X + this._perm[Y + this._perm[Z + 1]]].dot3(x, y, z - 1);\n    var n010 = this._gradP[X + this._perm[Y + 1 + this._perm[Z]]].dot3(x, y - 1, z);\n    var n011 = this._gradP[X + this._perm[Y + 1 + this._perm[Z + 1]]].dot3(x, y - 1, z - 1);\n    var n100 = this._gradP[X + 1 + this._perm[Y + this._perm[Z]]].dot3(x - 1, y, z);\n    var n101 = this._gradP[X + 1 + this._perm[Y + this._perm[Z + 1]]].dot3(x - 1, y, z - 1);\n    var n110 = this._gradP[X + 1 + this._perm[Y + 1 + this._perm[Z]]].dot3(x - 1, y - 1, z);\n    var n111 = this._gradP[X + 1 + this._perm[Y + 1 + this._perm[Z + 1]]].dot3(x - 1, y - 1, z - 1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n      lerp(\n        lerp(n000, n100, u),\n        lerp(n001, n101, u), w),\n      lerp(\n        lerp(n010, n110, u),\n        lerp(n011, n111, u), w),\n      v);\n  }\n\n} //class\n","/*\n2D fractal noise generation. Copyright (c) 2019 zett42.\nhttps://github.com/zett42/plasmafractal-gl\n\nMIT License\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE. \n*/\n\nimport z42noiseGen from './noiseGen.js';\nimport MersenneTwister from 'mersennetwister';\n\n//----------------------------------------------------------------------------------------------------------------\n// Class to generate 2D fractal noise.\n\t\nexport default class {\n\tconstructor( octaves, seed = Math.random() ) {\n\t\tthis._noiseGenes = [];\n\t\tthis._seed = Math.trunc( seed * 0xFFFFFFFF );\n\t\tthis.octaves = octaves;\n\t}\n\n\t//----------------------------------------------------------------------------------------------------------------\n\t// Get / set number of octaves for fractal noise.\n\n\tset octaves( value ) {\n\t\tvalue = Math.trunc( value );\n\t\tif( this._noiseGenes.length === value )\n\t\t\treturn;\n\n\t\tthis._noiseGenes.length = value;\n\n\t\tconst rnd = new MersenneTwister( this._seed );\n\n\t\tfor( let i = 0; i < value; ++i ) {\n\t\t\tconst octaveSeed = rnd.random();\n\t\t\t\n\t\t\tlet gen = this._noiseGenes[ i ];\n\t\t\tif( gen ) {\n\t\t\t\tgen.seed = octaveSeed;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgen = this._noiseGenes[ i ] = new z42noiseGen( octaveSeed );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tget octaves() { return this._noiseGenes.length; }\n\n\t//----------------------------------------------------------------------------------------------------------------\n\t/// Get fractal noise value at given coordinates. Result will be in range of -amplitude to amplitude (approx.)\n\t\n\tnoise( x, y, frequency = 1.0, gain = 0.5, lacunarity = 2.0, amplitude = 1.0 ) {\n\t\tlet res  = 0;\n\t\tlet f    = frequency;\n\t\tlet a    = amplitude;\n\n\t\tfor( let i = 0; i < this._noiseGenes.length; i++ ) {\n\t\t\t// All noise functions return values in the range of -1 to 1.\n\t\t\tlet n = this._noiseGenes[ i ].perlin2( x * f, y * f );\n\t\t\tres += n * a;\t\t\t\n\t\t\ta *= gain;\n\t\t\tf *= lacunarity;\n\t\t}\n\t\t\n\t\treturn res;  \n\t}\t\n\n\t//----------------------------------------------------------------------------------------------------------------\n}","/*\nColor and image manipulation utilities. Copyright (c) 2019 zett42.\nhttps://github.com/zett42/plasmafractal-gl\n\nMIT License\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE. \n*/\n\nimport * as tinycolor from 'tinycolor2';\nimport FractalNoiseGen from './fractalNoise.js';\n\n//----------------------------------------------------------------------------------------------------------------\n/// Render a palette segment into a one-dimensional RGBA Uint32Array.\n/// Wraps around in case index is out of range. \n/// Returns startIndex + count.\n\nfunction renderPaletteSegment( outPaletteUint32, startIndex, count, startColor, endColor, \n\t\t\t\t\t\t\t   easeFunction, noiseFunction ) {\t\t\n\tif( count <= 0 ) \n\t\treturn;\n\tif( count > outPaletteUint32.length )\n\t\tcount = outPaletteUint32.length;\n\n\tfor( let i = 0; i < count; ++i ) {\n\t\tconst pos = mod( i + startIndex, outPaletteUint32.length );\n\n\t\tconst ec = {\n\t\t\tr: easeFunction( i, startColor.r, endColor.r - startColor.r, count ),\n\t\t\tg: easeFunction( i, startColor.g, endColor.g - startColor.g, count ),\n\t\t\tb: easeFunction( i, startColor.b, endColor.b - startColor.b, count ),\n\t\t\ta: easeFunction( i, startColor.a, endColor.a - startColor.a, count ),\n\t\t};\n\n\t\tconst nc = noiseFunction( i / count, ec );\n\n\t\tconst r = Math.round( nc.r );\n\t\tconst g = Math.round( nc.g );\n\t\tconst b = Math.round( nc.b );\n\t\t// Note: alpha component is in 0..1 range, so we have to multiply with 255 for final output.\n\t\tconst a = Math.round( nc.a * 255 );\n\n\t\toutPaletteUint32[ pos ] = r | ( g << 8 ) | ( b << 16 ) | ( a << 24 );\n\t}\n\n\treturn startIndex + count;\n}\n\n//----------------------------------------------------------------------------------------------------------------\n/// Render a palette definition into a one-dimensional RGBA Uint32Array.\n///\n/// Wraps around in case index is out of range. \n///\n/// Argument for inputPaletteDef must be an array of objects:\n/// { \n///\t\tpos,      // 0..1\n///\t\tcolor,    // { r, g, b, a } where rgb values are in range 0..255 and a is in range 0..1\n///\t\teaseFun,  // ease function\n/// }\n///\n/// Before rendering, a temporary clone of the inputPalette will be made and sorted by positions.\n\nfunction renderPaletteDef( outPaletteUint32, count, inputPaletteDef ) {\n\n\t// shallow clone is sufficient here, as we don't modify properties of array elements\n\tlet sortedPalette = [ ...inputPaletteDef ];\n\tsortedPalette.sort( ( a, b ) => a.pos - b.pos );\n\n\tfor( let i = 0; i < sortedPalette.length; ++i ) {\n\t\tconst iEnd = ( i + 1 ) % sortedPalette.length;\n\n\t\tconst start = sortedPalette[ i ];\n\t\tconst end   = sortedPalette[ iEnd ];\n\n\t\tconst startPos   = start.pos * count;\n\t\tconst endPos     = end.pos   * count;\n\t\tconst startIndex = Math.round( startPos );\n\t\tconst endIndex   = Math.round( endPos );\n\t\tlet   dist       = endIndex - startIndex;\n\n\t\tif( iEnd <= i ) {\n\t\t\t// wrap-around\n\t\t\tdist = count - startIndex + endIndex;  \n\t\t}\n\n\t\tif( dist <= 0 ){\n\t\t\toutPaletteUint32[ startIndex ] = start.color;\n\t\t}\n\t\telse {\n\t\t\tlet noiseFun = ( pos, rgb ) => rgb;\n\t\t\tif( start.isNoisy && start.noise ) {\n\t\t\t\tnoiseFun = makeNoiseFun( start.noise );\n\t\t\t}\n\t\t\trenderPaletteSegment( outPaletteUint32, startIndex, dist, start.color, end.color, start.easeFun, noiseFun );\n\t\t}\n\t}\t\n}\n\n//----------------------------------------------------------------------------------------------------------------\n// Generate a noise function.\n\nfunction makeNoiseFun( noiseOpt ) {\n\n\tconst noiseGen = new FractalNoiseGen( noiseOpt.octaves, noiseOpt.seed );\n\n\treturn function( pos, rgb ){\n\n\t\tconst y = 0;  // possible future extension: animate y\n\n\t\tconst n = noiseGen.noise( pos, y, noiseOpt.frequency, noiseOpt.gain, noiseOpt.lacunarity, \n\t\t\t\t\t\t\t\t\tnoiseOpt.amplitude );\n\t\t\t\t\t\t\t\t\t\n\t\treturn adjustRgbLightness( rgb, n );\t\t\t\t\t\t\t\t\t  \n\t}\n}\n\n//----------------------------------------------------------------------------------------------------------------\n/// Blend two palettes definitions (inFirstPalette, inSecondPalette) and return the result as a new palette.\n/// Alpha must be in the 0..1 range.\n\nfunction blendPaletteDef( inFirstPalette, inSecondPalette, alphaFloat ){\n\tif( inFirstPalette.length != inSecondPalette.length )\n\t{\n\t\tconsole.assert( false, \"Palette arguments must have same size\" );\n\t\treturn null;\n\t}\n\n\tlet result = _.cloneDeep( inSecondPalette );\n\t\n\tfor( let i = 0; i < inFirstPalette.length; ++i )\n\t{\n\t\tresult[ i ].color = blendColorRGBA( \n\t\t\tinFirstPalette[ i ].color, inSecondPalette[ i ].color, alphaFloat );\n\t}\t\t\n\n\treturn result;\n}\n\n//----------------------------------------------------------------------------------------------------------------\n/// Blend two RGB color objects and return the result. Alpha must be in the 0..1 range.\n\nfunction blendColorRGBA( c1, c2, alphaFloat ) {\n\treturn {\n\t\tr: Math.round( c1.r + ( c2.r - c1.r ) * alphaFloat ),\n\t\tg: Math.round( c1.g + ( c2.g - c1.g ) * alphaFloat ),\n\t\tb: Math.round( c1.b + ( c2.b - c1.b ) * alphaFloat ),\n\t\ta: Math.round( c1.a + ( c2.a - c1.a ) * alphaFloat ),\n\t}\n}\t\n\n//----------------------------------------------------------------------------------------------------------------\n/// Convert HSV input to RGB result, then increment hue of input color by golden ratio.\n\nfunction nextGoldenRatioColorRGBA( hsva ) { \n\tlet result = tinycolor( hsva ).toRgb();\n\t\n\tconst golden_ratio = 0.618033988749895 * 360;\n\thsva.h = ( hsva.h + golden_ratio ) % 360; \n\n\treturn result;\n}\t\n\n//----------------------------------------------------------------------------------------------------------------\n/// True modulo function that only returns positive numbers\n/// (compare with JS \"%\" operator which returns the remainder instead, which can be negative).\n\nfunction mod( a, n ) {\n\treturn a - ( n * Math.floor( a / n ) );\n}\t\n\n//----------------------------------------------------------------------------------------------------------------\n/// Clamp x to min and max.\n\nfunction clamp( x, min, max ) {\n\tif( x < min ) return min;\n\tif( x > max ) return max;\n\treturn x;\n}\n\n//----------------------------------------------------------------------------------------------------------------\n// Linear interpolation.\n\nfunction lerp( start, end, alpha ) {\n\treturn start + ( end - start ) * alpha;\n}\n\n//----------------------------------------------------------------------------------------------------------------\n// Linear interpolation applied two times.\n\nfunction doubleLerp( start, end1, alpha1, end2, alpha2 ) {\n\treturn lerp( lerp( start, end1, alpha1 ),\n\t\t\t\t\t\tend2, alpha2 ); \n}\n\n//----------------------------------------------------------------------------------------------------------------\n// Calculate HSL lightness of RGB color. Result is in range 0..1.\n\nfunction rgbToHslLightness( color ) {\n\treturn ( Math.max( color.r, color.g, color.b ) + \n\t\t\t Math.min( color.r, color.g, color.b ) ) / 255 / 2;\n}\n\n//----------------------------------------------------------------------------------------------------------------\n// Set absolute lightness of RGB color according to HSL model, without leaving the RGB space.\n// Lightness must be in range of 0..1.\n// This is implemented by blending the given color with black and/or white. \n\nfunction setRgbLightness( color, lightness, \n\t\t\t\t\t\t  baseLightness = rgbToHslLightness( color ) ) {\n\n\tbaseLightness = baseLightness * 2 - 1;    // 0..1 => -1..1\n\t\n\tif( baseLightness < 0 ){\n\t\t// Handle edge case that would cause div by zero\n\t\tif( baseLightness === -1 ) {\n\t\t\tlightness *= 255;\n\t\t\treturn { r: lightness, g: lightness, b: lightness, a: color.a };\n\t\t} \n\t\tlightness    = lightness * 2 - 1;   // 0..1 => -1..1\n\t\tconst a      = -baseLightness;\n\t\tconst b      = -Math.min( lightness, 0 );   \n\t\tconst alpha1 = ( b - a ) / ( 1 - a );      // percentage of fade with black\n\t\tconst alpha2 = Math.max( lightness, 0 );   // percentage of fade with white\n\n\t\treturn{\n\t\t\tr: doubleLerp( color.r, 0, alpha1, 255, alpha2 ),\n\t\t\tg: doubleLerp( color.g, 0, alpha1, 255, alpha2 ),\n\t\t\tb: doubleLerp( color.b, 0, alpha1, 255, alpha2 ),\n\t\t\ta: color.a\n\t\t}\t\n\t}\n\telse {\n\t\t// Handle edge case that would cause div by zero\n\t\tif( baseLightness === 1 ) {\n\t\t\tlightness *= 255;\n\t\t\treturn { r: lightness, g: lightness, b: lightness, a: color.a };\n\t\t}\n\t\tlightness    = lightness * 2 - 1;   // 0..1 => -1..1\n\t\tconst a      = baseLightness;\n\t\tconst b      = Math.max( lightness, 0 );     \n\t\tconst alpha1 = ( b - a ) / ( 1 - a );       // percentage of fade with white\n\t\tconst alpha2 = -Math.min( lightness, 0 );   // percentage of fade with black\n\n\t\treturn{\n\t\t\tr: doubleLerp( color.r, 255, alpha1, 0, alpha2 ),\n\t\t\tg: doubleLerp( color.g, 255, alpha1, 0, alpha2 ),\n\t\t\tb: doubleLerp( color.b, 255, alpha1, 0, alpha2 ),\n\t\t\ta: color.a\n\t\t}\t\n\t}\n}\n\n//----------------------------------------------------------------------------------------------------------------\n// Adjust relative lightness (+/- offset) of RGB color according to HSL model.\n\nfunction adjustRgbLightness( color, relativeLightness ) { \n\tconst baseLightness = rgbToHslLightness( color );\n\tconst lightness = clamp( baseLightness + relativeLightness, 0, 1 );\n\treturn setRgbLightness( color, lightness, baseLightness );\n}\n\n//----------------------------------------------------------------------------------------------------------------\n\nexport {\n\trenderPaletteSegment,\n\trenderPaletteDef,\n\tblendPaletteDef,\n\tblendColorRGBA,\n\tnextGoldenRatioColorRGBA,\n\tmod,\n\tclamp,\n\tlerp,\n\tdoubleLerp,\n\trgbToHslLightness,\n\tsetRgbLightness,\n\tadjustRgbLightness,\n}","/*\r\nOption descriptor classes. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n*/\r\n//------------------------------------------------------------------------------------------------\r\n// A node of arbitrary attributes and child nodes similar to XML.\r\n// This serves as a base class but can also be instanciated to group options.\r\n\r\nclass Node {\r\n\tconstructor( attrs, nodes ) {\r\n\t\r\n\t\t// Define $attrs as non-enumerable property.\r\n\t\tObject.defineProperty( this, \"$attrs\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: false,\r\n\t\t\twritable: true,\r\n\t\t\tvalue: attrs\r\n\t\t});\t\r\n\t\r\n\t\t// Insert child nodes.\r\n\t\tObject.assign( this, nodes );\t\t\t\r\n\t}\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n// Base class for a single option. The option could be a primitive value or an object.\r\n//\r\n// This class should not be instanciated directly. Instead instanciate derived classes \r\n// for concrete option types.\r\n\r\nclass Option extends Node {\r\n\tconstructor( attrs ){\r\n\t\tsuper( attrs );\r\n\t}\r\n\t\r\n\t// Serialize to string.\r\n\t$serialize( value ) { return value.toString(); }\r\n\r\n\t// Deserialize from string.\r\n\t$deserialize( value ) { return value; }\r\n\r\n\t// Format as string for display in UI.\r\n\t$displayValue( value ) { return value.toString(); }\r\n\r\n\t// Output parse error\r\n\t$parseError( value ) {\r\n\t\tconsole.error( \"Invalid option value:\", value, \", descriptor:\", this );\r\n\t}\r\n\r\n\t// Return name of default component that will be used to render this item if $attrs.component is not defined.\r\n\t// To be overridden by derived classes.\r\n\tget $defaultComponent() { return null; }\r\n\r\n\t// Actual component to use.\r\n\tget $component() { return this.$attrs.component || this.$defaultComponent; }\r\n}\r\n\r\n//------------------------------------------------------------------------------------------------\r\n\r\nexport { \r\n\tNode,\r\n\tOption,\r\n}","/* z42easing \n *\n * This code is a modified version of \"jQuery Easing v1.3\" for standalone use.\n * - removed unused 'x' parameters\n * - use concise function names and arrow functions\n * - added 'linear', 'inExpo2', 'outExpo2', 'inOutExpo2', 'inOutSine2*' functions\n * - added ES6 export\n *\n * Original license below this line:\n * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n *\n * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/\n *\n * Uses the built in easing capabilities added In jQuery 1.1\n * to offer multiple easing options\n *\n * TERMS OF USE - jQuery Easing\n * \n * Open source under the BSD License. \n * \n * Copyright  2008 George McGinley Smith\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice, this list of \n * conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice, this list \n * of conditions and the following disclaimer in the documentation and/or other materials \n * provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be used to endorse \n * or promote products derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n * OF THE POSSIBILITY OF SUCH DAMAGE. \n *\n*/\n\n// Function parameters:\n// t: current time, b: begInnIng value, c: change In value, d: duration\n\nexport const linear = (t, b, c, d) => c * t / d + b;\n\nexport const inQuad = (t, b, c, d) => c*(t/=d)*t + b;\n\nexport const outQuad = (t, b, c, d) => -c *(t/=d)*(t-2) + b;\n\nexport const inOutQuad = (t, b, c, d) => {\n\tif ((t/=d/2) < 1) return c/2*t*t + b;\n\treturn -c/2 * ((--t)*(t-2) - 1) + b;\n}\n\nexport const inCubic = (t, b, c, d) => c*(t/=d)*t*t + b;\n\nexport const outCubic = (t, b, c, d) => c*((t=t/d-1)*t*t + 1) + b;\n\nexport const inOutCubic = (t, b, c, d) => {\n\tif ((t/=d/2) < 1) return c/2*t*t*t + b;\n\treturn c/2*((t-=2)*t*t + 2) + b;\n}\n\nexport const inQuart = (t, b, c, d) => c*(t/=d)*t*t*t + b;\n\nexport const outQuart = (t, b, c, d) => -c * ((t=t/d-1)*t*t*t - 1) + b;\n\nexport const inOutQuart = (t, b, c, d) => {\n\tif ((t/=d/2) < 1) return c/2*t*t*t*t + b;\n\treturn -c/2 * ((t-=2)*t*t*t - 2) + b;\n}\n\nexport const inQuint = (t, b, c, d) => c*(t/=d)*t*t*t*t + b;\n\nexport const outQuint = (t, b, c, d) => c*((t=t/d-1)*t*t*t*t + 1) + b;\n\nexport const inOutQuint = (t, b, c, d) => {\n\tif ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n\treturn c/2*((t-=2)*t*t*t*t + 2) + b;\n}\n\nexport const inSine = (t, b, c, d) => -c * Math.cos(t/d * (Math.PI/2)) + c + b;\n\nexport const outSine = (t, b, c, d) => c * Math.sin(t/d * (Math.PI/2)) + b;\n\nexport const inOutSine = (t, b, c, d) => -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n\nexport const inOutSine2_3 = (t, b, c, d) =>\n\t-c/2 * (Math.cos(Math.PI*t/d) * 0.6 + Math.cos(Math.PI*t/d*3) * 0.4 - 1) + b;\n\nexport const inOutSine2_5 = (t, b, c, d) =>\n\t-c/2 * (Math.cos(Math.PI*t/d) * 0.875 + Math.cos(Math.PI*t/d*5) * 0.125 - 1) + b;\n\nexport const inOutSine2_9 = (t, b, c, d) =>\n\t-c/2 * (Math.cos(Math.PI*t/d) * 0.875 + Math.cos(Math.PI*t/d*9) * 0.125 - 1) + b;\n\nexport const inOutSine2_13 = (t, b, c, d) =>\n\t-c/2 * (Math.cos(Math.PI*t/d) * 0.9 + Math.cos(Math.PI*t/d*13) * 0.1 - 1) + b;\n\nexport const inExpo = (t, b, c, d) => (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n\nexport const outExpo = (t, b, c, d) => (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n\nexport const inOutExpo = (t, b, c, d) => {\n\tif (t==0) return b;\n\tif (t==d) return b+c;\n\tif ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n\treturn c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n}\n\nexport const inExpo2 = (t, b, c, d) => (t==0) ? b : c * Math.pow(2, 20 * (t/d - 1)) + b;\n\nexport const outExpo2 = (t, b, c, d) => (t==d) ? b+c : c * (-Math.pow(2, -20 * t/d) + 1) + b;\n\nexport const inOutExpo2 = (t, b, c, d) => {\n\tif (t==0) return b;\n\tif (t==d) return b+c;\n\tif ((t/=d/2) < 1) return c/2 * Math.pow(2, 20 * (t - 1)) + b;\n\treturn c/2 * (-Math.pow(2, -20 * --t) + 2) + b;\n}\n\nexport const inCirc = (t, b, c, d) => -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;\n\nexport const outCirc = (t, b, c, d) => c * Math.sqrt(1 - (t=t/d-1)*t) + b;\n\nexport const inOutCirc = (t, b, c, d) => {\n\tif ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n\treturn c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\n}\n\nexport const inElastic = (t, b, c, d) => {\n\tlet s=1.70158;let p=0;let a=c;\n\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\tif (a < Math.abs(c)) { a=c; s=p/4; }\n\telse s = p/(2*Math.PI) * Math.asin (c/a);\n\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n}\n\nexport const outElastic = (t, b, c, d) => {\n\tlet s=1.70158;let p=0;let a=c;\n\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\tif (a < Math.abs(c)) { a=c; s=p/4; }\n\telse s = p/(2*Math.PI) * Math.asin (c/a);\n\treturn a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n}\n\nexport const inOutElastic = (t, b, c, d) => {\n\tlet s=1.70158;let p=0;let a=c;\n\tif (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n\tif (a < Math.abs(c)) { a=c; s=p/4; }\n\telse s = p/(2*Math.PI) * Math.asin (c/a);\n\tif (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n}\n\nexport const inBack = (t, b, c, d, s) => {\n\tif (s == undefined) s = 1.70158;\n\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n}\n\nexport const outBack = (t, b, c, d, s) => {\n\tif (s == undefined) s = 1.70158;\n\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n}\n\nexport const inOutBack = (t, b, c, d, s) => {\n\tif (s == undefined) s = 1.70158; \n\tif ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n}\n\nexport const inBounce = (t, b, c, d) => c - outBounce (d-t, 0, c, d) + b;\n\nexport const outBounce = (t, b, c, d) => {\n\tif ((t/=d) < (1/2.75)) {\n\t\treturn c*(7.5625*t*t) + b;\n\t} else if (t < (2/2.75)) {\n\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t} else if (t < (2.5/2.75)) {\n\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t} else {\n\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t}\n}\n\nexport const inOutBounce = (t, b, c, d) => {\n\tif (t < d/2) return inBounce (t*2, 0, c, d) * .5 + b;\n\treturn outBounce (t*2-d, 0, c, d) * .5 + c*.5 + b;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-tabs',{attrs:{\"value\":_vm.tabIndex},on:{\"input\":function($event){return _vm.$emit( 'update:tabIndex', $event )}}},_vm._l((_vm.optView.groups),function(group,key){return _c('b-tab',{key:_vm.childId( key ),attrs:{\"id\":_vm.childId( key ),\"title\":group.title}},[_c(_vm.contentComponentName( group ),{tag:\"component\",staticClass:\"container px-0\",attrs:{\"id\":_vm.childId( key ),\"optData\":_vm.optData,\"optDesc\":_vm.optDesc,\"optView\":group},on:{\"opt-modified\":function($event){return _vm.$emit( 'opt-modified', $event )}}})],1)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\nOption UI components. Copyright (c) 2019 zett42.\r\nhttps://github.com/zett42/plasmafractal-gl\r\n\r\nMIT License\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE. \r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nComponent that generates tabs for the groups defined by the options view\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<template>\r\n\t<b-tabs \r\n\t\t:value=\"tabIndex\" \r\n\t\t@input=\"$emit( 'update:tabIndex', $event )\" \r\n\t\t>\r\n\t\t<!-- Note: 'key' attribute required when using v-for with component (https://vuejs.org/v2/guide/list.html#v-for-with-a-Component) -->\r\n\t\t\r\n\t\t<b-tab v-for=\"( group, key ) in optView.groups\"\r\n\t\t\t:key=\"childId( key )\"\r\n\t\t\t:id=\"childId( key )\"\r\n\t\t\t:title=\"group.title\"\r\n\t\t\t>\r\n\t\t\t<!-- Component to display the content of the tab.\r\n\t\t\t\tInstead of modifying optData directly the component just forwards opt-modified event \r\n\t\t\t\tto parent to give parent full control. -->\r\n\t\t\t<component\r\n\t\t\t\t:is=\"contentComponentName( group )\"\r\n\t\t\t\t:id=\"childId( key )\" \r\n\t\t\t\t:optData=\"optData\"\r\n\t\t\t\t:optDesc=\"optDesc\"\r\n\t\t\t\t:optView=\"group\"\r\n\t\t\t\tclass=\"container px-0\"\r\n\t\t\t\t@opt-modified=\"$emit( 'opt-modified', $event )\"\r\n\t\t\t/>\r\n\t\t</b-tab>\r\n\t</b-tabs>\r\n</template>\r\n\r\n<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n\r\n<script>\r\nimport * as z42opt from \"./optionsDescriptor.js\";\r\nimport * as z42optUtil from \"./optionsUtils.js\";\r\n\r\nexport default {\r\n\tname: \"z42opt-tabs\",\r\n\tinheritAttrs: false,\r\n\r\n\tprops: {\r\n\t\tid:       { type: String, required: true },\r\n\t\toptData:  { type: Object, required: true },\r\n\t\toptDesc:  { type: z42opt.Node, required: true }, \r\n\t\toptView:  { type: Object, required: true },\r\n\t\ttabIndex: { type: Number, required: false, default: 0 },\r\n\t},\r\n\tmethods: {\r\n\t\tchildId( key ) { \r\n\t\t\treturn z42optUtil.joinPath( this.id, key, \"#\" ); \r\n\t\t},\r\n\t\tcontentComponentName( group ){\r\n\t\t\t// Default component name can be overridden via optView (group.component).\r\n\t\t\tif( group.component )\r\n\t\t\t\treturn group.component;\r\n\r\n\t\t\t// If group contains sub groups, create nested tabs. This works, but doesn't seem to be optimal.\r\n\t\t\t// Maybe a group box would be better suitable?\r\n\t\t\tif( group.groups )\r\n\t\t\t\treturn 'z42opt-tabs';\r\n\r\n\t\t\t// Otherwise create a flat view of the options.\r\n\t\t\treturn 'z42opt-container';\r\n\t\t},\r\n\t},\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./z42opt-tabs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./z42opt-tabs.vue?vue&type=template&id=4b29e286&\"\nimport script from \"./z42opt-tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./z42opt-tabs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}